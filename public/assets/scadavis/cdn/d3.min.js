!function () { var n = { version: "3.5.17" }, t = [].slice, e = function (n) { return t.call(n) }, r = this.document; function i(n) { return n && (n.ownerDocument || n.document || n).documentElement } function u(n) { return n && (n.ownerDocument && n.ownerDocument.defaultView || n.document && n || n.defaultView) } if (r) try { e(r.documentElement.childNodes)[0].nodeType } catch (o) { e = function (n) { for (var t = n.length, e = Array(t); t--;)e[t] = n[t]; return e } } if (Date.now || (Date.now = function () { return +new Date }), r) try { r.createElement("DIV").style.setProperty("opacity", 0, "") } catch (a) { var l = this.Element.prototype, c = l.setAttribute, f = l.setAttributeNS, s = this.CSSStyleDeclaration.prototype, $ = s.setProperty; l.setAttribute = function (n, t) { c.call(this, n, t + "") }, l.setAttributeNS = function (n, t, e) { f.call(this, n, t, e + "") }, s.setProperty = function (n, t, e) { $.call(this, n, t + "", e) } } function h(n, t) { return n < t ? -1 : n > t ? 1 : n >= t ? 0 : NaN } function _(n) { return null === n ? NaN : +n } function p(n) { return !isNaN(n) } function g(n) { return { left: function (t, e, r, i) { for (arguments.length < 3 && (r = 0), arguments.length < 4 && (i = t.length); r < i;) { var u = r + i >>> 1; 0 > n(t[u], e) ? r = u + 1 : i = u } return r }, right: function (t, e, r, i) { for (arguments.length < 3 && (r = 0), arguments.length < 4 && (i = t.length); r < i;) { var u = r + i >>> 1; n(t[u], e) > 0 ? i = u : r = u + 1 } return r } } } n.ascending = h, n.descending = function (n, t) { return t < n ? -1 : t > n ? 1 : t >= n ? 0 : NaN }, n.min = function (n, t) { var e, r, i = -1, u = n.length; if (1 === arguments.length) { for (; ++i < u;)if (null != (r = n[i]) && r >= r) { e = r; break } for (; ++i < u;)null != (r = n[i]) && e > r && (e = r) } else { for (; ++i < u;)if (null != (r = t.call(n, n[i], i)) && r >= r) { e = r; break } for (; ++i < u;)null != (r = t.call(n, n[i], i)) && e > r && (e = r) } return e }, n.max = function (n, t) { var e, r, i = -1, u = n.length; if (1 === arguments.length) { for (; ++i < u;)if (null != (r = n[i]) && r >= r) { e = r; break } for (; ++i < u;)null != (r = n[i]) && r > e && (e = r) } else { for (; ++i < u;)if (null != (r = t.call(n, n[i], i)) && r >= r) { e = r; break } for (; ++i < u;)null != (r = t.call(n, n[i], i)) && r > e && (e = r) } return e }, n.extent = function (n, t) { var e, r, i, u = -1, o = n.length; if (1 === arguments.length) { for (; ++u < o;)if (null != (r = n[u]) && r >= r) { e = i = r; break } for (; ++u < o;)null != (r = n[u]) && (e > r && (e = r), i < r && (i = r)) } else { for (; ++u < o;)if (null != (r = t.call(n, n[u], u)) && r >= r) { e = i = r; break } for (; ++u < o;)null != (r = t.call(n, n[u], u)) && (e > r && (e = r), i < r && (i = r)) } return [e, i] }, n.sum = function (n, t) { var e, r = 0, i = n.length, u = -1; if (1 === arguments.length) for (; ++u < i;)p(e = +n[u]) && (r += e); else for (; ++u < i;)p(e = +t.call(n, n[u], u)) && (r += e); return r }, n.mean = function (n, t) { var e, r = 0, i = n.length, u = -1, o = i; if (1 === arguments.length) for (; ++u < i;)p(e = _(n[u])) ? r += e : --o; else for (; ++u < i;)p(e = _(t.call(n, n[u], u))) ? r += e : --o; if (o) return r / o }, n.quantile = function (n, t) { var e = (n.length - 1) * t + 1, r = Math.floor(e), i = +n[r - 1], u = e - r; return u ? i + u * (n[r] - i) : i }, n.median = function (t, e) { var r, i = [], u = t.length, o = -1; if (1 === arguments.length) for (; ++o < u;)p(r = _(t[o])) && i.push(r); else for (; ++o < u;)p(r = _(e.call(t, t[o], o))) && i.push(r); if (i.length) return n.quantile(i.sort(h), .5) }, n.variance = function (n, t) { var e, r, i = n.length, u = 0, o = 0, a = -1, l = 0; if (1 === arguments.length) for (; ++a < i;)p(e = _(n[a])) && (r = e - u, u += r / ++l, o += r * (e - u)); else for (; ++a < i;)p(e = _(t.call(n, n[a], a))) && (r = e - u, u += r / ++l, o += r * (e - u)); if (l > 1) return o / (l - 1) }, n.deviation = function () { var t = n.variance.apply(this, arguments); return t ? Math.sqrt(t) : t }; var v = g(h); function d(n) { return n.length } n.bisectLeft = v.left, n.bisect = n.bisectRight = v.right, n.bisector = function (n) { return g(1 === n.length ? function (t, e) { return h(n(t), e) } : n) }, n.shuffle = function (n, t, e) { (u = arguments.length) < 3 && (e = n.length, u < 2 && (t = 0)); for (var r, i, u = e - t; u;)i = Math.random() * u-- | 0, r = n[u + t], n[u + t] = n[i + t], n[i + t] = r; return n }, n.permute = function (n, t) { for (var e = t.length, r = Array(e); e--;)r[e] = n[t[e]]; return r }, n.pairs = function (n) { for (var t, e = 0, r = n.length - 1, i = n[0], u = Array(r < 0 ? 0 : r); e < r;)u[e] = [t = i, i = n[++e]]; return u }, n.transpose = function (t) { if (!(u = t.length)) return []; for (var e = -1, r = n.min(t, d), i = Array(r); ++e < r;)for (var u, o = -1, a = i[e] = Array(u); ++o < u;)a[o] = t[o][e]; return i }, n.zip = function () { return n.transpose(arguments) }, n.keys = function (n) { var t = []; for (var e in n) t.push(e); return t }, n.values = function (n) { var t = []; for (var e in n) t.push(n[e]); return t }, n.entries = function (n) { var t = []; for (var e in n) t.push({ key: e, value: n[e] }); return t }, n.merge = function (n) { for (var t, e, r, i = n.length, u = -1, o = 0; ++u < i;)o += n[u].length; for (e = Array(o); --i >= 0;)for (t = (r = n[i]).length; --t >= 0;)e[--o] = r[t]; return e }; var y = Math.abs; function m(n, t) { for (var e in t) Object.defineProperty(n.prototype, e, { value: t[e], enumerable: !1 }) } function x() { this._ = Object.create(null) } function b(n) { return "__proto__" == (n += "") || "\0" === n[0] ? "\0" + n : n } function w(n) { return "\0" === (n += "")[0] ? n.slice(1) : n } function k(n) { return b(n) in this._ } function S(n) { return (n = b(n)) in this._ && delete this._[n] } function E() { var n = []; for (var t in this._) n.push(w(t)); return n } function C() { var n = 0; for (var t in this._) ++n; return n } function A() { for (var n in this._) return !1; return !0 } function L() { this._ = Object.create(null) } function q(n) { return n } function z(n, t, e) { return function () { var r = e.apply(t, arguments); return r === t ? n : r } } function M(n, t) { if (t in n) return t; t = t.charAt(0).toUpperCase() + t.slice(1); for (var e = 0, r = T.length; e < r; ++e) { var i = T[e] + t; if (i in n) return i } } n.range = function (n, t, e) { if (arguments.length < 3 && (e = 1, arguments.length < 2 && (t = n, n = 0)), (t - n) / e == 1 / 0) throw Error("infinite range"); var r, i = [], u = function n(t) { for (var e = 1; t * e % 1;)e *= 10; return e }(y(e)), o = -1; if (n *= u, t *= u, (e *= u) < 0) for (; (r = n + e * ++o) > t;)i.push(r / u); else for (; (r = n + e * ++o) < t;)i.push(r / u); return i }, n.map = function (n, t) { var e = new x; if (n instanceof x) n.forEach(function (n, t) { e.set(n, t) }); else if (Array.isArray(n)) { var r, i = -1, u = n.length; if (1 === arguments.length) for (; ++i < u;)e.set(i, n[i]); else for (; ++i < u;)e.set(t.call(n, r = n[i], i), r) } else for (var o in n) e.set(o, n[o]); return e }, m(x, { has: k, get: function (n) { return this._[b(n)] }, set: function (n, t) { return this._[b(n)] = t }, remove: S, keys: E, values: function () { var n = []; for (var t in this._) n.push(this._[t]); return n }, entries: function () { var n = []; for (var t in this._) n.push({ key: w(t), value: this._[t] }); return n }, size: C, empty: A, forEach: function (n) { for (var t in this._) n.call(this, w(t), this._[t]) } }), n.nest = function () { var t, e, r = {}, i = [], u = []; function o(n, u, a) { if (a >= i.length) return e ? e.call(r, u) : t ? u.sort(t) : u; for (var l, c, f, s, $ = -1, h = u.length, _ = i[a++], p = new x; ++$ < h;)(s = p.get(l = _(c = u[$]))) ? s.push(c) : p.set(l, [c]); return n ? (c = n(), f = function (t, e) { c.set(t, o(n, e, a)) }) : (c = {}, f = function (t, e) { c[t] = o(n, e, a) }), p.forEach(f), c } return r.map = function (n, t) { return o(t, n, 0) }, r.entries = function (t) { return function n(t, e) { if (e >= i.length) return t; var r = [], o = u[e++]; return t.forEach(function (t, i) { r.push({ key: t, values: n(i, e) }) }), o ? r.sort(function (n, t) { return o(n.key, t.key) }) : r }(o(n.map, t, 0), 0) }, r.key = function (n) { return i.push(n), r }, r.sortKeys = function (n) { return u[i.length - 1] = n, r }, r.sortValues = function (n) { return t = n, r }, r.rollup = function (n) { return e = n, r }, r }, n.set = function (n) { var t = new L; if (n) for (var e = 0, r = n.length; e < r; ++e)t.add(n[e]); return t }, m(L, { has: k, add: function (n) { return this._[b(n += "")] = !0, n }, remove: S, values: E, size: C, empty: A, forEach: function (n) { for (var t in this._) n.call(this, w(t)) } }), n.behavior = {}, n.rebind = function (n, t) { for (var e, r = 1, i = arguments.length; ++r < i;)n[e = arguments[r]] = z(n, t, t[e]); return n }; var T = ["webkit", "ms", "moz", "Moz", "o", "O"]; function R() { } function N() { } function P(n) { var t = [], e = new x; function r() { for (var e, r = t, i = -1, u = r.length; ++i < u;)(e = r[i].on) && e.apply(this, arguments); return n } return r.on = function (r, i) { var u, o = e.get(r); return arguments.length < 2 ? o && o.on : (o && (o.on = null, t = t.slice(0, u = t.indexOf(o)).concat(t.slice(u + 1)), e.remove(r)), i && t.push(e.set(r, { on: i })), n) }, r } function U() { n.event.preventDefault() } function j() { for (var t, e = n.event; t = e.sourceEvent;)e = t; return e } function D(t) { for (var e = new N, r = 0, i = arguments.length; ++r < i;)e[arguments[r]] = P(e); return e.of = function (r, i) { return function (u) { try { var o = u.sourceEvent = n.event; u.target = t, n.event = u, e[u.type].apply(r, i) } finally { n.event = o } } }, e } n.dispatch = function () { for (var n = new N, t = -1, e = arguments.length; ++t < e;)n[arguments[t]] = P(n); return n }, N.prototype.on = function (n, t) { var e = n.indexOf("."), r = ""; if (e >= 0 && (r = n.slice(e + 1), n = n.slice(0, e)), n) return arguments.length < 2 ? this[n].on(r) : this[n].on(r, t); if (2 === arguments.length) { if (null == t) for (n in this) this.hasOwnProperty(n) && this[n].on(r, null); return this } }, n.event = null, n.requote = function (n) { return n.replace(H, "\\$&") }; var H = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g, F = {}.__proto__ ? function (n, t) { n.__proto__ = t } : function (n, t) { for (var e in t) n[e] = t[e] }; function I(n) { return F(n, V), n } var O = function (n, t) { return t.querySelector(n) }, Y = function (n, t) { return t.querySelectorAll(n) }, Z = function (n, t) { var e = n.matches || n[M(n, "matchesSelector")]; return (Z = function (n, t) { return e.call(n, t) })(n, t) }; "function" == typeof Sizzle && (O = function (n, t) { return Sizzle(n, t)[0] || null }, Y = Sizzle, Z = Sizzle.matchesSelector), n.selection = function () { return n.select(r.documentElement) }; var V = n.selection.prototype = []; function X(n) { return "function" == typeof n ? n : function () { return O(n, this) } } function B(n) { return "function" == typeof n ? n : function () { return Y(n, this) } } V.select = function (n) { var t, e, r, i, u = []; n = X(n); for (var o = -1, a = this.length; ++o < a;) { u.push(t = []), t.parentNode = (r = this[o]).parentNode; for (var l = -1, c = r.length; ++l < c;)(i = r[l]) ? (t.push(e = n.call(i, i.__data__, l, o)), e && "__data__" in i && (e.__data__ = i.__data__)) : t.push(null) } return I(u) }, V.selectAll = function (n) { var t, r, i = []; n = B(n); for (var u = -1, o = this.length; ++u < o;)for (var a = this[u], l = -1, c = a.length; ++l < c;)(r = a[l]) && (i.push(t = e(n.call(r, r.__data__, l, u))), t.parentNode = r); return I(i) }; var W = "http://www.w3.org/1999/xhtml", Q = { svg: "http://www.w3.org/2000/svg", xhtml: W, xlink: "http://www.w3.org/1999/xlink", xml: "http://www.w3.org/XML/1998/namespace", xmlns: "http://www.w3.org/2000/xmlns/" }; function G(t, e) { return t = n.ns.qualify(t), null == e ? t.local ? function n() { this.removeAttributeNS(t.space, t.local) } : function n() { this.removeAttribute(t) } : "function" == typeof e ? t.local ? function n() { var r = e.apply(this, arguments); null == r ? this.removeAttributeNS(t.space, t.local) : this.setAttributeNS(t.space, t.local, r) } : function n() { var r = e.apply(this, arguments); null == r ? this.removeAttribute(t) : this.setAttribute(t, r) } : t.local ? function n() { this.setAttributeNS(t.space, t.local, e) } : function n() { this.setAttribute(t, e) } } function J(n) { return n.trim().replace(/\s+/g, " ") } function K(t) { return RegExp("(?:^|\\s+)" + n.requote(t) + "(?:\\s+|$)", "g") } function nn(n) { return (n + "").trim().split(/^|\s+/) } function nt(n, t) { var e = (n = nn(n).map(ne)).length; return "function" == typeof t ? function r() { for (var i = -1, u = t.apply(this, arguments); ++i < e;)n[i](this, u) } : function r() { for (var i = -1; ++i < e;)n[i](this, t) } } function ne(n) { var t = K(n); return function (e, r) { if (i = e.classList) return r ? i.add(n) : i.remove(n); var i = e.getAttribute("class") || ""; r ? (t.lastIndex = 0, t.test(i) || e.setAttribute("class", J(i + " " + n))) : e.setAttribute("class", J(i.replace(t, " "))) } } function nr(n, t, e) { return null == t ? function t() { this.style.removeProperty(n) } : "function" == typeof t ? function r() { var i = t.apply(this, arguments); null == i ? this.style.removeProperty(n) : this.style.setProperty(n, i, e) } : function r() { this.style.setProperty(n, t, e) } } function ni(n, t) { return null == t ? function t() { delete this[n] } : "function" == typeof t ? function e() { var r = t.apply(this, arguments); null == r ? delete this[n] : this[n] = r } : function e() { this[n] = t } } function nu(t) { return "function" == typeof t ? t : (t = n.ns.qualify(t)).local ? function n() { return this.ownerDocument.createElementNS(t.space, t.local) } : function n() { var e = this.ownerDocument, r = this.namespaceURI; return r === W && e.documentElement.namespaceURI === W ? e.createElement(t) : e.createElementNS(r, t) } } function no() { var n = this.parentNode; n && n.removeChild(this) } function na(n) { return { __data__: n } } function nl(n) { return function () { return Z(this, n) } } function nc(n) { return arguments.length || (n = h), function (t, e) { return t && e ? n(t.__data__, e.__data__) : !t - !e } } function nf(n, t) { for (var e = 0, r = n.length; e < r; e++)for (var i, u = n[e], o = 0, a = u.length; o < a; o++)(i = u[o]) && t(i, o, e); return n } function ns(n) { return F(n, n$), n } n.ns = { prefix: Q, qualify: function (n) { var t = n.indexOf(":"), e = n; return t >= 0 && "xmlns" !== (e = n.slice(0, t)) && (n = n.slice(t + 1)), Q.hasOwnProperty(e) ? { space: Q[e], local: n } : n } }, V.attr = function (t, e) { if (arguments.length < 2) { if ("string" == typeof t) { var r = this.node(); return (t = n.ns.qualify(t)).local ? r.getAttributeNS(t.space, t.local) : r.getAttribute(t) } for (e in t) this.each(G(e, t[e])); return this } return this.each(G(t, e)) }, V.classed = function (n, t) { if (arguments.length < 2) { if ("string" == typeof n) { var e = this.node(), r = (n = nn(n)).length, i = -1; if (t = e.classList) { for (; ++i < r;)if (!t.contains(n[i])) return !1 } else for (t = e.getAttribute("class"); ++i < r;)if (!K(n[i]).test(t)) return !1; return !0 } for (t in n) this.each(nt(t, n[t])); return this } return this.each(nt(n, t)) }, V.style = function (n, t, e) { var r = arguments.length; if (r < 3) { if ("string" != typeof n) { for (e in r < 2 && (t = ""), n) this.each(nr(e, n[e], t)); return this } if (r < 2) { var i = this.node(); return u(i).getComputedStyle(i, null).getPropertyValue(n) } e = "" } return this.each(nr(n, t, e)) }, V.property = function (n, t) { if (arguments.length < 2) { if ("string" == typeof n) return this.node()[n]; for (t in n) this.each(ni(t, n[t])); return this } return this.each(ni(n, t)) }, V.text = function (n) { return arguments.length ? this.each("function" == typeof n ? function () { var t = n.apply(this, arguments); this.textContent = null == t ? "" : t } : null == n ? function () { this.textContent = "" } : function () { this.textContent = n }) : this.node().textContent }, V.html = function (n) { return arguments.length ? this.each("function" == typeof n ? function () { var t = n.apply(this, arguments); this.innerHTML = null == t ? "" : t } : null == n ? function () { this.innerHTML = "" } : function () { this.innerHTML = n }) : this.node().innerHTML }, V.append = function (n) { return n = nu(n), this.select(function () { return this.appendChild(n.apply(this, arguments)) }) }, V.insert = function (n, t) { return n = nu(n), t = X(t), this.select(function () { return this.insertBefore(n.apply(this, arguments), t.apply(this, arguments) || null) }) }, V.remove = function () { return this.each(no) }, V.data = function (n, t) { var e, r, i = -1, u = this.length; if (!arguments.length) { for (n = Array(u = (e = this[0]).length); ++i < u;)(r = e[i]) && (n[i] = r.__data__); return n } function o(n, e) { var r, i, u, o = n.length, f = e.length, s = Math.min(o, f), $ = Array(f), h = Array(f), _ = Array(o); if (t) { var p, g = new x, v = Array(o); for (r = -1; ++r < o;)(i = n[r]) && (g.has(p = t.call(i, i.__data__, r)) ? _[r] = i : g.set(p, i), v[r] = p); for (r = -1; ++r < f;)(i = g.get(p = t.call(e, u = e[r], r))) ? !0 !== i && ($[r] = i, i.__data__ = u) : h[r] = na(u), g.set(p, !0); for (r = -1; ++r < o;)r in v && !0 !== g.get(v[r]) && (_[r] = n[r]) } else { for (r = -1; ++r < s;)i = n[r], u = e[r], i ? (i.__data__ = u, $[r] = i) : h[r] = na(u); for (; r < f; ++r)h[r] = na(e[r]); for (; r < o; ++r)_[r] = n[r] } h.update = $, h.parentNode = $.parentNode = _.parentNode = n.parentNode, a.push(h), l.push($), c.push(_) } var a = ns([]), l = I([]), c = I([]); if ("function" == typeof n) for (; ++i < u;)o(e = this[i], n.call(e, e.parentNode.__data__, i)); else for (; ++i < u;)o(e = this[i], n); return l.enter = function () { return a }, l.exit = function () { return c }, l }, V.datum = function (n) { return arguments.length ? this.property("__data__", n) : this.property("__data__") }, V.filter = function (n) { var t, e, r, i = []; "function" != typeof n && (n = nl(n)); for (var u = 0, o = this.length; u < o; u++) { i.push(t = []), t.parentNode = (e = this[u]).parentNode; for (var a = 0, l = e.length; a < l; a++)(r = e[a]) && n.call(r, r.__data__, a, u) && t.push(r) } return I(i) }, V.order = function () { for (var n = -1, t = this.length; ++n < t;)for (var e, r = this[n], i = r.length - 1, u = r[i]; --i >= 0;)(e = r[i]) && (u && u !== e.nextSibling && u.parentNode.insertBefore(e, u), u = e); return this }, V.sort = function (n) { n = nc.apply(this, arguments); for (var t = -1, e = this.length; ++t < e;)this[t].sort(n); return this.order() }, V.each = function (n) { return nf(this, function (t, e, r) { n.call(t, t.__data__, e, r) }) }, V.call = function (n) { var t = e(arguments); return n.apply(t[0] = this, t), this }, V.empty = function () { return !this.node() }, V.node = function () { for (var n = 0, t = this.length; n < t; n++)for (var e = this[n], r = 0, i = e.length; r < i; r++) { var u = e[r]; if (u) return u } return null }, V.size = function () { var n = 0; return nf(this, function () { ++n }), n }; var n$ = []; function nh(t, r, i) { var u = "__on" + t, o = t.indexOf("."), a = np; o > 0 && (t = t.slice(0, o)); var l = n_.get(t); function c() { var n = this[u]; n && (this.removeEventListener(t, n, n.$), delete this[u]) } return l && (t = l, a = ng), o ? r ? function n() { var o = a(r, e(arguments)); c.call(this), this.addEventListener(t, this[u] = o, o.$ = i), o._ = r } : c : r ? R : function e() { var r, i = RegExp("^__on([^.]+)" + n.requote(t) + "$"); for (var u in this) if (r = u.match(i)) { var o = this[u]; this.removeEventListener(r[1], o, o.$), delete this[u] } } } n.selection.enter = ns, n.selection.enter.prototype = n$, n$.append = V.append, n$.empty = V.empty, n$.node = V.node, n$.call = V.call, n$.size = V.size, n$.select = function (n) { for (var t, e, r, i, u, o = [], a = -1, l = this.length; ++a < l;) { r = (i = this[a]).update, o.push(t = []), t.parentNode = i.parentNode; for (var c = -1, f = i.length; ++c < f;)(u = i[c]) ? (t.push(r[c] = e = n.call(i.parentNode, u.__data__, c, a)), e.__data__ = u.__data__) : t.push(null) } return I(o) }, n$.insert = function (n, t) { var e, r, i; return arguments.length < 2 && (t = (e = this, function (n, t, u) { var o, a = e[u].update, l = a.length; for (u != i && (i = u, r = 0), t >= r && (r = t + 1); !(o = a[r]) && ++r < l;); return o })), V.insert.call(this, n, t) }, n.select = function (n) { var t; return "string" == typeof n ? (t = [O(n, r)]).parentNode = r.documentElement : (t = [n]).parentNode = i(n), I([t]) }, n.selectAll = function (n) { var t; return "string" == typeof n ? (t = e(Y(n, r))).parentNode = r.documentElement : (t = e(n)).parentNode = null, I([t]) }, V.on = function (n, t, e) { var r = arguments.length; if (r < 3) { if ("string" != typeof n) { for (e in r < 2 && (t = !1), n) this.each(nh(e, n[e], t)); return this } if (r < 2) return (r = this.node()["__on" + n]) && r._; e = !1 } return this.each(nh(n, t, e)) }; var n_ = n.map({ mouseenter: "mouseover", mouseleave: "mouseout" }); function np(t, e) { return function (r) { var i = n.event; n.event = r, e[0] = this.__data__; try { t.apply(this, e) } finally { n.event = i } } } function ng(n, t) { var e = np(n, t); return function (n) { var t = n.relatedTarget; t && (t === this || 8 & t.compareDocumentPosition(this)) || e.call(this, n) } } r && n_.forEach(function (n) { "on" + n in r && n_.remove(n) }); var nv, nd = 0; function ny(t) { var e = ".dragsuppress-" + ++nd, r = "click" + e, o = n.select(u(t)).on("touchmove" + e, U).on("dragstart" + e, U).on("selectstart" + e, U); if (null == nv && (nv = !("onselectstart" in t) && M(t.style, "userSelect")), nv) { var a = i(t).style, l = a[nv]; a[nv] = "none" } return function (n) { if (o.on(e, null), nv && (a[nv] = l), n) { var t = function () { o.on(r, null) }; o.on(r, function () { U(), t() }, !0), setTimeout(t, 0) } } } n.mouse = function (n) { return n0(n, j()) }; var nm = this.navigator && /WebKit/.test(this.navigator.userAgent) ? -1 : 0; function n0(t, e) { e.changedTouches && (e = e.changedTouches[0]); var r = t.ownerSVGElement || t; if (r.createSVGPoint) { var i = r.createSVGPoint(); if (nm < 0) { var o = u(t); if (o.scrollX || o.scrollY) { var a = (r = n.select("body").append("svg").style({ position: "absolute", top: 0, left: 0, margin: 0, padding: 0, border: "none" }, "important"))[0][0].getScreenCTM(); nm = !(a.f || a.e), r.remove() } } return nm ? (i.x = e.pageX, i.y = e.pageY) : (i.x = e.clientX, i.y = e.clientY), [(i = i.matrixTransform(t.getScreenCTM().inverse())).x, i.y] } var l = t.getBoundingClientRect(); return [e.clientX - l.left - t.clientLeft, e.clientY - l.top - t.clientTop] } function nx() { return n.event.changedTouches[0].identifier } n.touch = function (n, t, e) { if (arguments.length < 3 && (e = t, t = j().changedTouches), t) { for (var r, i = 0, u = t.length; i < u; ++i)if ((r = t[i]).identifier === e) return n0(n, r) } }, n.behavior.drag = function () { var t = D(o, "drag", "dragstart", "dragend"), e = null, r = a(R, n.mouse, u, "mousemove", "mouseup"), i = a(nx, n.touch, q, "touchmove", "touchend"); function o() { this.on("mousedown.drag", r).on("touchstart.drag", i) } function a(r, i, u, o, a) { return function () { var l, c = n.event.target.correspondingElement || n.event.target, f = this.parentNode, s = t.of(this, arguments), $ = 0, h = r(), _ = ".drag" + (null == h ? "" : "-" + h), p = n.select(u(c)).on(o + _, function n() { var t, e, r = i(f, h); r && ($ |= (t = r[0] - v[0]) | (e = r[1] - v[1]), v = r, s({ type: "drag", x: r[0] + l[0], y: r[1] + l[1], dx: t, dy: e })) }).on(a + _, function n() { i(f, h) && (p.on(o + _, null).on(a + _, null), g($), s({ type: "dragend" })) }), g = ny(c), v = i(f, h); e ? (l = e.apply(this, arguments), l = [l.x - v[0], l.y - v[1]]) : l = [0, 0], s({ type: "dragstart" }) } } return o.origin = function (n) { return arguments.length ? (e = n, o) : e }, n.rebind(o, t, "on") }, n.touches = function (n, t) { return arguments.length < 2 && (t = j().touches), t ? e(t).map(function (t) { var e = n0(n, t); return e.identifier = t.identifier, e }) : [] }; var n4 = 1e-6 * 1e-6, n3 = Math.PI, n1 = 2 * n3, n8 = n1 - 1e-6, nb = n3 / 2, nw = n3 / 180, n2 = 180 / n3; function n5(n) { return n > 0 ? 1 : n < 0 ? -1 : 0 } function n7(n, t, e) { return (t[0] - n[0]) * (e[1] - n[1]) - (t[1] - n[1]) * (e[0] - n[0]) } function n6(n) { return n > 1 ? 0 : n < -1 ? n3 : Math.acos(n) } function nk(n) { return n > 1 ? nb : n < -1 ? -nb : Math.asin(n) } function nS(n) { return ((n = Math.exp(n)) + 1 / n) / 2 } function nE(n) { return (n = Math.sin(n / 2)) * n } var nC = Math.SQRT2; n.interpolateZoom = function (n, t) { var e, r, i = n[0], u = n[1], o = n[2], a = t[0], l = t[1], c = t[2], f = a - i, s = l - u, $ = f * f + s * s; if ($ < n4) r = Math.log(c / o) / nC, e = function (n) { return [i + n * f, u + n * s, o * Math.exp(nC * n * r)] }; else { var h = Math.sqrt($), _ = (c * c - o * o + 4 * $) / (2 * o * 2 * h), p = (c * c - o * o - 4 * $) / (2 * c * 2 * h), g = Math.log(Math.sqrt(_ * _ + 1) - _); r = (Math.log(Math.sqrt(p * p + 1) - p) - g) / nC, e = function (n) { var t, e, a = n * r, l = nS(g), c = o / (2 * h) * (l * (((t = Math.exp(2 * (t = nC * a + g))) - 1) / (t + 1)) - ((e = Math.exp(e = g)) - 1 / e) / 2); return [i + c * f, u + c * s, o * l / nS(nC * a + g)] } } return e.duration = 1e3 * r, e }, n.behavior.zoom = function () { var t, e, i, o, a, l, c, f, s, $ = { x: 0, y: 0, k: 1 }, h = [960, 500], _ = nq, p = 250, g = 0, v = "mousedown.zoom", d = "mousemove.zoom", y = "mouseup.zoom", m = "touchstart.zoom", x = D(b, "zoomstart", "zoom", "zoomend"); function b(n) { n.on(v, z).on(nL + ".zoom", T).on("dblclick.zoom", R).on(m, M) } function w(n) { return [(n[0] - $.x) / $.k, (n[1] - $.y) / $.k] } function k(n) { $.k = Math.max(_[0], Math.min(_[1], n)) } function S(n, t) { var e; t = [(e = t)[0] * $.k + $.x, e[1] * $.k + $.y], $.x += n[0] - t[0], $.y += n[1] - t[1] } function E(t, r, i, u) { t.__chart__ = { x: $.x, y: $.y, k: $.k }, k(Math.pow(2, u)), S(e = r, i), t = n.select(t), p > 0 && (t = t.transition().duration(p)), t.call(b.event) } function C() { c && c.domain(l.range().map(function (n) { return (n - $.x) / $.k }).map(l.invert)), s && s.domain(f.range().map(function (n) { return (n - $.y) / $.k }).map(f.invert)) } function A(n) { g++ || n({ type: "zoomstart" }) } function L(n) { C(), n({ type: "zoom", scale: $.k, translate: [$.x, $.y] }) } function q(n) { --g || (n({ type: "zoomend" }), e = null) } function z() { var t = this, e = x.of(t, arguments), r = 0, i = n.select(u(t)).on(d, function i() { r = 1, S(n.mouse(t), o), L(e) }).on(y, function n() { i.on(d, null).on(y, null), a(r), q(e) }), o = w(n.mouse(t)), a = ny(t); or.call(t), A(e) } function M() { var t, e = this, r = x.of(e, arguments), i = {}, u = 0, o = ".zoom-" + n.event.changedTouches[0].identifier, l = "touchmove" + o, c = "touchend" + o, f = [], s = n.select(e), h = ny(e); function _() { var r = n.touches(e); return t = $.k, r.forEach(function (n) { n.identifier in i && (i[n.identifier] = w(n)) }), r } function p() { var t = n.event.target; n.select(t).on(l, g).on(c, d), f.push(t); for (var r = n.event.changedTouches, o = 0, s = r.length; o < s; ++o)i[r[o].identifier] = null; var h = _(), p = Date.now(); if (1 === h.length) { if (p - a < 500) { var v = h[0]; E(e, v, i[v.identifier], Math.floor(Math.log($.k) / Math.LN2) + 1), U() } a = p } else if (h.length > 1) { var v = h[0], y = h[1], m = v[0] - y[0], x = v[1] - y[1]; u = m * m + x * x } } function g() { var o, l, c, f, s = n.touches(e); or.call(e); for (var $ = 0, h = s.length; $ < h; ++$, f = null)if (f = i[(c = s[$]).identifier]) { if (l) break; o = c, l = f } if (f) { var _ = (_ = c[0] - o[0]) * _ + (_ = c[1] - o[1]) * _, p = u && Math.sqrt(_ / u); o = [(o[0] + c[0]) / 2, (o[1] + c[1]) / 2], l = [(l[0] + f[0]) / 2, (l[1] + f[1]) / 2], k(p * t) } a = null, S(o, l), L(r) } function d() { if (n.event.touches.length) { for (var t = n.event.changedTouches, e = 0, u = t.length; e < u; ++e)delete i[t[e].identifier]; for (var a in i) return void _() } n.selectAll(f).on(o, null), s.on(v, z).on(m, M), h(), q(r) } p(), A(r), s.on(v, null).on(m, p) } function T() { var r = x.of(this, arguments); o ? clearTimeout(o) : (or.call(this), t = w(e = i || n.mouse(this)), A(r)), o = setTimeout(function () { o = null, q(r) }, 50), U(), k(Math.pow(2, .002 * nA()) * $.k), S(e, t), L(r) } function R() { var t = n.mouse(this), e = Math.log($.k) / Math.LN2; E(this, t, w(t), n.event.shiftKey ? Math.ceil(e) - 1 : Math.floor(e) + 1) } return nL || (nL = "onwheel" in r ? (nA = function () { return -n.event.deltaY * (n.event.deltaMode ? 120 : 1) }, "wheel") : "onmousewheel" in r ? (nA = function () { return n.event.wheelDelta }, "mousewheel") : (nA = function () { return -n.event.detail }, "MozMousePixelScroll")), b.event = function (t) { t.each(function () { var t = x.of(this, arguments), r = $; oo ? n.select(this).transition().each("start.zoom", function () { $ = this.__chart__ || { x: 0, y: 0, k: 1 }, A(t) }).tween("zoom:zoom", function () { var i = h[0], u = h[1], o = e ? e[0] : i / 2, a = e ? e[1] : u / 2, l = n.interpolateZoom([(o - $.x) / $.k, (a - $.y) / $.k, i / $.k], [(o - r.x) / r.k, (a - r.y) / r.k, i / r.k]); return function (n) { var e = l(n), r = i / e[2]; this.__chart__ = $ = { x: o - e[0] * r, y: a - e[1] * r, k: r }, L(t) } }).each("interrupt.zoom", function () { q(t) }).each("end.zoom", function () { q(t) }) : (this.__chart__ = $, A(t), L(t), q(t)) }) }, b.translate = function (n) { return arguments.length ? ($ = { x: +n[0], y: +n[1], k: $.k }, C(), b) : [$.x, $.y] }, b.scale = function (n) { return arguments.length ? ($ = { x: $.x, y: $.y, k: null }, k(+n), C(), b) : $.k }, b.scaleExtent = function (n) { return arguments.length ? (_ = null == n ? nq : [+n[0], +n[1]], b) : _ }, b.center = function (n) { return arguments.length ? (i = n && [+n[0], +n[1]], b) : i }, b.size = function (n) { return arguments.length ? (h = n && [+n[0], +n[1]], b) : h }, b.duration = function (n) { return arguments.length ? (p = +n, b) : p }, b.x = function (n) { return arguments.length ? (c = n, l = n.copy(), $ = { x: 0, y: 0, k: 1 }, b) : c }, b.y = function (n) { return arguments.length ? (s = n, f = n.copy(), $ = { x: 0, y: 0, k: 1 }, b) : s }, n.rebind(b, x, "on") }; var nA, nL, nq = [0, 1 / 0]; function nz() { } function nM(n, t, e) { return this instanceof nM ? void (this.h = +n, this.s = +t, this.l = +e) : arguments.length < 2 ? n instanceof nM ? new nM(n.h, n.s, n.l) : nQ("" + n, nG, nM) : new nM(n, t, e) } n.color = nz, nz.prototype.toString = function () { return this.rgb() + "" }, n.hsl = nM; var nT = nM.prototype = new nz; function nR(n, t, e) { var r, i; function u(n) { var t; return Math.round(255 * (((t = n) > 360 ? t -= 360 : t < 0 && (t += 360), t < 60) ? r + (i - r) * t / 60 : t < 180 ? i : t < 240 ? r + (i - r) * (240 - t) / 60 : r)) } return n = isNaN(n) ? 0 : (n %= 360) < 0 ? n + 360 : n, t = isNaN(t) ? 0 : t < 0 ? 0 : t > 1 ? 1 : t, i = (e = e < 0 ? 0 : e > 1 ? 1 : e) <= .5 ? e * (1 + t) : e + t - e * t, r = 2 * e - i, new nV(u(n + 120), u(n), u(n - 120)) } function nN(t, e, r) { return this instanceof nN ? void (this.h = +t, this.c = +e, this.l = +r) : arguments.length < 2 ? t instanceof nN ? new nN(t.h, t.c, t.l) : t instanceof nj ? nI(t.l, t.a, t.b) : nI((t = nJ((t = n.rgb(t)).r, t.g, t.b)).l, t.a, t.b) : new nN(t, e, r) } nT.brighter = function (n) { return n = Math.pow(.7, arguments.length ? n : 1), new nM(this.h, this.s, this.l / n) }, nT.darker = function (n) { return n = Math.pow(.7, arguments.length ? n : 1), new nM(this.h, this.s, n * this.l) }, nT.rgb = function () { return nR(this.h, this.s, this.l) }, n.hcl = nN; var nP = nN.prototype = new nz; function nU(n, t, e) { return isNaN(n) && (n = 0), isNaN(t) && (t = 0), new nj(e, Math.cos(n *= nw) * t, Math.sin(n) * t) } function nj(n, t, e) { return this instanceof nj ? void (this.l = +n, this.a = +t, this.b = +e) : arguments.length < 2 ? n instanceof nj ? new nj(n.l, n.a, n.b) : n instanceof nN ? nU(n.h, n.c, n.l) : nJ((n = nV(n)).r, n.g, n.b) : new nj(n, t, e) } nP.brighter = function (n) { return new nN(this.h, this.c, Math.min(100, this.l + nD * (arguments.length ? n : 1))) }, nP.darker = function (n) { return new nN(this.h, this.c, Math.max(0, this.l - nD * (arguments.length ? n : 1))) }, nP.rgb = function () { return nU(this.h, this.c, this.l).rgb() }, n.lab = nj; var nD = 18, nH = nj.prototype = new nz; function nF(n, t, e) { var r = (n + 16) / 116, i = r + t / 500, u = r - e / 200; return i = .95047 * nO(i), r = 1 * nO(r), u = 1.08883 * nO(u), new nV(nZ(3.2404542 * i - 1.5371385 * r - .4985314 * u), nZ(-.969266 * i + 1.8760108 * r + .041556 * u), nZ(.0556434 * i - .2040259 * r + 1.0572252 * u)) } function nI(n, t, e) { return n > 0 ? new nN(Math.atan2(e, t) * n2, Math.sqrt(t * t + e * e), n) : new nN(NaN, NaN, n) } function nO(n) { return n > .206893034 ? n * n * n : (n - 4 / 29) / 7.787037 } function nY(n) { return n > .008856 ? Math.pow(n, 1 / 3) : 7.787037 * n + 4 / 29 } function nZ(n) { return Math.round(255 * (n <= .00304 ? 12.92 * n : 1.055 * Math.pow(n, 1 / 2.4) - .055)) } function nV(n, t, e) { return this instanceof nV ? void (this.r = ~~n, this.g = ~~t, this.b = ~~e) : arguments.length < 2 ? n instanceof nV ? new nV(n.r, n.g, n.b) : nQ("" + n, nV, nR) : new nV(n, t, e) } function n9(n) { return new nV(n >> 16, n >> 8 & 255, 255 & n) } function nX(n) { return n9(n) + "" } nH.brighter = function (n) { return new nj(Math.min(100, this.l + nD * (arguments.length ? n : 1)), this.a, this.b) }, nH.darker = function (n) { return new nj(Math.max(0, this.l - nD * (arguments.length ? n : 1)), this.a, this.b) }, nH.rgb = function () { return nF(this.l, this.a, this.b) }, n.rgb = nV; var nB = nV.prototype = new nz; function nW(n) { return n < 16 ? "0" + Math.max(0, n).toString(16) : Math.min(255, n).toString(16) } function nQ(n, t, e) { var r, i, u, o = 0, a = 0, l = 0; if (r = /([a-z]+)\((.*)\)/.exec(n = n.toLowerCase())) switch (i = r[2].split(","), r[1]) { case "hsl": return e(parseFloat(i[0]), parseFloat(i[1]) / 100, parseFloat(i[2]) / 100); case "rgb": return t(tn(i[0]), tn(i[1]), tn(i[2])) }return (u = tt.get(n)) ? t(u.r, u.g, u.b) : (null == n || "#" !== n.charAt(0) || isNaN(u = parseInt(n.slice(1), 16)) || (4 === n.length ? (o = (o = (3840 & u) >> 4) >> 4 | o, a = (a = 240 & u) >> 4 | a, l = (l = 15 & u) << 4 | l) : 7 !== n.length || (o = (16711680 & u) >> 16, a = (65280 & u) >> 8, l = 255 & u)), t(o, a, l)) } function nG(n, t, e) { var r, i, u = Math.min(n /= 255, t /= 255, e /= 255), o = Math.max(n, t, e), a = o - u, l = (o + u) / 2; return a ? (i = l < .5 ? a / (o + u) : a / (2 - o - u), r = n == o ? (t - e) / a + (t < e ? 6 : 0) : t == o ? (e - n) / a + 2 : (n - t) / a + 4, r *= 60) : (r = NaN, i = l > 0 && l < 1 ? 0 : r), new nM(r, i, l) } function nJ(n, t, e) { n = nK(n), t = nK(t); var r = nY((.4124564 * n + .3575761 * t + .1804375 * (e = nK(e))) / .95047), i = nY((.2126729 * n + .7151522 * t + .072175 * e) / 1), u = nY((.0193339 * n + .119192 * t + .9503041 * e) / 1.08883); return nj(116 * i - 16, 500 * (r - i), 200 * (i - u)) } function nK(n) { return (n /= 255) <= .04045 ? n / 12.92 : Math.pow((n + .055) / 1.055, 2.4) } function tn(n) { var t = parseFloat(n); return "%" === n.charAt(n.length - 1) ? Math.round(2.55 * t) : t } nB.brighter = function (n) { n = Math.pow(.7, arguments.length ? n : 1); var t = this.r, e = this.g, r = this.b; return t || e || r ? (t && t < 30 && (t = 30), e && e < 30 && (e = 30), r && r < 30 && (r = 30), new nV(Math.min(255, t / n), Math.min(255, e / n), Math.min(255, r / n))) : new nV(30, 30, 30) }, nB.darker = function (n) { return n = Math.pow(.7, arguments.length ? n : 1), new nV(n * this.r, n * this.g, n * this.b) }, nB.hsl = function () { return nG(this.r, this.g, this.b) }, nB.toString = function () { return "#" + nW(this.r) + nW(this.g) + nW(this.b) }; var tt = n.map({ aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }); function te(n) { return "function" == typeof n ? n : function () { return n } } function tr(n) { return function (t, e, r) { return 2 === arguments.length && "function" == typeof e && (r = e, e = null), ti(t, e, n, r) } } function ti(t, r, i, u) { var o, a = {}, l = n.dispatch("beforesend", "progress", "load", "error"), c = {}, f = new XMLHttpRequest, s = null; function $() { var n, t, e, r = f.status; if (!r && (t = f, e = t.responseType, e && "text" !== e ? t.response : t.responseText) || r >= 200 && r < 300 || 304 === r) { try { n = i.call(a, f) } catch (u) { l.error.call(a, u); return } l.load.call(a, n) } else l.error.call(a, f) } return this.XDomainRequest && !("withCredentials" in f) && /^(http(s)?:)?\/\//.test(t) && (f = new XDomainRequest), "onload" in f ? f.onload = f.onerror = $ : f.onreadystatechange = function () { f.readyState > 3 && $() }, f.onprogress = function (t) { var e = n.event; n.event = t; try { l.progress.call(a, f) } finally { n.event = e } }, a.header = function (n, t) { return (n = (n + "").toLowerCase(), arguments.length < 2) ? c[n] : (null == t ? delete c[n] : c[n] = t + "", a) }, a.mimeType = function (n) { return arguments.length ? (r = null == n ? null : n + "", a) : r }, a.responseType = function (n) { return arguments.length ? (s = n, a) : s }, a.response = function (n) { return i = n, a }, ["get", "post"].forEach(function (n) { a[n] = function () { return a.send.apply(a, [n].concat(e(arguments))) } }), a.send = function (n, e, i) { if (2 === arguments.length && "function" == typeof e && (i = e, e = null), f.open(n, t, !0), null == r || "accept" in c || (c.accept = r + ",*/*"), f.setRequestHeader) for (var u in c) f.setRequestHeader(u, c[u]); return null != r && f.overrideMimeType && f.overrideMimeType(r), null != s && (f.responseType = s), null != i && a.on("error", i).on("load", function (n) { i(null, n) }), l.beforesend.call(a, f), f.send(null == e ? null : e), a }, a.abort = function () { return f.abort(), a }, n.rebind(a, l, "on"), null == u ? a : a.get((o = u, 1 === o.length ? function (n, t) { o(null == n ? t : null) } : o)) } tt.forEach(function (n, t) { tt.set(n, n9(t)) }), n.functor = te, n.xhr = tr(q), n.dsv = function (n, t) { var e = RegExp('["' + n + "\n]"), r = n.charCodeAt(0); function i(n, e, r) { arguments.length < 3 && (r = e, e = null); var i = ti(n, t, null == e ? u : o(e), r); return i.row = function (n) { return arguments.length ? i.response(null == (e = n) ? u : o(n)) : e }, i } function u(n) { return i.parse(n.responseText) } function o(n) { return function (t) { return i.parse(t.responseText, n) } } function a(t) { return t.map(l).join(n) } function l(n) { return e.test(n) ? '"' + n.replace(/\"/g, '""') + '"' : n } return i.parse = function (n, t) { var e; return i.parseRows(n, function (n, r) { if (e) return e(n, r - 1); var i = Function("d", "return {" + n.map(function (n, t) { return JSON.stringify(n) + ": d[" + t + "]" }).join(",") + "}"); e = t ? function (n, e) { return t(i(n), e) } : i }) }, i.parseRows = function (n, t) { var e, i, u = {}, o = {}, a = [], l = n.length, c = 0, f = 0; function s() { if (c >= l) return o; if (i) return i = !1, u; var t = c; if (34 === n.charCodeAt(t)) { for (var e = t; e++ < l;)if (34 === n.charCodeAt(e)) { if (34 !== n.charCodeAt(e + 1)) break; ++e } c = e + 2; var a = n.charCodeAt(e + 1); return 13 === a ? (i = !0, 10 === n.charCodeAt(e + 2) && ++c) : 10 === a && (i = !0), n.slice(t + 1, e).replace(/""/g, '"') } for (; c < l;) { var a = n.charCodeAt(c++), f = 1; if (10 === a) i = !0; else if (13 === a) i = !0, 10 === n.charCodeAt(c) && (++c, ++f); else if (a !== r) continue; return n.slice(t, c - f) } return n.slice(t) } for (; (e = s()) !== o;) { for (var $ = []; e !== u && e !== o;)$.push(e), e = s(); (!t || null != ($ = t($, f++))) && a.push($) } return a }, i.format = function (t) { if (Array.isArray(t[0])) return i.formatRows(t); var e = new L, r = []; return t.forEach(function (n) { for (var t in n) e.has(t) || r.push(e.add(t)) }), [r.map(l).join(n)].concat(t.map(function (t) { return r.map(function (n) { return l(t[n]) }).join(n) })).join("\n") }, i.formatRows = function (n) { return n.map(a).join("\n") }, i }, n.csv = n.dsv(",", "text/csv"), n.tsv = n.dsv("	", "text/tab-separated-values"); var tu, to, ta, tl, tc = this[M(this, "requestAnimationFrame")] || function (n) { setTimeout(n, 17) }; function tf(n, t, e) { var r = arguments.length; r < 2 && (t = 0), r < 3 && (e = Date.now()); var i = { c: n, t: e + t, n: null }; return to ? to.n = i : tu = i, to = i, ta || (tl = clearTimeout(tl), ta = 1, tc(ts)), i } function ts() { var n = t$(), t = th() - n; t > 24 ? (isFinite(t) && (clearTimeout(tl), tl = setTimeout(ts, t)), ta = 0) : (ta = 1, tc(ts)) } function t$() { for (var n = Date.now(), t = tu; t;)n >= t.t && t.c(n - t.t) && (t.c = null), t = t.n; return n } function th() { for (var n, t = tu, e = 1 / 0; t;)t.c ? (t.t < e && (e = t.t), t = (n = t).n) : t = n ? n.n = t.n : tu = t.n; return to = n, e } function t_(n, t) { return t - (n ? Math.ceil(Math.log(n) / Math.LN10) : 1) } n.timer = function () { tf.apply(this, arguments) }, n.timer.flush = function () { t$(), th() }, n.round = function (n, t) { return t ? Math.round(n * (t = Math.pow(10, t))) / t : Math.round(n) }; var tp = ["y", "z", "a", "f", "p", "n", "\xb5", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"].map(function n(t, e) { var r = Math.pow(10, 3 * y(8 - e)); return { scale: e > 8 ? function (n) { return n / r } : function (n) { return n * r }, symbol: t } }); n.formatPrefix = function (t, e) { var r = 0; return (t = +t) && (t < 0 && (t *= -1), e && (t = n.round(t, t_(t, e))), r = Math.max(-24, Math.min(24, 3 * Math.floor(((r = 1 + Math.floor(1e-12 + Math.log(t) / Math.LN10)) - 1) / 3)))), tp[8 + r / 3] }; var tg = /(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i, tv = n.map({ b: function (n) { return n.toString(2) }, c: function (n) { return String.fromCharCode(n) }, o: function (n) { return n.toString(8) }, x: function (n) { return n.toString(16) }, X: function (n) { return n.toString(16).toUpperCase() }, g: function (n, t) { return n.toPrecision(t) }, e: function (n, t) { return n.toExponential(t) }, f: function (n, t) { return n.toFixed(t) }, r: function (t, e) { return (t = n.round(t, t_(t, e))).toFixed(Math.max(0, Math.min(20, t_(t * (1 + 1e-15), e)))) } }); function td(n) { return n + "" } var ty = n.time = {}, tm = Date; function t0() { this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0]) } t0.prototype = { getDate: function () { return this._.getUTCDate() }, getDay: function () { return this._.getUTCDay() }, getFullYear: function () { return this._.getUTCFullYear() }, getHours: function () { return this._.getUTCHours() }, getMilliseconds: function () { return this._.getUTCMilliseconds() }, getMinutes: function () { return this._.getUTCMinutes() }, getMonth: function () { return this._.getUTCMonth() }, getSeconds: function () { return this._.getUTCSeconds() }, getTime: function () { return this._.getTime() }, getTimezoneOffset: function () { return 0 }, valueOf: function () { return this._.valueOf() }, setDate: function () { tx.setUTCDate.apply(this._, arguments) }, setDay: function () { tx.setUTCDay.apply(this._, arguments) }, setFullYear: function () { tx.setUTCFullYear.apply(this._, arguments) }, setHours: function () { tx.setUTCHours.apply(this._, arguments) }, setMilliseconds: function () { tx.setUTCMilliseconds.apply(this._, arguments) }, setMinutes: function () { tx.setUTCMinutes.apply(this._, arguments) }, setMonth: function () { tx.setUTCMonth.apply(this._, arguments) }, setSeconds: function () { tx.setUTCSeconds.apply(this._, arguments) }, setTime: function () { tx.setTime.apply(this._, arguments) } }; var tx = Date.prototype; function t4(n, t, e) { function r(t) { var e = n(t), r = u(e, 1); return t - e < r - t ? e : r } function i(e) { return t(e = n(new tm(e - 1)), 1), e } function u(n, e) { return t(n = new tm(+n), e), n } function o(n, r, u) { var o = i(n), a = []; if (u > 1) for (; o < r;)e(o) % u || a.push(new Date(+o)), t(o, 1); else for (; o < r;)a.push(new Date(+o)), t(o, 1); return a } n.floor = n, n.round = r, n.ceil = i, n.offset = u, n.range = o; var a = n.utc = t3(n); return a.floor = a, a.round = t3(r), a.ceil = t3(i), a.offset = t3(u), a.range = function n(t, e, r) { try { tm = t0; var i = new t0; return i._ = t, o(i, e, r) } finally { tm = Date } }, n } function t3(n) { return function (t, e) { try { tm = t0; var r = new t0; return r._ = t, n(r, e)._ } finally { tm = Date } } } ty.year = t4(function (n) { return (n = ty.day(n)).setMonth(0, 1), n }, function (n, t) { n.setFullYear(n.getFullYear() + t) }, function (n) { return n.getFullYear() }), ty.years = ty.year.range, ty.years.utc = ty.year.utc.range, ty.day = t4(function (n) { var t = new tm(2e3, 0); return t.setFullYear(n.getFullYear(), n.getMonth(), n.getDate()), t }, function (n, t) { n.setDate(n.getDate() + t) }, function (n) { return n.getDate() - 1 }), ty.days = ty.day.range, ty.days.utc = ty.day.utc.range, ty.dayOfYear = function (n) { var t = ty.year(n); return Math.floor((n - t - (n.getTimezoneOffset() - t.getTimezoneOffset()) * 6e4) / 864e5) }, ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"].forEach(function (n, t) { t = 7 - t; var e = ty[n] = t4(function (n) { return (n = ty.day(n)).setDate(n.getDate() - (n.getDay() + t) % 7), n }, function (n, t) { n.setDate(n.getDate() + 7 * Math.floor(t)) }, function (n) { var e = ty.year(n).getDay(); return Math.floor((ty.dayOfYear(n) + (e + t) % 7) / 7) - (e !== t) }); ty[n + "s"] = e.range, ty[n + "s"].utc = e.utc.range, ty[n + "OfYear"] = function (n) { var e = ty.year(n).getDay(); return Math.floor((ty.dayOfYear(n) + (e + t) % 7) / 7) } }), ty.week = ty.sunday, ty.weeks = ty.sunday.range, ty.weeks.utc = ty.sunday.utc.range, ty.weekOfYear = ty.sundayOfYear; var t1 = { "-": "", _: " ", 0: "0" }, t8 = /^\s*\d+/, tb = /^%/; function tw(n, t, e) { var r = n < 0 ? "-" : "", i = (r ? -n : n) + "", u = i.length; return r + (u < e ? Array(e - u + 1).join(t) + i : i) } function t2(t) { return RegExp("^(?:" + t.map(n.requote).join("|") + ")", "i") } function t5(n) { for (var t = new x, e = -1, r = n.length; ++e < r;)t.set(n[e].toLowerCase(), e); return t } function t7(n, t, e) { t8.lastIndex = 0; var r = t8.exec(t.slice(e, e + 1)); return r ? (n.w = +r[0], e + r[0].length) : -1 } function t6(n, t, e) { t8.lastIndex = 0; var r = t8.exec(t.slice(e)); return r ? (n.U = +r[0], e + r[0].length) : -1 } function tk(n, t, e) { t8.lastIndex = 0; var r = t8.exec(t.slice(e)); return r ? (n.W = +r[0], e + r[0].length) : -1 } function tS(n, t, e) { t8.lastIndex = 0; var r = t8.exec(t.slice(e, e + 4)); return r ? (n.y = +r[0], e + r[0].length) : -1 } function tE(n, t, e) { t8.lastIndex = 0; var r, i = t8.exec(t.slice(e, e + 2)); return i ? (n.y = (r = +i[0], r + (r > 68 ? 1900 : 2e3)), e + i[0].length) : -1 } function tC(n, t, e) { return /^[+-]\d{4}$/.test(t = t.slice(e, e + 5)) ? (n.Z = -t, e + 5) : -1 } function tA(n, t, e) { t8.lastIndex = 0; var r = t8.exec(t.slice(e, e + 2)); return r ? (n.m = r[0] - 1, e + r[0].length) : -1 } function tL(n, t, e) { t8.lastIndex = 0; var r = t8.exec(t.slice(e, e + 2)); return r ? (n.d = +r[0], e + r[0].length) : -1 } function tq(n, t, e) { t8.lastIndex = 0; var r = t8.exec(t.slice(e, e + 3)); return r ? (n.j = +r[0], e + r[0].length) : -1 } function tz(n, t, e) { t8.lastIndex = 0; var r = t8.exec(t.slice(e, e + 2)); return r ? (n.H = +r[0], e + r[0].length) : -1 } function tM(n, t, e) { t8.lastIndex = 0; var r = t8.exec(t.slice(e, e + 2)); return r ? (n.M = +r[0], e + r[0].length) : -1 } function tT(n, t, e) { t8.lastIndex = 0; var r = t8.exec(t.slice(e, e + 2)); return r ? (n.S = +r[0], e + r[0].length) : -1 } function tR(n, t, e) { t8.lastIndex = 0; var r = t8.exec(t.slice(e, e + 3)); return r ? (n.L = +r[0], e + r[0].length) : -1 } function tN(n) { var t = n.getTimezoneOffset(), e = y(t) / 60 | 0, r = y(t) % 60; return (t > 0 ? "-" : "+") + tw(e, "0", 2) + tw(r, "0", 2) } function tP(n, t, e) { tb.lastIndex = 0; var r = tb.exec(t.slice(e, e + 1)); return r ? e + r[0].length : -1 } function tU(n) { for (var t = n.length, e = -1; ++e < t;)n[e][0] = this(n[e][0]); return function (t) { for (var e = 0, r = n[e]; !r[1](t);)r = n[++e]; return r[0](t) } } n.locale = function (t) { var e, r, i, u, o, a; return { numberFormat: (r = (e = t).decimal, i = e.thousands, u = e.grouping, o = e.currency, a = u && i ? function (n, t) { for (var e = n.length, r = [], o = 0, a = u[0], l = 0; e > 0 && a > 0 && (l + a + 1 > t && (a = Math.max(1, t - l)), r.push(n.substring(e -= a, e + a)), !((l += a + 1) > t));)a = u[o = (o + 1) % u.length]; return r.reverse().join(i) } : q, function (t) { var e = tg.exec(t), i = e[1] || " ", u = e[2] || ">", l = e[3] || "-", c = e[4] || "", f = e[5], s = +e[6], $ = e[7], h = e[8], _ = e[9], p = 1, g = "", v = "", d = !1, y = !0; switch (h && (h = +h.substring(1)), (f || "0" === i && "=" === u) && (f = i = "0", u = "="), _) { case "n": $ = !0, _ = "g"; break; case "%": p = 100, v = "%", _ = "f"; break; case "p": p = 100, v = "%", _ = "r"; break; case "b": case "o": case "x": case "X": "#" === c && (g = "0" + _.toLowerCase()); case "c": y = !1; case "d": d = !0, h = 0; break; case "s": p = -1, _ = "r" }"$" === c && (g = o[0], v = o[1]), "r" != _ || h || (_ = "g"), null != h && ("g" == _ ? h = Math.max(1, Math.min(21, h)) : ("e" == _ || "f" == _) && (h = Math.max(0, Math.min(20, h)))), _ = tv.get(_) || td; var m = f && $; return function (t) { var e = v; if (d && t % 1) return ""; var o = t < 0 || 0 === t && 1 / t < 0 ? (t = -t, "-") : "-" === l ? "" : l; if (p < 0) { var c = n.formatPrefix(t, h); t = c.scale(t), e = c.symbol + v } else t *= p; var x, b, w = (t = _(t, h)).lastIndexOf("."); if (w < 0) { var k = y ? t.lastIndexOf("e") : -1; k < 0 ? (x = t, b = "") : (x = t.substring(0, k), b = t.substring(k)) } else x = t.substring(0, w), b = r + t.substring(w + 1); !f && $ && (x = a(x, 1 / 0)); var S = g.length + x.length + b.length + (m ? 0 : o.length), E = S < s ? Array(S = s - S + 1).join(i) : ""; return m && (x = a(E + x, E.length ? s - b.length : 1 / 0)), o += g, t = x + b, ("<" === u ? o + t + E : ">" === u ? E + o + t : "^" === u ? E.substring(0, S >>= 1) + o + t + E.substring(S) : o + (m ? t : E + t)) + e } }), timeFormat: function t(e) { var r = e.dateTime, i = e.date, u = e.time, o = e.periods, a = e.days, l = e.shortDays, c = e.months, f = e.shortMonths; function s(n) { var t = n.length; function e(e) { for (var r, i, u, o = [], a = -1, l = 0; ++a < t;)37 === n.charCodeAt(a) && (o.push(n.slice(l, a)), null != (i = t1[r = n.charAt(++a)]) && (r = n.charAt(++a)), (u = b[r]) && (r = u(e, null == i ? "e" === r ? " " : "0" : i)), o.push(r), l = a + 1); return o.push(n.slice(l, a)), o.join("") } return e.parse = function (t) { var e = { y: 1900, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0, Z: null }; if ($(e, n, t, 0) != t.length) return null; "p" in e && (e.H = e.H % 12 + 12 * e.p); var r = null != e.Z && tm !== t0, i = new (r ? t0 : tm); return "j" in e ? i.setFullYear(e.y, 0, e.j) : "W" in e || "U" in e ? ("w" in e || (e.w = "W" in e ? 1 : 0), i.setFullYear(e.y, 0, 1), i.setFullYear(e.y, 0, "W" in e ? (e.w + 6) % 7 + 7 * e.W - (i.getDay() + 5) % 7 : e.w + 7 * e.U - (i.getDay() + 6) % 7)) : i.setFullYear(e.y, e.m, e.d), i.setHours(e.H + (e.Z / 100 | 0), e.M + e.Z % 100, e.S, e.L), r ? i._ : i }, e.toString = function () { return n }, e } function $(n, t, e, r) { for (var i, u, o, a = 0, l = t.length, c = e.length; a < l;) { if (r >= c) return -1; if (37 === (i = t.charCodeAt(a++))) { if (!(u = w[(o = t.charAt(a++)) in t1 ? t.charAt(a++) : o]) || (r = u(n, e, r)) < 0) return -1 } else if (i != e.charCodeAt(r++)) return -1 } return r } s.utc = function (n) { var t = s(n); function e(n) { try { var e = new (tm = t0); return e._ = n, t(e) } finally { tm = Date } } return e.parse = function (n) { try { tm = t0; var e = t.parse(n); return e && e._ } finally { tm = Date } }, e.toString = t.toString, e }, s.multi = s.utc.multi = tU; var h = n.map(), _ = t2(a), p = t5(a), g = t2(l), v = t5(l), d = t2(c), y = t5(c), m = t2(f), x = t5(f); o.forEach(function (n, t) { h.set(n.toLowerCase(), t) }); var b = { a: function (n) { return l[n.getDay()] }, A: function (n) { return a[n.getDay()] }, b: function (n) { return f[n.getMonth()] }, B: function (n) { return c[n.getMonth()] }, c: s(r), d: function (n, t) { return tw(n.getDate(), t, 2) }, e: function (n, t) { return tw(n.getDate(), t, 2) }, H: function (n, t) { return tw(n.getHours(), t, 2) }, I: function (n, t) { return tw(n.getHours() % 12 || 12, t, 2) }, j: function (n, t) { return tw(1 + ty.dayOfYear(n), t, 3) }, L: function (n, t) { return tw(n.getMilliseconds(), t, 3) }, m: function (n, t) { return tw(n.getMonth() + 1, t, 2) }, M: function (n, t) { return tw(n.getMinutes(), t, 2) }, p: function (n) { return o[+(n.getHours() >= 12)] }, S: function (n, t) { return tw(n.getSeconds(), t, 2) }, U: function (n, t) { return tw(ty.sundayOfYear(n), t, 2) }, w: function (n) { return n.getDay() }, W: function (n, t) { return tw(ty.mondayOfYear(n), t, 2) }, x: s(i), X: s(u), y: function (n, t) { return tw(n.getFullYear() % 100, t, 2) }, Y: function (n, t) { return tw(n.getFullYear() % 1e4, t, 4) }, Z: tN, "%": function () { return "%" } }, w = { a: function n(t, e, r) { g.lastIndex = 0; var i = g.exec(e.slice(r)); return i ? (t.w = v.get(i[0].toLowerCase()), r + i[0].length) : -1 }, A: function n(t, e, r) { _.lastIndex = 0; var i = _.exec(e.slice(r)); return i ? (t.w = p.get(i[0].toLowerCase()), r + i[0].length) : -1 }, b: function n(t, e, r) { m.lastIndex = 0; var i = m.exec(e.slice(r)); return i ? (t.m = x.get(i[0].toLowerCase()), r + i[0].length) : -1 }, B: function n(t, e, r) { d.lastIndex = 0; var i = d.exec(e.slice(r)); return i ? (t.m = y.get(i[0].toLowerCase()), r + i[0].length) : -1 }, c: function n(t, e, r) { return $(t, b.c.toString(), e, r) }, d: tL, e: tL, H: tz, I: tz, j: tq, L: tR, m: tA, M: tM, p: function n(t, e, r) { var i = h.get(e.slice(r, r += 2).toLowerCase()); return null == i ? -1 : (t.p = i, r) }, S: tT, U: t6, w: t7, W: tk, x: function n(t, e, r) { return $(t, b.x.toString(), e, r) }, X: function n(t, e, r) { return $(t, b.X.toString(), e, r) }, y: tE, Y: tS, Z: tC, "%": tP }; return s }(t) } }; var tj = n.locale({ decimal: ".", thousands: ",", grouping: [3], currency: ["$", ""], dateTime: "%a %b %e %X %Y", date: "%m/%d/%Y", time: "%H:%M:%S", periods: ["AM", "PM"], days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"] }); function tD() { } n.format = tj.numberFormat, n.geo = {}, tD.prototype = { s: 0, t: 0, add: function (n) { tF(n, this.t, tH), tF(tH.s, this.s, this), this.s ? this.t += tH.t : this.s = tH.t }, reset: function () { this.s = this.t = 0 }, valueOf: function () { return this.s } }; var tH = new tD; function tF(n, t, e) { var r = e.s = n + t, i = r - n; e.t = n - (r - i) + (t - i) } function tI(n, t) { n && tY.hasOwnProperty(n.type) && tY[n.type](n, t) } n.geo.stream = function (n, t) { n && tO.hasOwnProperty(n.type) ? tO[n.type](n, t) : tI(n, t) }; var tO = { Feature: function (n, t) { tI(n.geometry, t) }, FeatureCollection: function (n, t) { for (var e = n.features, r = -1, i = e.length; ++r < i;)tI(e[r].geometry, t) } }, tY = { Sphere: function (n, t) { t.sphere() }, Point: function (n, t) { n = n.coordinates, t.point(n[0], n[1], n[2]) }, MultiPoint: function (n, t) { for (var e = n.coordinates, r = -1, i = e.length; ++r < i;)n = e[r], t.point(n[0], n[1], n[2]) }, LineString: function (n, t) { tZ(n.coordinates, t, 0) }, MultiLineString: function (n, t) { for (var e = n.coordinates, r = -1, i = e.length; ++r < i;)tZ(e[r], t, 0) }, Polygon: function (n, t) { tV(n.coordinates, t) }, MultiPolygon: function (n, t) { for (var e = n.coordinates, r = -1, i = e.length; ++r < i;)tV(e[r], t) }, GeometryCollection: function (n, t) { for (var e = n.geometries, r = -1, i = e.length; ++r < i;)tI(e[r], t) } }; function tZ(n, t, e) { var r, i = -1, u = n.length - e; for (t.lineStart(); ++i < u;)r = n[i], t.point(r[0], r[1], r[2]); t.lineEnd() } function tV(n, t) { var e = -1, r = n.length; for (t.polygonStart(); ++e < r;)tZ(n[e], t, 1); t.polygonEnd() } n.geo.area = function (t) { return t9 = 0, n.geo.stream(t, tB), t9 }; var t9, tX = new tD, tB = { sphere: function () { t9 += 4 * n3 }, point: R, lineStart: R, lineEnd: R, polygonStart: function () { tX.reset(), tB.lineStart = tW }, polygonEnd: function () { var n = 2 * tX; t9 += n < 0 ? 4 * n3 + n : n, tB.lineStart = tB.lineEnd = tB.point = R } }; function tW() { var n, t, e, r, i; function u(n, t) { var u = (n *= nw) - e, o = u >= 0 ? 1 : -1, a = o * u, l = Math.cos(t = t * nw / 2 + n3 / 4), c = Math.sin(t), f = i * c, s = r * l + f * Math.cos(a); tX.add(Math.atan2(f * o * Math.sin(a), s)), e = n, r = l, i = c } tB.point = function (o, a) { tB.point = u, e = (n = o) * nw, r = Math.cos(a = (t = a) * nw / 2 + n3 / 4), i = Math.sin(a) }, tB.lineEnd = function () { u(n, t) } } function tQ(n) { var t = n[0], e = n[1], r = Math.cos(e); return [r * Math.cos(t), r * Math.sin(t), Math.sin(e)] } function tG(n, t) { return n[0] * t[0] + n[1] * t[1] + n[2] * t[2] } function tJ(n, t) { return [n[1] * t[2] - n[2] * t[1], n[2] * t[0] - n[0] * t[2], n[0] * t[1] - n[1] * t[0]] } function tK(n, t) { n[0] += t[0], n[1] += t[1], n[2] += t[2] } function en(n, t) { return [n[0] * t, n[1] * t, n[2] * t] } function et(n) { var t = Math.sqrt(n[0] * n[0] + n[1] * n[1] + n[2] * n[2]); n[0] /= t, n[1] /= t, n[2] /= t } function ee(n) { return [Math.atan2(n[1], n[0]), nk(n[2])] } function er(n, t) { return 1e-6 > y(n[0] - t[0]) && 1e-6 > y(n[1] - t[1]) } n.geo.bounds = function () { var t, e, r, i, u, o, a, l, c, f, s, $ = { point: h, lineStart: p, lineEnd: g, polygonStart: function () { $.point = v, $.lineStart = d, $.lineEnd = m, c = 0, tB.polygonStart() }, polygonEnd: function () { tB.polygonEnd(), $.point = h, $.lineStart = p, $.lineEnd = g, tX < 0 ? (t = -(r = 180), e = -(i = 90)) : c > 1e-6 ? i = 90 : c < -.000001 && (e = -90), s[0] = t, s[1] = r } }; function h(n, u) { f.push(s = [t = n, r = n]), u < e && (e = u), u > i && (i = u) } function _(n, o) { var a = tQ([n * nw, o * nw]); if (l) { var c = tJ(l, a), f = tJ([c[1], -c[0], 0], c); et(f); var s = n - u, $ = s > 0 ? 1 : -1, _ = (f = ee(f))[0] * n2 * $, p = y(s) > 180; if (p ^ ($ * u < _ && _ < $ * n)) { var g = f[1] * n2; g > i && (i = g) } else if (p ^ ($ * u < (_ = (_ + 360) % 360 - 180) && _ < $ * n)) { var g = -f[1] * n2; g < e && (e = g) } else o < e && (e = o), o > i && (i = o); p ? n < u ? x(t, n) > x(t, r) && (r = n) : x(n, r) > x(t, r) && (t = n) : r >= t ? (n < t && (t = n), n > r && (r = n)) : n > u ? x(t, n) > x(t, r) && (r = n) : x(n, r) > x(t, r) && (t = n) } else h(n, o); l = a, u = n } function p() { $.point = _ } function g() { s[0] = t, s[1] = r, $.point = h, l = null } function v(n, t) { if (l) { var e = n - u; c += y(e) > 180 ? e + (e > 0 ? 360 : -360) : e } else o = n, a = t; tB.point(n, t), _(n, t) } function d() { tB.lineStart() } function m() { v(o, a), tB.lineEnd(), y(c) > 1e-6 && (t = -(r = 180)), s[0] = t, s[1] = r, l = null } function x(n, t) { return (t -= n) < 0 ? t + 360 : t } function b(n, t) { return n[0] - t[0] } function w(n, t) { return t[0] <= t[1] ? t[0] <= n && n <= t[1] : n < t[0] || t[1] < n } return function (u) { i = r = -(t = e = 1 / 0), f = [], n.geo.stream(u, $); var o = f.length; if (o) { f.sort(b); for (var a, l = 1, c = f[0], h = [c]; l < o; ++l)w((a = f[l])[0], c) || w(a[1], c) ? (x(c[0], a[1]) > x(c[0], c[1]) && (c[1] = a[1]), x(a[0], c[1]) > x(c[0], c[1]) && (c[0] = a[0])) : h.push(c = a); for (var _, a, p = -1 / 0, o = h.length - 1, l = 0, c = h[o]; l <= o; c = a, ++l)a = h[l], (_ = x(c[1], a[0])) > p && (p = _, t = a[0], r = c[1]) } return f = s = null, t === 1 / 0 || e === 1 / 0 ? [[NaN, NaN], [NaN, NaN]] : [[t, e], [r, i]] } }(), n.geo.centroid = function (t) { e3 = e1 = e8 = eb = ew = e2 = e5 = e7 = e6 = ek = eS = 0, n.geo.stream(t, ei); var e = e6, r = ek, i = eS, u = e * e + r * r + i * i; return u < n4 && (e = e2, r = e5, i = e7, e1 < 1e-6 && (e = e8, r = eb, i = ew), (u = e * e + r * r + i * i) < n4) ? [NaN, NaN] : [Math.atan2(r, e) * n2, nk(i / Math.sqrt(u)) * n2] }; var ei = { sphere: R, point: eu, lineStart: ea, lineEnd: el, polygonStart: function () { ei.lineStart = ec }, polygonEnd: function () { ei.lineStart = ea } }; function eu(n, t) { n *= nw; var e = Math.cos(t *= nw); eo(e * Math.cos(n), e * Math.sin(n), Math.sin(t)) } function eo(n, t, e) { ++e3, e8 += (n - e8) / e3, eb += (t - eb) / e3, ew += (e - ew) / e3 } function ea() { var n, t, e; function r(r, i) { r *= nw; var u = Math.cos(i *= nw), o = u * Math.cos(r), a = u * Math.sin(r), l = Math.sin(i), c = Math.atan2(Math.sqrt((c = t * l - e * a) * c + (c = e * o - n * l) * c + (c = n * a - t * o) * c), n * o + t * a + e * l); e1 += c, e2 += c * (n + (n = o)), e5 += c * (t + (t = a)), e7 += c * (e + (e = l)), eo(n, t, e) } ei.point = function (i, u) { i *= nw; var o = Math.cos(u *= nw); n = o * Math.cos(i), t = o * Math.sin(i), e = Math.sin(u), ei.point = r, eo(n, t, e) } } function el() { ei.point = eu } function ec() { var n, t, e, r, i; function u(n, t) { n *= nw; var u = Math.cos(t *= nw), o = u * Math.cos(n), a = u * Math.sin(n), l = Math.sin(t), c = r * l - i * a, f = i * o - e * l, s = e * a - r * o, $ = Math.sqrt(c * c + f * f + s * s), h = e * o + r * a + i * l, _ = $ && -n6(h) / $, p = Math.atan2($, h); e6 += _ * c, ek += _ * f, eS += _ * s, e1 += p, e2 += p * (e + (e = o)), e5 += p * (r + (r = a)), e7 += p * (i + (i = l)), eo(e, r, i) } ei.point = function (o, a) { n = o, t = a, ei.point = u, o *= nw; var l = Math.cos(a *= nw); e = l * Math.cos(o), r = l * Math.sin(o), i = Math.sin(a), eo(e, r, i) }, ei.lineEnd = function () { u(n, t), ei.lineEnd = el, ei.point = eu } } function ef(n, t) { function e(e, r) { return t((e = n(e, r))[0], e[1]) } return n.invert && t.invert && (e.invert = function (e, r) { return (e = t.invert(e, r)) && n.invert(e[0], e[1]) }), e } function es() { return !0 } function e$(n, t, e, r, i) { var u = [], o = []; if (n.forEach(function (n) { if (!((t = n.length - 1) <= 0)) { var t, e = n[0], r = n[t]; if (er(e, r)) { i.lineStart(); for (var a = 0; a < t; ++a)i.point((e = n[a])[0], e[1]); i.lineEnd(); return } var l = new e_(e, n, null, !0), c = new e_(e, null, l, !1); l.o = c, u.push(l), o.push(c), l = new e_(r, n, null, !1), c = new e_(r, null, l, !0), l.o = c, u.push(l), o.push(c) } }), o.sort(t), eh(u), eh(o), u.length) { for (var a = 0, l = e, c = o.length; a < c; ++a)o[a].e = l = !l; for (var f, s, $ = u[0]; ;) { for (var h = $, _ = !0; h.v;)if ((h = h.n) === $) return; f = h.z, i.lineStart(); do { if (h.v = h.o.v = !0, h.e) { if (_) for (var a = 0, c = f.length; a < c; ++a)i.point((s = f[a])[0], s[1]); else r(h.x, h.n.x, 1, i); h = h.n } else { if (_) { f = h.p.z; for (var a = f.length - 1; a >= 0; --a)i.point((s = f[a])[0], s[1]) } else r(h.x, h.p.x, -1, i); h = h.p } f = (h = h.o).z, _ = !_ } while (!h.v); i.lineEnd() } } } function eh(n) { if (t = n.length) { for (var t, e, r = 0, i = n[0]; ++r < t;)i.n = e = n[r], e.p = i, i = e; i.n = e = n[0], e.p = i } } function e_(n, t, e, r) { this.x = n, this.z = t, this.o = e, this.e = r, this.v = !1, this.n = this.p = null } function ep(t, e, r, i) { return function (u, o) { var a = e(o), l = u.invert(i[0], i[1]), c = { point: f, lineStart: $, lineEnd: h, polygonStart: function () { c.point = m, c.lineStart = x, c.lineEnd = b, _ = [], p = [] }, polygonEnd: function () { c.point = f, c.lineStart = $, c.lineEnd = h, _ = n.merge(_); var t = function n(t, e) { var r = t[0], i = t[1], u = [Math.sin(r), -Math.cos(r), 0], o = 0, a = 0; tX.reset(); for (var l = 0, c = e.length; l < c; ++l) { var f = e[l], s = f.length; if (s) for (var $ = f[0], h = $[0], _ = $[1] / 2 + n3 / 4, p = Math.sin(_), g = Math.cos(_), v = 1; ;) { v === s && (v = 0); var d = (t = f[v])[0], y = t[1] / 2 + n3 / 4, m = Math.sin(y), x = Math.cos(y), b = d - h, w = b >= 0 ? 1 : -1, k = w * b, S = k > n3, E = p * m; if (tX.add(Math.atan2(E * w * Math.sin(k), g * x + E * Math.cos(k))), o += S ? b + w * n1 : b, S ^ h >= r ^ d >= r) { var C = tJ(tQ($), tQ(t)); et(C); var A = tJ(u, C); et(A); var L = (S ^ b >= 0 ? -1 : 1) * nk(A[2]); (i > L || i === L && (C[0] || C[1])) && (a += S ^ b >= 0 ? 1 : -1) } if (!v++) break; h = d, p = m, g = x, $ = t } } return (o < -.000001 || o < 1e-6 && tX < -.000001) ^ 1 & a }(l, p); _.length ? (y || (o.polygonStart(), y = !0), e$(_, ed, t, r, o)) : t && (y || (o.polygonStart(), y = !0), o.lineStart(), r(null, null, 1, o), o.lineEnd()), y && (o.polygonEnd(), y = !1), _ = p = null }, sphere: function () { o.polygonStart(), o.lineStart(), r(null, null, 1, o), o.lineEnd(), o.polygonEnd() } }; function f(n, e) { var r = u(n, e); t(n = r[0], e = r[1]) && o.point(n, e) } function s(n, t) { var e = u(n, t); a.point(e[0], e[1]) } function $() { c.point = s, a.lineStart() } function h() { c.point = f, a.lineEnd() } var _, p, g, v = ev(), d = e(v), y = !1; function m(n, t) { g.push([n, t]); var e = u(n, t); d.point(e[0], e[1]) } function x() { d.lineStart(), g = [] } function b() { m(g[0][0], g[0][1]), d.lineEnd(); var n, t = d.clean(), e = v.buffer(), r = e.length; if (g.pop(), p.push(g), g = null, r) { if (1 & t) { var i, r = (n = e[0]).length - 1, u = -1; if (r > 0) { for (y || (o.polygonStart(), y = !0), o.lineStart(); ++u < r;)o.point((i = n[u])[0], i[1]); o.lineEnd() } return } r > 1 && 2 & t && e.push(e.pop().concat(e.shift())), _.push(e.filter(eg)) } } return c } } function eg(n) { return n.length > 1 } function ev() { var n, t = []; return { lineStart: function () { t.push(n = []) }, point: function (t, e) { n.push([t, e]) }, lineEnd: R, buffer: function () { var e = t; return t = [], n = null, e }, rejoin: function () { t.length > 1 && t.push(t.pop().concat(t.shift())) } } } function ed(n, t) { return ((n = n.x)[0] < 0 ? n[1] - nb - 1e-6 : nb - n[1]) - ((t = t.x)[0] < 0 ? t[1] - nb - 1e-6 : nb - t[1]) } var ey = ep(es, function n(t) { var e, r = NaN, i = NaN, u = NaN; return { lineStart: function () { t.lineStart(), e = 1 }, point: function (n, o) { var a, l, c, f, s, $, h, _ = n > 0 ? n3 : -n3, p = y(n - r); 1e-6 > y(p - n3) ? (t.point(r, i = (i + o) / 2 > 0 ? nb : -nb), t.point(u, i), t.lineEnd(), t.lineStart(), t.point(_, i), t.point(n, i), e = 0) : u !== _ && p >= n3 && (1e-6 > y(r - u) && (r -= 1e-6 * u), 1e-6 > y(n - _) && (n -= 1e-6 * _), i = (a = r, l = i, c = n, f = o, h = Math.sin(a - c), y(h) > 1e-6 ? Math.atan((Math.sin(l) * ($ = Math.cos(f)) * Math.sin(c) - Math.sin(f) * (s = Math.cos(l)) * Math.sin(a)) / (s * $ * h)) : (l + f) / 2), t.point(u, i), t.lineEnd(), t.lineStart(), t.point(_, i), e = 0), t.point(r = n, i = o), u = _ }, lineEnd: function () { t.lineEnd(), r = i = NaN }, clean: function () { return 2 - e } } }, function n(t, e, r, i) { var u; if (null == t) u = r * nb, i.point(-n3, u), i.point(0, u), i.point(n3, u), i.point(n3, 0), i.point(n3, -u), i.point(0, -u), i.point(-n3, -u), i.point(-n3, 0), i.point(-n3, u); else if (y(t[0] - e[0]) > 1e-6) { var o = t[0] < e[0] ? n3 : -n3; u = r * o / 2, i.point(-o, u), i.point(0, u), i.point(o, u) } else i.point(e[0], e[1]) }, [-n3, -n3 / 2]); function em(n, t, e, r) { return function (i) { var u, o = i.a, a = i.b, l = o.x, c = o.y, f = a.x, s = a.y, $ = 0, h = 1, _ = f - l, p = s - c; if (u = n - l, _ || !(u > 0)) { if (u /= _, _ < 0) { if (u < $) return; u < h && (h = u) } else if (_ > 0) { if (u > h) return; u > $ && ($ = u) } if (u = e - l, _ || !(u < 0)) { if (u /= _, _ < 0) { if (u > h) return; u > $ && ($ = u) } else if (_ > 0) { if (u < $) return; u < h && (h = u) } if (u = t - c, p || !(u > 0)) { if (u /= p, p < 0) { if (u < $) return; u < h && (h = u) } else if (p > 0) { if (u > h) return; u > $ && ($ = u) } if (u = r - c, p || !(u < 0)) { if (u /= p, p < 0) { if (u > h) return; u > $ && ($ = u) } else if (p > 0) { if (u < $) return; u < h && (h = u) } return $ > 0 && (i.a = { x: l + $ * _, y: c + $ * p }), h < 1 && (i.b = { x: l + h * _, y: c + h * p }), i } } } } } } function e0(t, e, r, i) { return function (l) { var c, f, s, $, h, _, p, g, v, d, y, m = l, x = ev(), b = em(t, e, r, i), w = { point: E, lineStart: function n() { w.point = C, d && d.push(y = []), p = !0, _ = !1, $ = h = NaN }, lineEnd: function n() { v && (C(c, f), s && _ && x.rejoin(), v.push(x.buffer())), w.point = E, _ && l.lineEnd() }, polygonStart: function () { l = x, v = [], d = [], g = !0 }, polygonEnd: function () { l = m, v = n.merge(v); var e = function n(t) { for (var e = 0, r = d.length, i = t[1], u = 0; u < r; ++u)for (var o, a = 1, l = d[u], c = l.length, f = l[0]; a < c; ++a)o = l[a], f[1] <= i ? o[1] > i && n7(f, o, t) > 0 && ++e : o[1] <= i && 0 > n7(f, o, t) && --e, f = o; return 0 !== e }([t, i]), r = g && e, u = v.length; (r || u) && (l.polygonStart(), r && (l.lineStart(), k(null, null, 1, l), l.lineEnd()), u && e$(v, o, e, k, l), l.polygonEnd()), v = d = y = null } }; function k(n, o, l, c) { var f = 0, s = 0; if (null == n || (f = u(n, l)) !== (s = u(o, l)) || 0 > a(n, o) ^ l > 0) do c.point(0 === f || 3 === f ? t : r, f > 1 ? i : e); while ((f = (f + l + 4) % 4) !== s); else c.point(o[0], o[1]) } function S(n, u) { return t <= n && n <= r && e <= u && u <= i } function E(n, t) { S(n, t) && l.point(n, t) } function C(n, t) { n = Math.max(-1e9, Math.min(1e9, n)), t = Math.max(-1e9, Math.min(1e9, t)); var e = S(n, t); if (d && y.push([n, t]), p) c = n, f = t, s = e, p = !1, e && (l.lineStart(), l.point(n, t)); else if (e && _) l.point(n, t); else { var r = { a: { x: $, y: h }, b: { x: n, y: t } }; b(r) ? (_ || (l.lineStart(), l.point(r.a.x, r.a.y)), l.point(r.b.x, r.b.y), e || l.lineEnd(), g = !1) : e && (l.lineStart(), l.point(n, t), g = !1) } $ = n, h = t, _ = e } return w }; function u(n, i) { return 1e-6 > y(n[0] - t) ? i > 0 ? 0 : 3 : 1e-6 > y(n[0] - r) ? i > 0 ? 2 : 1 : 1e-6 > y(n[1] - e) ? i > 0 ? 1 : 0 : i > 0 ? 3 : 2 } function o(n, t) { return a(n.x, t.x) } function a(n, t) { var e = u(n, 1), r = u(t, 1); return e !== r ? e - r : 0 === e ? t[1] - n[1] : 1 === e ? n[0] - t[0] : 2 === e ? n[1] - t[1] : t[0] - n[0] } } function ex(n) { var t = 0, e = n3 / 3, r = eO(n), i = r(t, e); return i.parallels = function (n) { return arguments.length ? r(t = n[0] * n3 / 180, e = n[1] * n3 / 180) : [t / n3 * 180, e / n3 * 180] }, i } function e4(n, t) { var e = Math.sin(n), r = (e + Math.sin(t)) / 2, i = 1 + e * (2 * r - e), u = Math.sqrt(i) / r; function o(n, t) { var e = Math.sqrt(i - 2 * r * Math.sin(t)) / r; return [e * Math.sin(n *= r), u - e * Math.cos(n)] } return o.invert = function (n, t) { var e = u - t; return [Math.atan2(n, e) / r, nk((i - (n * n + e * e) * r * r) / (2 * r))] }, o } n.geo.clipExtent = function () { var n, t, e, r, i, u, o = { stream: function (n) { return i && (i.valid = !1), (i = u(n)).valid = !0, i }, extent: function (a) { return arguments.length ? (u = e0(n = +a[0][0], t = +a[0][1], e = +a[1][0], r = +a[1][1]), i && (i.valid = !1, i = null), o) : [[n, t], [e, r]] } }; return o.extent([[0, 0], [960, 500]]) }, (n.geo.conicEqualArea = function () { return ex(e4) }).raw = e4, n.geo.albers = function () { return n.geo.conicEqualArea().rotate([96, 0]).center([-.6, 38.7]).parallels([29.5, 45.5]).scale(1070) }, n.geo.albersUsa = function () { var t, e, r, i, u = n.geo.albers(), o = n.geo.conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]), a = n.geo.conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]), l = { point: function (n, e) { t = [n, e] } }; function c(n) { var u = n[0], o = n[1]; return t = null, e(u, o), t || (r(u, o), t) || i(u, o), t } return c.invert = function (n) { var t = u.scale(), e = u.translate(), r = (n[0] - e[0]) / t, i = (n[1] - e[1]) / t; return (i >= .12 && i < .234 && r >= -.425 && r < -.214 ? o : i >= .166 && i < .234 && r >= -.214 && r < -.115 ? a : u).invert(n) }, c.stream = function (n) { var t = u.stream(n), e = o.stream(n), r = a.stream(n); return { point: function (n, i) { t.point(n, i), e.point(n, i), r.point(n, i) }, sphere: function () { t.sphere(), e.sphere(), r.sphere() }, lineStart: function () { t.lineStart(), e.lineStart(), r.lineStart() }, lineEnd: function () { t.lineEnd(), e.lineEnd(), r.lineEnd() }, polygonStart: function () { t.polygonStart(), e.polygonStart(), r.polygonStart() }, polygonEnd: function () { t.polygonEnd(), e.polygonEnd(), r.polygonEnd() } } }, c.precision = function (n) { return arguments.length ? (u.precision(n), o.precision(n), a.precision(n), c) : u.precision() }, c.scale = function (n) { return arguments.length ? (u.scale(n), o.scale(.35 * n), a.scale(n), c.translate(u.translate())) : u.scale() }, c.translate = function (n) { if (!arguments.length) return u.translate(); var t = u.scale(), f = +n[0], s = +n[1]; return e = u.translate(n).clipExtent([[f - .455 * t, s - .238 * t], [f + .455 * t, s + .238 * t]]).stream(l).point, r = o.translate([f - .307 * t, s + .201 * t]).clipExtent([[f - .425 * t + 1e-6, s + .12 * t + 1e-6], [f - .214 * t - 1e-6, s + .234 * t - 1e-6]]).stream(l).point, i = a.translate([f - .205 * t, s + .212 * t]).clipExtent([[f - .214 * t + 1e-6, s + .166 * t + 1e-6], [f - .115 * t - 1e-6, s + .234 * t - 1e-6]]).stream(l).point, c }, c.scale(1070) }; var e3, e1, e8, eb, ew, e2, e5, e7, e6, ek, eS, eE, eC, eA = { point: R, lineStart: R, lineEnd: R, polygonStart: function () { eC = 0, eA.lineStart = eL }, polygonEnd: function () { eA.lineStart = eA.lineEnd = eA.point = R, eE += y(eC / 2) } }; function eL() { var n, t, e, r; function i(n, t) { eC += r * n - e * t, e = n, r = t } eA.point = function (u, o) { eA.point = i, n = e = u, t = r = o }, eA.lineEnd = function () { i(n, t) } } var eq = { point: function n(t, e) { t < rx && (rx = t), t > r3 && (r3 = t), e < r4 && (r4 = e), e > r1 && (r1 = e) }, lineStart: R, lineEnd: R, polygonStart: R, polygonEnd: R }; function ez() { var n = eM(4.5), t = [], e = { point: r, lineStart: function () { e.point = i }, lineEnd: o, polygonStart: function () { e.lineEnd = a }, polygonEnd: function () { e.lineEnd = o, e.point = r }, pointRadius: function (t) { return n = eM(t), e }, result: function () { if (t.length) { var n = t.join(""); return t = [], n } } }; function r(e, r) { t.push("M", e, ",", r, n) } function i(n, r) { t.push("M", n, ",", r), e.point = u } function u(n, e) { t.push("L", n, ",", e) } function o() { e.point = r } function a() { t.push("Z") } return e } function eM(n) { return "m0," + n + "a" + n + "," + n + " 0 1,1 0," + -2 * n + "a" + n + "," + n + " 0 1,1 0," + 2 * n + "z" } var eT = { point: eR, lineStart: eN, lineEnd: eP, polygonStart: function () { eT.lineStart = eU }, polygonEnd: function () { eT.point = eR, eT.lineStart = eN, eT.lineEnd = eP } }; function eR(n, t) { e8 += n, eb += t, ++ew } function eN() { var n, t; function e(e, r) { var i = e - n, u = r - t, o = Math.sqrt(i * i + u * u); e2 += o * (n + e) / 2, e5 += o * (t + r) / 2, e7 += o, eR(n = e, t = r) } eT.point = function (r, i) { eT.point = e, eR(n = r, t = i) } } function eP() { eT.point = eR } function eU() { var n, t, e, r; function i(n, t) { var i = n - e, u = t - r, o = Math.sqrt(i * i + u * u); e2 += o * (e + n) / 2, e5 += o * (r + t) / 2, e7 += o, e6 += (o = r * n - e * t) * (e + n), ek += o * (r + t), eS += 3 * o, eR(e = n, r = t) } eT.point = function (u, o) { eT.point = i, eR(n = e = u, t = r = o) }, eT.lineEnd = function () { i(n, t) } } function ej(n) { var t = 4.5, e = { point: r, lineStart: function () { e.point = i }, lineEnd: o, polygonStart: function () { e.lineEnd = a }, polygonEnd: function () { e.lineEnd = o, e.point = r }, pointRadius: function (n) { return t = n, e }, result: R }; function r(e, r) { n.moveTo(e + t, r), n.arc(e, r, t, 0, n1) } function i(t, r) { n.moveTo(t, r), e.point = u } function u(t, e) { n.lineTo(t, e) } function o() { e.point = r } function a() { n.closePath() } return e } function eD(n) { var t = .5, e = Math.cos(30 * nw), r = 16; function i(n) { return (r ? o : u)(n) } function u(t) { return eF(t, function (e, r) { e = n(e, r), t.point(e[0], e[1]) }) } function o(t) { var e, i, u, o, l, c, f, s, $, h, _, p, g, v = { point: d, lineStart: y, lineEnd: x, polygonStart: function () { t.polygonStart(), v.lineStart = b }, polygonEnd: function () { t.polygonEnd(), v.lineStart = y } }; function d(e, r) { e = n(e, r), t.point(e[0], e[1]) } function y() { $ = NaN, v.point = m, t.lineStart() } function m(e, i) { var u = tQ([e, i]), o = n(e, i); a($, h, s, _, p, g, $ = o[0], h = o[1], s = e, _ = u[0], p = u[1], g = u[2], r, t), t.point($, h) } function x() { v.point = d, t.lineEnd() } function b() { y(), v.point = w, v.lineEnd = k } function w(n, t) { m(e = n, i = t), u = $, o = h, l = _, c = p, f = g, v.point = m } function k() { a($, h, s, _, p, g, u, o, e, l, c, f, r, t), v.lineEnd = x, x() } return v } function a(r, i, u, o, l, c, f, s, $, h, _, p, g, v) { var d = f - r, m = s - i, x = d * d + m * m; if (x > 4 * t && g--) { var b = o + h, w = l + _, k = c + p, S = Math.sqrt(b * b + w * w + k * k), E = Math.asin(k /= S), C = 1e-6 > y(y(k) - 1) || 1e-6 > y(u - $) ? (u + $) / 2 : Math.atan2(w, b), A = n(C, E), L = A[0], q = A[1], z = L - r, M = q - i, T = m * z - d * M; (T * T / x > t || y((d * z + m * M) / x - .5) > .3 || o * h + l * _ + c * p < e) && (a(r, i, u, o, l, c, L, q, C, b /= S, w /= S, k, g, v), v.point(L, q), a(L, q, C, b, w, k, f, s, $, h, _, p, g, v)) } } return i.precision = function (n) { return arguments.length ? (r = (t = n * n) > 0 && 16, i) : Math.sqrt(t) }, i } function eH(n) { this.stream = n } function eF(n, t) { return { point: t, sphere: function () { n.sphere() }, lineStart: function () { n.lineStart() }, lineEnd: function () { n.lineEnd() }, polygonStart: function () { n.polygonStart() }, polygonEnd: function () { n.polygonEnd() } } } function eI(n) { return eO(function () { return n })() } function eO(t) { var e, r, i, u, o, a, l = eD(function (n, t) { return [(n = e(n, t))[0] * c + u, o - n[1] * c] }), c = 150, f = 480, s = 250, $ = 0, h = 0, _ = 0, p = 0, g = 0, v = ey, d = q, m = null, x = null; function b(n) { return [(n = i(n[0] * nw, n[1] * nw))[0] * c + u, o - n[1] * c] } function w(n) { return (n = i.invert((n[0] - u) / c, (o - n[1]) / c)) && [n[0] * n2, n[1] * n2] } function k() { i = ef(r = e9(_, p, g), e); var n = e($, h); return u = f - n[0] * c, o = s + n[1] * c, S() } function S() { return a && (a.valid = !1, a = null), b } return b.stream = function (n) { return a && (a.valid = !1), (a = eY(v(r, l(d(n))))).valid = !0, a }, b.clipAngle = function (n) { return arguments.length ? (v = null == n ? (m = n, ey) : function n(t) { var e = Math.cos(t), r = e > 0, i = y(e) > 1e-6, u = eQ(t, 6 * nw); return ep(o, function n(t) { var e, u, c, f, s; return { lineStart: function () { f = c = !1, s = 1 }, point: function (n, $) { var h, _, p = [n, $], g = o(n, $), v = r ? g ? 0 : l(n, $) : g ? l(n + (n < 0 ? n3 : -n3), $) : 0; !e && (f = c = g) && t.lineStart(), g !== c && (_ = a(e, p), (er(e, _) || er(p, _)) && (p[0] += 1e-6, p[1] += 1e-6, g = o(p[0], p[1]))), g !== c ? (s = 0, g ? (t.lineStart(), _ = a(p, e), t.point(_[0], _[1])) : (_ = a(e, p), t.point(_[0], _[1]), t.lineEnd()), e = _) : i && e && r ^ g && !(v & u) && (h = a(p, e, !0)) && (s = 0, r ? (t.lineStart(), t.point(h[0][0], h[0][1]), t.point(h[1][0], h[1][1]), t.lineEnd()) : (t.point(h[1][0], h[1][1]), t.lineEnd(), t.lineStart(), t.point(h[0][0], h[0][1]))), !g || e && er(e, p) || t.point(p[0], p[1]), e = p, c = g, u = v }, lineEnd: function () { c && t.lineEnd(), e = null }, clean: function () { return s | (f && c) << 1 } } }, u, r ? [0, -t] : [-n3, t - n3]); function o(n, t) { return Math.cos(n) * Math.cos(t) > e } function a(n, t, r) { var i = tQ(n), u = tQ(t), o = [1, 0, 0], a = tJ(i, u), l = tG(a, a), c = a[0], f = l - c * c; if (!f) return !r && n; var s = tJ(o, a), $ = en(o, e * l / f), h = en(a, -e * c / f); tK($, h); var _ = s, p = tG($, _), g = tG(_, _), v = p * p - g * (tG($, $) - 1); if (!(v < 0)) { var d = Math.sqrt(v), m = en(_, (-p - d) / g); if (tK(m, $), m = ee(m), !r) return m; var x, b = n[0], w = t[0], k = n[1], S = t[1]; w < b && (x = b, b = w, w = x); var E = w - b, C = 1e-6 > y(E - n3); if (!C && S < k && (x = k, k = S, S = x), C || E < 1e-6 ? C ? k + S > 0 ^ m[1] < (1e-6 > y(m[0] - b) ? k : S) : k <= m[1] && m[1] <= S : E > n3 ^ (b <= m[0] && m[0] <= w)) { var A = en(_, (-p + d) / g); return tK(A, $), [m, ee(A)] } } } function l(n, e) { var i = r ? t : n3 - t, u = 0; return n < -i ? u |= 1 : n > i && (u |= 2), e < -i ? u |= 4 : e > i && (u |= 8), u } }((m = +n) * nw), S()) : m }, b.clipExtent = function (n) { return arguments.length ? (x = n, d = n ? e0(n[0][0], n[0][1], n[1][0], n[1][1]) : q, S()) : x }, b.scale = function (n) { return arguments.length ? (c = +n, k()) : c }, b.translate = function (n) { return arguments.length ? (f = +n[0], s = +n[1], k()) : [f, s] }, b.center = function (n) { return arguments.length ? ($ = n[0] % 360 * nw, h = n[1] % 360 * nw, k()) : [$ * n2, h * n2] }, b.rotate = function (n) { return arguments.length ? (_ = n[0] % 360 * nw, p = n[1] % 360 * nw, g = n.length > 2 ? n[2] % 360 * nw : 0, k()) : [_ * n2, p * n2, g * n2] }, n.rebind(b, l, "precision"), function () { return e = t.apply(this, arguments), b.invert = e.invert && w, k() } } function eY(n) { return eF(n, function (t, e) { n.point(t * nw, e * nw) }) } function eZ(n, t) { return [n, t] } function eV(n, t) { return [n > n3 ? n - n1 : n < -n3 ? n + n1 : n, t] } function e9(n, t, e) { return n ? t || e ? ef(eB(n), eW(t, e)) : eB(n) : t || e ? eW(t, e) : eV } function eX(n) { return function (t, e) { return [(t += n) > n3 ? t - n1 : t < -n3 ? t + n1 : t, e] } } function eB(n) { var t = eX(n); return t.invert = eX(-n), t } function eW(n, t) { var e = Math.cos(n), r = Math.sin(n), i = Math.cos(t), u = Math.sin(t); function o(n, t) { var o = Math.cos(t), a = Math.cos(n) * o, l = Math.sin(n) * o, c = Math.sin(t), f = c * e + a * r; return [Math.atan2(l * i - f * u, a * e - c * r), nk(f * i + l * u)] } return o.invert = function (n, t) { var o = Math.cos(t), a = Math.cos(n) * o, l = Math.sin(n) * o, c = Math.sin(t), f = c * i - l * u; return [Math.atan2(l * i + c * u, a * e + f * r), nk(f * e - a * r)] }, o } function eQ(n, t) { var e = Math.cos(n), r = Math.sin(n); return function (i, u, o, a) { var l = o * t; null != i ? (i = eG(e, i), u = eG(e, u), (o > 0 ? i < u : i > u) && (i += o * n1)) : (i = n + o * n1, u = n - .5 * l); for (var c, f = i; o > 0 ? f > u : f < u; f -= l)a.point((c = ee([e, -r * Math.cos(f), -r * Math.sin(f)]))[0], c[1]) } } function eG(n, t) { var e = tQ(t); e[0] -= n, et(e); var r = n6(-e[1]); return ((0 > -e[2] ? -r : r) + 2 * Math.PI - 1e-6) % (2 * Math.PI) } function eJ(t, e, r) { var i = n.range(t, e - 1e-6, r).concat(e); return function (n) { return i.map(function (t) { return [n, t] }) } } function eK(t, e, r) { var i = n.range(t, e - 1e-6, r).concat(e); return function (n) { return i.map(function (t) { return [t, n] }) } } function rn(n) { return n.source } function rt(n) { return n.target } n.geo.path = function () { var t, e, r, i, u, o = 4.5; function a(t) { return t && ("function" == typeof o && i.pointRadius(+o.apply(this, arguments)), u && u.valid || (u = r(i)), n.geo.stream(t, u)), i.result() } function l() { return u = null, a } return a.area = function (t) { return eE = 0, n.geo.stream(t, r(eA)), eE }, a.centroid = function (t) { return e8 = eb = ew = e2 = e5 = e7 = e6 = ek = eS = 0, n.geo.stream(t, r(eT)), eS ? [e6 / eS, ek / eS] : e7 ? [e2 / e7, e5 / e7] : ew ? [e8 / ew, eb / ew] : [NaN, NaN] }, a.bounds = function (t) { return r3 = r1 = -(rx = r4 = 1 / 0), n.geo.stream(t, r(eq)), [[rx, r4], [r3, r1]] }, a.projection = function (n) { var e, i; return arguments.length ? (r = (t = n) ? n.stream || (e = n, i = eD(function (n, t) { return e([n * n2, t * n2]) }), function (n) { return eY(i(n)) }) : q, l()) : t }, a.context = function (n) { return arguments.length ? (i = null == (e = n) ? new ez : new ej(n), "function" != typeof o && i.pointRadius(o), l()) : e }, a.pointRadius = function (n) { return arguments.length ? (o = "function" == typeof n ? n : (i.pointRadius(+n), +n), a) : o }, a.projection(n.geo.albersUsa()).context(null) }, n.geo.transform = function (n) { return { stream: function (t) { var e = new eH(t); for (var r in n) e[r] = n[r]; return e } } }, eH.prototype = { point: function (n, t) { this.stream.point(n, t) }, sphere: function () { this.stream.sphere() }, lineStart: function () { this.stream.lineStart() }, lineEnd: function () { this.stream.lineEnd() }, polygonStart: function () { this.stream.polygonStart() }, polygonEnd: function () { this.stream.polygonEnd() } }, n.geo.projection = eI, n.geo.projectionMutator = eO, (n.geo.equirectangular = function () { return eI(eZ) }).raw = eZ.invert = eZ, n.geo.rotation = function (n) { function t(t) { return t = n(t[0] * nw, t[1] * nw), t[0] *= n2, t[1] *= n2, t } return n = e9(n[0] % 360 * nw, n[1] * nw, n.length > 2 ? n[2] * nw : 0), t.invert = function (t) { return t = n.invert(t[0] * nw, t[1] * nw), t[0] *= n2, t[1] *= n2, t }, t }, eV.invert = eZ, n.geo.circle = function () { var n, t, e = [0, 0], r = 6; function i() { var n = "function" == typeof e ? e.apply(this, arguments) : e, r = e9(-n[0] * nw, -n[1] * nw, 0).invert, i = []; return t(null, null, 1, { point: function (n, t) { i.push(n = r(n, t)), n[0] *= n2, n[1] *= n2 } }), { type: "Polygon", coordinates: [i] } } return i.origin = function (n) { return arguments.length ? (e = n, i) : e }, i.angle = function (e) { return arguments.length ? (t = eQ((n = +e) * nw, r * nw), i) : n }, i.precision = function (e) { return arguments.length ? (t = eQ(n * nw, (r = +e) * nw), i) : r }, i.angle(90) }, n.geo.distance = function (n, t) { var e, r = (t[0] - n[0]) * nw, i = n[1] * nw, u = t[1] * nw, o = Math.cos(r), a = Math.sin(i), l = Math.cos(i), c = Math.sin(u), f = Math.cos(u); return Math.atan2(Math.sqrt((e = f * Math.sin(r)) * e + (e = l * c - a * f * o) * e), a * c + l * f * o) }, n.geo.graticule = function () { var t, e, r, i, u, o, a, l, c, f, s, $, h = 10, _ = h, p = 90, g = 360, v = 2.5; function d() { return { type: "MultiLineString", coordinates: m() } } function m() { return n.range(Math.ceil(i / p) * p, r, p).map(s).concat(n.range(Math.ceil(l / g) * g, a, g).map($)).concat(n.range(Math.ceil(e / h) * h, t, h).filter(function (n) { return y(n % p) > 1e-6 }).map(c)).concat(n.range(Math.ceil(o / _) * _, u, _).filter(function (n) { return y(n % g) > 1e-6 }).map(f)) } return d.lines = function () { return m().map(function (n) { return { type: "LineString", coordinates: n } }) }, d.outline = function () { return { type: "Polygon", coordinates: [s(i).concat($(a).slice(1), s(r).reverse().slice(1), $(l).reverse().slice(1))] } }, d.extent = function (n) { return arguments.length ? d.majorExtent(n).minorExtent(n) : d.minorExtent() }, d.majorExtent = function (n) { return arguments.length ? (i = +n[0][0], r = +n[1][0], l = +n[0][1], a = +n[1][1], i > r && (n = i, i = r, r = n), l > a && (n = l, l = a, a = n), d.precision(v)) : [[i, l], [r, a]] }, d.minorExtent = function (n) { return arguments.length ? (e = +n[0][0], t = +n[1][0], o = +n[0][1], u = +n[1][1], e > t && (n = e, e = t, t = n), o > u && (n = o, o = u, u = n), d.precision(v)) : [[e, o], [t, u]] }, d.step = function (n) { return arguments.length ? d.majorStep(n).minorStep(n) : d.minorStep() }, d.majorStep = function (n) { return arguments.length ? (p = +n[0], g = +n[1], d) : [p, g] }, d.minorStep = function (n) { return arguments.length ? (h = +n[0], _ = +n[1], d) : [h, _] }, d.precision = function (n) { return arguments.length ? (v = +n, c = eJ(o, u, 90), f = eK(e, t, v), s = eJ(l, a, 90), $ = eK(i, r, v), d) : v }, d.majorExtent([[-180, -89.999999], [180, 89.999999]]).minorExtent([[-180, -80.000001], [180, 80.000001]]) }, n.geo.greatArc = function () { var t, e, r = rn, i = rt; function u() { return { type: "LineString", coordinates: [t || r.apply(this, arguments), e || i.apply(this, arguments)] } } return u.distance = function () { return n.geo.distance(t || r.apply(this, arguments), e || i.apply(this, arguments)) }, u.source = function (n) { return arguments.length ? (r = n, t = "function" == typeof n ? null : n, u) : r }, u.target = function (n) { return arguments.length ? (i = n, e = "function" == typeof n ? null : n, u) : i }, u.precision = function () { return arguments.length ? u : 0 }, u }, n.geo.interpolate = function (n, t) { var e, r, i, u, o, a, l, c, f, s, $, h, _, p, g; return e = n[0] * nw, r = n[1] * nw, i = t[0] * nw, u = t[1] * nw, o = Math.cos(r), a = Math.sin(r), l = Math.cos(u), c = Math.sin(u), f = o * Math.cos(e), s = o * Math.sin(e), $ = l * Math.cos(i), h = l * Math.sin(i), _ = 2 * Math.asin(Math.sqrt(nE(u - r) + o * l * nE(i - e))), p = 1 / Math.sin(_), g = _ ? function (n) { var t = Math.sin(n *= _) * p, e = Math.sin(_ - n) * p, r = e * f + t * $, i = e * s + t * h; return [Math.atan2(i, r) * n2, Math.atan2(e * a + t * c, Math.sqrt(r * r + i * i)) * n2] } : function () { return [e * n2, r * n2] }, g.distance = _, g }, n.geo.length = function (t) { return r8 = 0, n.geo.stream(t, re), r8 }; var re = { sphere: R, point: R, lineStart: function n() { var t, e, r; function i(n, i) { var u = Math.sin(i *= nw), o = Math.cos(i), a = y((n *= nw) - t), l = Math.cos(a); r8 += Math.atan2(Math.sqrt((a = o * Math.sin(a)) * a + (a = r * u - e * o * l) * a), e * u + r * o * l), t = n, e = u, r = o } re.point = function (n, u) { t = n * nw, e = Math.sin(u *= nw), r = Math.cos(u), re.point = i }, re.lineEnd = function () { re.point = re.lineEnd = R } }, lineEnd: R, polygonStart: R, polygonEnd: R }; function rr(n, t) { function e(t, e) { var r = Math.cos(e), i = n(Math.cos(t) * r); return [i * r * Math.sin(t), i * Math.sin(e)] } return e.invert = function (n, e) { var r = Math.sqrt(n * n + e * e), i = t(r), u = Math.sin(i); return [Math.atan2(n * u, r * Math.cos(i)), Math.asin(r && e * u / r)] }, e } var ri = rr(function (n) { return Math.sqrt(2 / (1 + n)) }, function (n) { return 2 * Math.asin(n / 2) }); (n.geo.azimuthalEqualArea = function () { return eI(ri) }).raw = ri; var ru = rr(function (n) { var t = Math.acos(n); return t && t / Math.sin(t) }, q); function ro(n, t) { var e = Math.cos(n), r = function (n) { return Math.tan(n3 / 4 + n / 2) }, i = n === t ? Math.sin(n) : Math.log(e / Math.cos(t)) / Math.log(r(t) / r(n)), u = e * Math.pow(r(n), i) / i; if (!i) return rc; function o(n, t) { u > 0 ? t < -nb + 1e-6 && (t = -nb + 1e-6) : t > nb - 1e-6 && (t = nb - 1e-6); var e = u / Math.pow(r(t), i); return [e * Math.sin(i * n), u - e * Math.cos(i * n)] } return o.invert = function (n, t) { var e = u - t, r = n5(i) * Math.sqrt(n * n + e * e); return [Math.atan2(n, e) / i, 2 * Math.atan(Math.pow(u / r, 1 / i)) - nb] }, o } function ra(n, t) { var e = Math.cos(n), r = n === t ? Math.sin(n) : (e - Math.cos(t)) / (t - n), i = e / r + n; if (1e-6 > y(r)) return eZ; function u(n, t) { var e = i - t; return [e * Math.sin(r * n), i - e * Math.cos(r * n)] } return u.invert = function (n, t) { var e = i - t; return [Math.atan2(n, e) / r, i - n5(r) * Math.sqrt(n * n + e * e)] }, u } (n.geo.azimuthalEquidistant = function () { return eI(ru) }).raw = ru, (n.geo.conicConformal = function () { return ex(ro) }).raw = ro, (n.geo.conicEquidistant = function () { return ex(ra) }).raw = ra; var rl = rr(function (n) { return 1 / n }, Math.atan); function rc(n, t) { return [n, Math.log(Math.tan(n3 / 4 + t / 2))] } function rf(n) { var t, e = eI(n), r = e.scale, i = e.translate, u = e.clipExtent; return e.scale = function () { var n = r.apply(e, arguments); return n === e ? t ? e.clipExtent(null) : e : n }, e.translate = function () { var n = i.apply(e, arguments); return n === e ? t ? e.clipExtent(null) : e : n }, e.clipExtent = function (n) { var o = u.apply(e, arguments); if (o === e) { if (t = null == n) { var a = n3 * r(), l = i(); u([[l[0] - a, l[1] - a], [l[0] + a, l[1] + a]]) } } else t && (o = null); return o }, e.clipExtent(null) } (n.geo.gnomonic = function () { return eI(rl) }).raw = rl, rc.invert = function (n, t) { return [n, 2 * Math.atan(Math.exp(t)) - nb] }, (n.geo.mercator = function () { return rf(rc) }).raw = rc; var rs = rr(function () { return 1 }, Math.asin); (n.geo.orthographic = function () { return eI(rs) }).raw = rs; var r$ = rr(function (n) { return 1 / (1 + n) }, function (n) { return 2 * Math.atan(n) }); function rh(n, t) { return [Math.log(Math.tan(n3 / 4 + t / 2)), -n] } function r_(n) { return n[0] } function rp(n) { return n[1] } function rg(n) { for (var t = n.length, e = [0, 1], r = 2, i = 2; i < t; i++) { for (; r > 1 && 0 >= n7(n[e[r - 2]], n[e[r - 1]], n[i]);)--r; e[r++] = i } return e.slice(0, r) } function rv(n, t) { return n[0] - t[0] || n[1] - t[1] } (n.geo.stereographic = function () { return eI(r$) }).raw = r$, rh.invert = function (n, t) { return [-t, 2 * Math.atan(Math.exp(n)) - nb] }, (n.geo.transverseMercator = function () { var n = rf(rh), t = n.center, e = n.rotate; return n.center = function (n) { return n ? t([-n[1], n[0]]) : [(n = t())[1], -n[0]] }, n.rotate = function (n) { return n ? e([n[0], n[1], n.length > 2 ? n[2] + 90 : 90]) : [(n = e())[0], n[1], n[2] - 90] }, e([0, 0, 90]) }).raw = rh, n.geom = {}, n.geom.hull = function (n) { var t = r_, e = rp; if (arguments.length) return r(n); function r(n) { if (n.length < 3) return []; var r, i = te(t), u = te(e), o = n.length, a = [], l = []; for (r = 0; r < o; r++)a.push([+i.call(this, n[r], r), +u.call(this, n[r], r), r]); for (a.sort(rv), r = 0; r < o; r++)l.push([a[r][0], -a[r][1]]); var c = rg(a), f = rg(l), s = f[0] === c[0], $ = f[f.length - 1] === c[c.length - 1], h = []; for (r = c.length - 1; r >= 0; --r)h.push(n[a[c[r]][2]]); for (r = +s; r < f.length - $; ++r)h.push(n[a[f[r]][2]]); return h } return r.x = function (n) { return arguments.length ? (t = n, r) : t }, r.y = function (n) { return arguments.length ? (e = n, r) : e }, r }, n.geom.polygon = function (n) { return F(n, rd), n }; var rd = n.geom.polygon.prototype = []; function ry(n, t, e) { return (e[0] - t[0]) * (n[1] - t[1]) < (e[1] - t[1]) * (n[0] - t[0]) } function rm(n, t, e, r) { var i = n[0], u = e[0], o = t[0] - i, a = r[0] - u, l = n[1], c = e[1], f = t[1] - l, s = r[1] - c, $ = (a * (l - c) - s * (i - u)) / (s * o - a * f); return [i + $ * o, l + $ * f] } function r0(n) { var t = n[0], e = n[n.length - 1]; return !(t[0] - e[0] || t[1] - e[1]) } rd.area = function () { for (var n, t = -1, e = this.length, r = this[e - 1], i = 0; ++t < e;)n = r, r = this[t], i += n[1] * r[0] - n[0] * r[1]; return .5 * i }, rd.centroid = function (n) { var t, e, r = -1, i = this.length, u = 0, o = 0, a = this[i - 1]; for (arguments.length || (n = -1 / (6 * this.area())); ++r < i;)t = a, a = this[r], e = t[0] * a[1] - a[0] * t[1], u += (t[0] + a[0]) * e, o += (t[1] + a[1]) * e; return [u * n, o * n] }, rd.clip = function (n) { for (var t, e, r, i, u, o, a = r0(n), l = -1, c = this.length - r0(this), f = this[c - 1]; ++l < c;) { for (t = n.slice(), n.length = 0, i = this[l], u = t[(r = t.length - a) - 1], e = -1; ++e < r;)ry(o = t[e], f, i) ? (ry(u, f, i) || n.push(rm(u, o, f, i)), n.push(o)) : ry(u, f, i) && n.push(rm(u, o, f, i)), u = o; a && n.push(n[0]), f = i } return n }; var rx, r4, r3, r1, r8, rb, rw, r2, r5, r7, r6 = [], rk = []; function rS() { rY(this), this.edge = this.site = this.circle = null } function rE(n) { var t = r6.pop() || new rS; return t.site = n, t } function rC(n) { rP(n), r2.remove(n), r6.push(n), rY(n) } function rA(n) { var t = n.circle, e = t.x, r = t.cy, i = { x: e, y: r }, u = n.P, o = n.N, a = [n]; rC(n); for (var l = u; l.circle && 1e-6 > y(e - l.circle.x) && 1e-6 > y(r - l.circle.cy);)u = l.P, a.unshift(l), rC(l), l = u; a.unshift(l), rP(l); for (var c = o; c.circle && 1e-6 > y(e - c.circle.x) && 1e-6 > y(r - c.circle.cy);)o = c.N, a.push(c), rC(c), c = o; a.push(c), rP(c); var f, s = a.length; for (f = 1; f < s; ++f)c = a[f], l = a[f - 1], rF(c.edge, l.site, c.site, i); l = a[0], (c = a[s - 1]).edge = rD(l.site, c.site, null, i), rN(l), rN(c) } function rL(n) { for (var t, e, r, i, u = n.x, o = n.y, a = r2._; a;)if ((r = rq(a, o) - u) > 1e-6) a = a.L; else if ((i = u - rz(a, o)) > 1e-6) { if (!a.R) { t = a; break } a = a.R } else { r > -.000001 ? (t = a.P, e = a) : i > -.000001 ? (t = a, e = a.N) : t = e = a; break } var l = rE(n); if (r2.insert(t, l), t || e) { if (t === e) { rP(t), e = rE(t.site), r2.insert(l, e), l.edge = e.edge = rD(t.site, l.site), rN(t), rN(e); return } if (!e) { l.edge = rD(t.site, l.site); return } rP(t), rP(e); var c = t.site, f = c.x, s = c.y, $ = n.x - f, h = n.y - s, _ = e.site, p = _.x - f, g = _.y - s, v = 2 * ($ * g - h * p), d = $ * $ + h * h, y = p * p + g * g, m = { x: (g * d - h * y) / v + f, y: ($ * y - p * d) / v + s }; rF(e.edge, c, _, m), l.edge = rD(c, n, null, m), e.edge = rD(n, _, null, m), rN(t), rN(e) } } function rq(n, t) { var e = n.site, r = e.x, i = e.y, u = i - t; if (!u) return r; var o = n.P; if (!o) return -1 / 0; var a = (e = o.site).x, l = e.y, c = l - t; if (!c) return a; var f = a - r, s = 1 / u - 1 / c, $ = f / c; return s ? (-$ + Math.sqrt($ * $ - 2 * s * (f * f / (-2 * c) - l + c / 2 + i - u / 2))) / s + r : (r + a) / 2 } function rz(n, t) { var e = n.N; if (e) return rq(e, t); var r = n.site; return r.y === t ? r.x : 1 / 0 } function rM(n) { this.site = n, this.edges = [] } function rT(n, t) { return t.angle - n.angle } function rR() { rY(this), this.x = this.y = this.arc = this.site = this.cy = null } function rN(n) { var t = n.P, e = n.N; if (t && e) { var r = t.site, i = n.site, u = e.site; if (r !== u) { var o = i.x, a = i.y, l = r.x - o, c = r.y - a, f = u.x - o, s = u.y - a, $ = 2 * (l * s - c * f); if (!($ >= -n4)) { var h = l * l + c * c, _ = f * f + s * s, p = (s * h - c * _) / $, g = (l * _ - f * h) / $, s = g + a, v = rk.pop() || new rR; v.arc = n, v.site = i, v.x = p + o, v.y = s + Math.sqrt(p * p + g * g), v.cy = s, n.circle = v; for (var d = null, y = r7._; y;)if (v.y < y.y || v.y === y.y && v.x <= y.x) { if (y.L) y = y.L; else { d = y.P; break } } else if (y.R) y = y.R; else { d = y; break } r7.insert(d, v), d || (r5 = v) } } } } function rP(n) { var t = n.circle; t && (t.P || (r5 = t.N), r7.remove(t), rk.push(t), rY(t), n.circle = null) } function rU(n, t) { var e = n.b; if (e) return !0; var r, i, u = n.a, o = t[0][0], a = t[1][0], l = t[0][1], c = t[1][1], f = n.l, s = n.r, $ = f.x, h = f.y, _ = s.x, p = s.y, g = ($ + _) / 2; if (p === h) { if (g < o || g >= a) return; if ($ > _) { if (u) { if (u.y >= c) return } else u = { x: g, y: l }; e = { x: g, y: c } } else { if (u) { if (u.y < l) return } else u = { x: g, y: c }; e = { x: g, y: l } } } else if (r = ($ - _) / (p - h), i = (h + p) / 2 - r * g, r < -1 || r > 1) { if ($ > _) { if (u) { if (u.y >= c) return } else u = { x: (l - i) / r, y: l }; e = { x: (c - i) / r, y: c } } else { if (u) { if (u.y < l) return } else u = { x: (c - i) / r, y: c }; e = { x: (l - i) / r, y: l } } } else if (h < p) { if (u) { if (u.x >= a) return } else u = { x: o, y: r * o + i }; e = { x: a, y: r * a + i } } else { if (u) { if (u.x < o) return } else u = { x: a, y: r * a + i }; e = { x: o, y: r * o + i } } return n.a = u, n.b = e, !0 } function rj(n, t) { this.l = n, this.r = t, this.a = this.b = null } function rD(n, t, e, r) { var i = new rj(n, t); return rb.push(i), e && rF(i, n, t, e), r && rF(i, t, n, r), rw[n.i].edges.push(new rI(i, n, t)), rw[t.i].edges.push(new rI(i, t, n)), i } function rH(n, t, e) { var r = new rj(n, null); return r.a = t, r.b = e, rb.push(r), r } function rF(n, t, e, r) { n.a || n.b ? n.l === e ? n.b = r : n.a = r : (n.a = r, n.l = t, n.r = e) } function rI(n, t, e) { var r = n.a, i = n.b; this.edge = n, this.site = t, this.angle = e ? Math.atan2(e.y - t.y, e.x - t.x) : n.l === t ? Math.atan2(i.x - r.x, r.y - i.y) : Math.atan2(r.x - i.x, i.y - r.y) } function rO() { this._ = null } function rY(n) { n.U = n.C = n.L = n.R = n.P = n.N = null } function rZ(n, t) { var e = t, r = t.R, i = e.U; i ? i.L === e ? i.L = r : i.R = r : n._ = r, r.U = i, e.U = r, e.R = r.L, e.R && (e.R.U = e), r.L = e } function rV(n, t) { var e = t, r = t.L, i = e.U; i ? i.L === e ? i.L = r : i.R = r : n._ = r, r.U = i, e.U = r, e.L = r.R, e.L && (e.L.U = e), r.R = e } function r9(n) { for (; n.L;)n = n.L; return n } function rX(n, t) { var e, r, i, u = n.sort(rB).pop(); for (rb = [], rw = Array(n.length), r2 = new rO, r7 = new rO; ;)if (i = r5, u && (!i || u.y < i.y || u.y === i.y && u.x < i.x)) (u.x !== e || u.y !== r) && (rw[u.i] = new rM(u), rL(u), e = u.x, r = u.y), u = n.pop(); else if (i) rA(i.arc); else break; t && (function n(t) { for (var e, r = rb, i = em(t[0][0], t[0][1], t[1][0], t[1][1]), u = r.length; u--;)(!rU(e = r[u], t) || !i(e) || 1e-6 > y(e.a.x - e.b.x) && 1e-6 > y(e.a.y - e.b.y)) && (e.a = e.b = null, r.splice(u, 1)) }(t), function n(t) { for (var e, r, i, u, o, a, l, c, f, s, $ = t[0][0], h = t[1][0], _ = t[0][1], p = t[1][1], g = rw, v = g.length; v--;)if ((o = g[v]) && o.prepare()) for (c = (l = o.edges).length, a = 0; a < c;)i = (s = l[a].end()).x, u = s.y, e = (f = l[++a % c].start()).x, r = f.y, (y(i - e) > 1e-6 || y(u - r) > 1e-6) && (l.splice(a, 0, new rI(rH(o.site, s, 1e-6 > y(i - $) && p - u > 1e-6 ? { x: $, y: 1e-6 > y(e - $) ? r : p } : 1e-6 > y(u - p) && h - i > 1e-6 ? { x: 1e-6 > y(r - p) ? e : h, y: p } : 1e-6 > y(i - h) && u - _ > 1e-6 ? { x: h, y: 1e-6 > y(e - h) ? r : _ } : 1e-6 > y(u - _) && i - $ > 1e-6 ? { x: 1e-6 > y(r - _) ? e : $, y: _ } : null), o.site, null)), ++c) }(t)); var o = { cells: rw, edges: rb }; return r2 = r7 = rb = rw = null, o } function rB(n, t) { return t.y - n.y || t.x - n.x } rM.prototype.prepare = function () { for (var n, t = this.edges, e = t.length; e--;)(n = t[e].edge).b && n.a || t.splice(e, 1); return t.sort(rT), t.length }, rI.prototype = { start: function () { return this.edge.l === this.site ? this.edge.a : this.edge.b }, end: function () { return this.edge.l === this.site ? this.edge.b : this.edge.a } }, rO.prototype = { insert: function (n, t) { var e, r, i; if (n) { if (t.P = n, t.N = n.N, n.N && (n.N.P = t), n.N = t, n.R) { for (n = n.R; n.L;)n = n.L; n.L = t } else n.R = t; e = n } else this._ ? (n = r9(this._), t.P = null, t.N = n, n.P = n.L = t, e = n) : (t.P = t.N = null, this._ = t, e = null); for (t.L = t.R = null, t.U = e, t.C = !0, n = t; e && e.C;)r = e.U, e === r.L ? (i = r.R) && i.C ? (e.C = i.C = !1, r.C = !0, n = r) : (n === e.R && (rZ(this, e), e = (n = e).U), e.C = !1, r.C = !0, rV(this, r)) : (i = r.L) && i.C ? (e.C = i.C = !1, r.C = !0, n = r) : (n === e.L && (rV(this, e), e = (n = e).U), e.C = !1, r.C = !0, rZ(this, r)), e = n.U; this._.C = !1 }, remove: function (n) { n.N && (n.N.P = n.P), n.P && (n.P.N = n.N), n.N = n.P = null; var t, e, r, i = n.U, u = n.L, o = n.R; if (e = u ? o ? r9(o) : u : o, i ? i.L === n ? i.L = e : i.R = e : this._ = e, u && o ? (r = e.C, e.C = n.C, e.L = u, u.U = e, e !== o ? (i = e.U, e.U = n.U, n = e.R, i.L = n, e.R = o, o.U = e) : (e.U = i, i = e, n = e.R)) : (r = n.C, n = e), n && (n.U = i), !r) { if (n && n.C) { n.C = !1; return } do { if (n === this._) break; if (n === i.L) { if ((t = i.R).C && (t.C = !1, i.C = !0, rZ(this, i), t = i.R), t.L && t.L.C || t.R && t.R.C) { t.R && t.R.C || (t.L.C = !1, t.C = !0, rV(this, t), t = i.R), t.C = i.C, i.C = t.R.C = !1, rZ(this, i), n = this._; break } } else if ((t = i.L).C && (t.C = !1, i.C = !0, rV(this, i), t = i.L), t.L && t.L.C || t.R && t.R.C) { t.L && t.L.C || (t.R.C = !1, t.C = !0, rZ(this, t), t = i.L), t.C = i.C, i.C = t.L.C = !1, rV(this, i), n = this._; break } t.C = !0, n = i, i = i.U } while (!n.C); n && (n.C = !1) } } }, n.geom.voronoi = function (n) { var t = r_, e = rp, r = t, i = e, u = rW; if (n) return o(n); function o(n) { var t = Array(n.length), e = u[0][0], r = u[0][1], i = u[1][0], o = u[1][1]; return rX(a(n), u).cells.forEach(function (u, a) { var l = u.edges, c = u.site; (t[a] = l.length ? l.map(function (n) { var t = n.start(); return [t.x, t.y] }) : c.x >= e && c.x <= i && c.y >= r && c.y <= o ? [[e, o], [i, o], [i, r], [e, r]] : []).point = n[a] }), t } function a(n) { return n.map(function (n, t) { return { x: 1e-6 * Math.round(r(n, t) / 1e-6), y: 1e-6 * Math.round(i(n, t) / 1e-6), i: t } }) } return o.links = function (n) { return rX(a(n)).edges.filter(function (n) { return n.l && n.r }).map(function (t) { return { source: n[t.l.i], target: n[t.r.i] } }) }, o.triangles = function (n) { var t = []; return rX(a(n)).cells.forEach(function (e, r) { for (var i, u, o = e.site, a = e.edges.sort(rT), l = -1, c = a.length, f = a[c - 1].edge, s = f.l === o ? f.r : f.l; ++l < c;)i = f, u = s, s = (f = a[l].edge).l === o ? f.r : f.l, r < u.i && r < s.i && 0 > rQ(o, u, s) && t.push([n[r], n[u.i], n[s.i]]) }), t }, o.x = function (n) { return arguments.length ? (r = te(t = n), o) : t }, o.y = function (n) { return arguments.length ? (i = te(e = n), o) : e }, o.clipExtent = function (n) { return arguments.length ? (u = null == n ? rW : n, o) : u === rW ? null : u }, o.size = function (n) { return arguments.length ? o.clipExtent(n && [[0, 0], n]) : u === rW ? null : u && u[1] }, o }; var rW = [[-1e6, -1e6], [1e6, 1e6]]; function rQ(n, t, e) { return (n.x - e.x) * (t.y - n.y) - (n.x - t.x) * (e.y - n.y) } function rG(n) { return n.x } function rJ(n) { return n.y } function rK() { return { leaf: !0, nodes: [], point: null, x: null, y: null } } function it(t, e) { t = n.rgb(t), e = n.rgb(e); var r = t.r, i = t.g, u = t.b, o = e.r - r, a = e.g - i, l = e.b - u; return function (n) { return "#" + nW(Math.round(r + o * n)) + nW(Math.round(i + a * n)) + nW(Math.round(u + l * n)) } } function ie(n, t) { var e, r = {}, i = {}; for (e in n) e in t ? r[e] = ia(n[e], t[e]) : i[e] = n[e]; for (e in t) e in n || (i[e] = t[e]); return function (n) { for (e in r) i[e] = r[e](n); return i } } function ir(n, t) { return n = +n, t = +t, function (e) { return n * (1 - e) + t * e } } function ii(n, t) { var e, r, i, u = iu.lastIndex = io.lastIndex = 0, o = -1, a = [], l = []; for (n += "", t += ""; (e = iu.exec(n)) && (r = io.exec(t));)(i = r.index) > u && (i = t.slice(u, i), a[o] ? a[o] += i : a[++o] = i), (e = e[0]) === (r = r[0]) ? a[o] ? a[o] += r : a[++o] = r : (a[++o] = null, l.push({ i: o, x: ir(e, r) })), u = io.lastIndex; return u < t.length && (i = t.slice(u), a[o] ? a[o] += i : a[++o] = i), a.length < 2 ? l[0] ? (t = l[0].x, function (n) { return t(n) + "" }) : function () { return t } : (t = l.length, function (n) { for (var e, r = 0; r < t; ++r)a[(e = l[r]).i] = e.x(n); return a.join("") }) } n.geom.delaunay = function (t) { return n.geom.voronoi().triangles(t) }, n.geom.quadtree = function (n, t, e, r, i) { var u, o = r_, a = rp; if (u = arguments.length) return o = rG, a = rJ, 3 === u && (i = e, r = t, e = t = 0), l(n); function l(n) { var l, c, f, s, $, h, _, p, g, v = te(o), d = te(a); if (null != t) h = t, _ = e, p = r, g = i; else if (p = g = -(h = _ = 1 / 0), c = [], f = [], $ = n.length, u) for (s = 0; s < $; ++s)(l = n[s]).x < h && (h = l.x), l.y < _ && (_ = l.y), l.x > p && (p = l.x), l.y > g && (g = l.y), c.push(l.x), f.push(l.y); else for (s = 0; s < $; ++s) { var m = +v(l = n[s], s), x = +d(l, s); m < h && (h = m), x < _ && (_ = x), m > p && (p = m), x > g && (g = x), c.push(m), f.push(x) } var b = p - h, w = g - _; function k(n, t, e, r, i, u, o, a) { if (!(isNaN(e) || isNaN(r))) { if (n.leaf) { var l = n.x, c = n.y; if (null != l) { if (y(l - e) + y(c - r) < .01) S(n, t, e, r, i, u, o, a); else { var f = n.point; n.x = n.y = n.point = null, S(n, f, l, c, i, u, o, a), S(n, t, e, r, i, u, o, a) } } else n.x = e, n.y = r, n.point = t } else S(n, t, e, r, i, u, o, a) } } function S(n, t, e, r, i, u, o, a) { var l = (i + o) * .5, c = (u + a) * .5, f = e >= l, s = r >= c, $ = s << 1 | f; n.leaf = !1, n = n.nodes[$] || (n.nodes[$] = rK()), f ? i = l : o = l, s ? u = c : a = c, k(n, t, e, r, i, u, o, a) } b > w ? g = _ + b : p = h + w; var E = rK(); if (E.add = function (n) { k(E, n, +v(n, ++s), +d(n, s), h, _, p, g) }, E.visit = function (n) { (function n(t, e, r, i, u, o) { if (!t(e, r, i, u, o)) { var a = (r + u) * .5, l = (i + o) * .5, c = e.nodes; c[0] && n(t, c[0], r, i, a, l), c[1] && n(t, c[1], a, i, u, l), c[2] && n(t, c[2], r, l, a, o), c[3] && n(t, c[3], a, l, u, o) } })(n, E, h, _, p, g) }, E.find = function (n) { var t, e, r, i, u, o, a, l, c; return t = E, e = n[0], r = n[1], i = h, u = _, o = p, a = g, c = 1 / 0, function n(t, f, s, $, h) { if (!(f > o) && !(s > a) && !($ < i) && !(h < u)) { if (_ = t.point) { var _, p = e - t.x, g = r - t.y, v = p * p + g * g; if (v < c) { var d = Math.sqrt(c = v); i = e - d, u = r - d, o = e + d, a = r + d, l = _ } } for (var y = t.nodes, m = (f + $) * .5, x = (s + h) * .5, b = (r >= x) << 1 | e >= m, w = b + 4; b < w; ++b)if (t = y[3 & b]) switch (3 & b) { case 0: n(t, f, s, m, x); break; case 1: n(t, m, s, $, x); break; case 2: n(t, f, x, m, h); break; case 3: n(t, m, x, $, h) } } }(t, i, u, o, a), l }, s = -1, null == t) { for (; ++s < $;)k(E, n[s], c[s], f[s], h, _, p, g); --s } else n.forEach(E.add); return c = f = n = l = null, E } return l.x = function (n) { return arguments.length ? (o = n, l) : o }, l.y = function (n) { return arguments.length ? (a = n, l) : a }, l.extent = function (n) { return arguments.length ? (null == n ? t = e = r = i = null : (t = +n[0][0], e = +n[0][1], r = +n[1][0], i = +n[1][1]), l) : null == t ? null : [[t, e], [r, i]] }, l.size = function (n) { return arguments.length ? (null == n ? t = e = r = i = null : (t = e = 0, r = +n[0], i = +n[1]), l) : null == t ? null : [r - t, i - e] }, l }, n.interpolateRgb = it, n.interpolateObject = ie, n.interpolateNumber = ir, n.interpolateString = ii; var iu = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, io = RegExp(iu.source, "g"); function ia(t, e) { for (var r, i = n.interpolators.length; --i >= 0 && !(r = n.interpolators[i](t, e));); return r } function il(n, t) { var e, r = [], i = [], u = n.length, o = t.length, a = Math.min(n.length, t.length); for (e = 0; e < a; ++e)r.push(ia(n[e], t[e])); for (; e < u; ++e)i[e] = n[e]; for (; e < o; ++e)i[e] = t[e]; return function (n) { for (e = 0; e < a; ++e)i[e] = r[e](n); return i } } n.interpolate = ia, n.interpolators = [function (n, t) { var e = typeof t; return ("string" === e ? tt.has(t.toLowerCase()) || /^(#|rgb\(|hsl\()/i.test(t) ? it : ii : t instanceof nz ? it : Array.isArray(t) ? il : "object" === e && isNaN(t) ? ie : ir)(n, t) }], n.interpolateArray = il; var ic = function () { return q }, is = n.map({ linear: ic, poly: function n(t) { return function (n) { return Math.pow(n, t) } }, quad: function () { return ip }, cubic: function () { return ig }, sin: function () { return id }, exp: function () { return iy }, circle: function () { return im }, elastic: function n(t, e) { var r; return arguments.length < 2 && (e = .45), arguments.length ? r = e / n1 * Math.asin(1 / t) : (t = 1, r = e / 4), function (n) { return 1 + t * Math.pow(2, -10 * n) * Math.sin((n - r) * n1 / e) } }, back: function n(t) { return t || (t = 1.70158), function (n) { return n * n * ((t + 1) * n - t) } }, bounce: function () { return i0 } }), i$ = n.map({ in: q, out: ih, "in-out": i_, "out-in": function (n) { return i_(ih(n)) } }); function ih(n) { return function (t) { return 1 - n(1 - t) } } function i_(n) { return function (t) { return .5 * (t < .5 ? n(2 * t) : 2 - n(2 - 2 * t)) } } function ip(n) { return n * n } function ig(n) { return n * n * n } function iv(n) { if (n <= 0) return 0; if (n >= 1) return 1; var t = n * n, e = t * n; return 4 * (n < .5 ? e : 3 * (n - t) + e - .75) } function id(n) { return 1 - Math.cos(n * nb) } function iy(n) { return Math.pow(2, 10 * (n - 1)) } function im(n) { return 1 - Math.sqrt(1 - n * n) } function i0(n) { return n < 1 / 2.75 ? 7.5625 * n * n : n < 2 / 2.75 ? 7.5625 * (n -= 1.5 / 2.75) * n + .75 : n < 2.5 / 2.75 ? 7.5625 * (n -= 2.25 / 2.75) * n + .9375 : 7.5625 * (n -= 2.625 / 2.75) * n + .984375 } function ix(n, t) { return t -= n, function (e) { return Math.round(n + t * e) } } function i4(n) { var t, e, r, i = [n.a, n.b], u = [n.c, n.d], o = i1(i), a = i3(i, u), l = i1((t = u, e = i, r = -a, t[0] += r * e[0], t[1] += r * e[1], t)) || 0; i[0] * u[1] < u[0] * i[1] && (i[0] *= -1, i[1] *= -1, o *= -1, a *= -1), this.rotate = (o ? Math.atan2(i[1], i[0]) : Math.atan2(-u[0], u[1])) * n2, this.translate = [n.e, n.f], this.scale = [o, l], this.skew = l ? Math.atan2(a, l) * n2 : 0 } function i3(n, t) { return n[0] * t[0] + n[1] * t[1] } function i1(n) { var t = Math.sqrt(i3(n, n)); return t && (n[0] /= t, n[1] /= t), t } n.ease = function (n) { var e, r = n.indexOf("-"), i = r >= 0 ? n.slice(0, r) : n, u = r >= 0 ? n.slice(r + 1) : "in"; return i = is.get(i) || ic, e = (u = i$.get(u) || q)(i.apply(null, t.call(arguments, 1))), function (n) { return n <= 0 ? 0 : n >= 1 ? 1 : e(n) } }, n.interpolateHcl = function t(e, r) { e = n.hcl(e), r = n.hcl(r); var i = e.h, u = e.c, o = e.l, a = r.h - i, l = r.c - u, c = r.l - o; return isNaN(l) && (l = 0, u = isNaN(u) ? r.c : u), isNaN(a) ? (a = 0, i = isNaN(i) ? r.h : i) : a > 180 ? a -= 360 : a < -180 && (a += 360), function (n) { return nU(i + a * n, u + l * n, o + c * n) + "" } }, n.interpolateHsl = function t(e, r) { e = n.hsl(e), r = n.hsl(r); var i = e.h, u = e.s, o = e.l, a = r.h - i, l = r.s - u, c = r.l - o; return isNaN(l) && (l = 0, u = isNaN(u) ? r.s : u), isNaN(a) ? (a = 0, i = isNaN(i) ? r.h : i) : a > 180 ? a -= 360 : a < -180 && (a += 360), function (n) { return nR(i + a * n, u + l * n, o + c * n) + "" } }, n.interpolateLab = function t(e, r) { e = n.lab(e), r = n.lab(r); var i = e.l, u = e.a, o = e.b, a = r.l - i, l = r.a - u, c = r.b - o; return function (n) { return nF(i + a * n, u + l * n, o + c * n) + "" } }, n.interpolateRound = ix, n.transform = function (t) { var e = r.createElementNS(n.ns.prefix.svg, "g"); return (n.transform = function (n) { if (null != n) { e.setAttribute("transform", n); var t = e.transform.baseVal.consolidate() } return new i4(t ? t.matrix : i8) })(t) }, i4.prototype.toString = function () { return "translate(" + this.translate + ")rotate(" + this.rotate + ")skewX(" + this.skew + ")scale(" + this.scale + ")" }; var i8 = { a: 1, b: 0, c: 0, d: 1, e: 0, f: 0 }; function ib(n) { return n.length ? n.pop() + "," : "" } function iw(t, e) { var r, i, u, o, a, l, c, f, s = [], $ = []; return t = n.transform(t), e = n.transform(e), !function n(t, e, r, i) { if (t[0] !== e[0] || t[1] !== e[1]) { var u = r.push("translate(", null, ",", null, ")"); i.push({ i: u - 4, x: ir(t[0], e[0]) }, { i: u - 2, x: ir(t[1], e[1]) }) } else (e[0] || e[1]) && r.push("translate(" + e + ")") }(t.translate, e.translate, s, $), r = t.rotate, i = e.rotate, u = s, o = $, r !== i ? (r - i > 180 ? i += 360 : i - r > 180 && (r += 360), o.push({ i: u.push(ib(u) + "rotate(", null, ")") - 2, x: ir(r, i) })) : i && u.push(ib(u) + "rotate(" + i + ")"), a = t.skew, l = e.skew, c = s, f = $, a !== l ? f.push({ i: c.push(ib(c) + "skewX(", null, ")") - 2, x: ir(a, l) }) : l && c.push(ib(c) + "skewX(" + l + ")"), !function n(t, e, r, i) { if (t[0] !== e[0] || t[1] !== e[1]) { var u = r.push(ib(r) + "scale(", null, ",", null, ")"); i.push({ i: u - 4, x: ir(t[0], e[0]) }, { i: u - 2, x: ir(t[1], e[1]) }) } else (1 !== e[0] || 1 !== e[1]) && r.push(ib(r) + "scale(" + e + ")") }(t.scale, e.scale, s, $), t = e = null, function (n) { for (var t, e = -1, r = $.length; ++e < r;)s[(t = $[e]).i] = t.x(n); return s.join("") } } function i2(n, t) { return t = (t -= n = +n) || 1 / t, function (e) { return (e - n) / t } } function i5(n, t) { return t = (t -= n = +n) || 1 / t, function (e) { return Math.max(0, Math.min(1, (e - n) / t)) } } function i7(n) { for (var t = n.source, e = n.target, r = function n(t, e) { if (t === e) return t; for (var r = i6(t), i = i6(e), u = r.pop(), o = i.pop(), a = null; u === o;)a = u, u = r.pop(), o = i.pop(); return a }(t, e), i = [t]; t !== r;)t = t.parent, i.push(t); for (var u = i.length; e !== r;)i.splice(u, 0, e), e = e.parent; return i } function i6(n) { for (var t = [], e = n.parent; null != e;)t.push(n), n = e, e = e.parent; return t.push(n), t } function ik(n) { n.fixed |= 2 } function iS(n) { n.fixed &= -7 } function iE(n) { n.fixed |= 4, n.px = n.x, n.py = n.y } function iC(n) { n.fixed &= -5 } n.interpolateTransform = iw, n.layout = {}, n.layout.bundle = function () { return function (n) { for (var t = [], e = -1, r = n.length; ++e < r;)t.push(i7(n[e])); return t } }, n.layout.chord = function () { var t, e, r, i, u, o, a, l = {}, c = 0; function f() { var l, f, $, h, _, p = {}, g = [], v = n.range(i), d = []; for (t = [], e = [], l = 0, h = -1; ++h < i;) { for (f = 0, _ = -1; ++_ < i;)f += r[h][_]; g.push(f), d.push(n.range(i)), l += f } for (u && v.sort(function (n, t) { return u(g[n], g[t]) }), o && d.forEach(function (n, t) { n.sort(function (n, e) { return o(r[t][n], r[t][e]) }) }), l = (n1 - c * i) / l, f = 0, h = -1; ++h < i;) { for ($ = f, _ = -1; ++_ < i;) { var y = v[h], m = d[y][_], x = r[y][m], b = f, w = f += x * l; p[y + "-" + m] = { index: y, subindex: m, startAngle: b, endAngle: w, value: x } } e[y] = { index: y, startAngle: $, endAngle: f, value: g[y] }, f += c } for (h = -1; ++h < i;)for (_ = h - 1; ++_ < i;) { var k = p[h + "-" + _], S = p[_ + "-" + h]; (k.value || S.value) && t.push(k.value < S.value ? { source: S, target: k } : { source: k, target: S }) } a && s() } function s() { t.sort(function (n, t) { return a((n.source.value + n.target.value) / 2, (t.source.value + t.target.value) / 2) }) } return l.matrix = function (n) { return arguments.length ? (i = (r = n) && r.length, t = e = null, l) : r }, l.padding = function (n) { return arguments.length ? (c = n, t = e = null, l) : c }, l.sortGroups = function (n) { return arguments.length ? (u = n, t = e = null, l) : u }, l.sortSubgroups = function (n) { return arguments.length ? (o = n, t = null, l) : o }, l.sortChords = function (n) { return arguments.length ? (a = n, t && s(), l) : a }, l.chords = function () { return t || f(), t }, l.groups = function () { return e || f(), e }, l }, n.layout.force = function () { var t, e, r, i, u, o, a = {}, l = n.dispatch("start", "tick", "end"), c = [1, 1], f = .9, s = iA, $ = iL, h = -30, _ = iq, p = .1, g = .64, v = [], d = []; function y(n) { return function (t, e, r, i) { if (t.point !== n) { var u = t.cx - n.x, o = t.cy - n.y, a = i - e, l = u * u + o * o; if (a * a / g < l) { if (l < _) { var c = t.charge / l; n.px -= u * c, n.py -= o * c } return !0 } if (t.point && l && l < _) { var c = t.pointCharge / l; n.px -= u * c, n.py -= o * c } } return !t.charge } } function m(t) { t.px = n.event.x, t.py = n.event.y, a.resume() } return a.tick = function () { if ((r *= .99) < .005) return t = null, l.end({ type: "end", alpha: r = 0 }), !0; var e, a, s, $, _, g, m, x, b, w = v.length, k = d.length; for (a = 0; a < k; ++a)$ = (s = d[a]).source, (g = (x = (_ = s.target).x - $.x) * x + (b = _.y - $.y) * b) && (x *= g = r * u[a] * ((g = Math.sqrt(g)) - i[a]) / g, b *= g, _.x -= x * (m = $.weight + _.weight ? $.weight / ($.weight + _.weight) : .5), _.y -= b * m, $.x += x * (m = 1 - m), $.y += b * m); if ((m = r * p) && (x = c[0] / 2, b = c[1] / 2, a = -1, m)) for (; ++a < w;)s = v[a], s.x += (x - s.x) * m, s.y += (b - s.y) * m; if (h) for (function n(t, e, r) { var i = 0, u = 0; if (t.charge = 0, !t.leaf) for (var o, a = t.nodes, l = a.length, c = -1; ++c < l;)null != (o = a[c]) && (n(o, e, r), t.charge += o.charge, i += o.charge * o.cx, u += o.charge * o.cy); if (t.point) { t.leaf || (t.point.x += Math.random() - .5, t.point.y += Math.random() - .5); var f = e * r[t.point.index]; t.charge += t.pointCharge = f, i += f * t.point.x, u += f * t.point.y } t.cx = i / t.charge, t.cy = u / t.charge }(e = n.geom.quadtree(v), r, o), a = -1; ++a < w;)(s = v[a]).fixed || e.visit(y(s)); for (a = -1; ++a < w;)(s = v[a]).fixed ? (s.x = s.px, s.y = s.py) : (s.x -= (s.px - (s.px = s.x)) * f, s.y -= (s.py - (s.py = s.y)) * f); l.tick({ type: "tick", alpha: r }) }, a.nodes = function (n) { return arguments.length ? (v = n, a) : v }, a.links = function (n) { return arguments.length ? (d = n, a) : d }, a.size = function (n) { return arguments.length ? (c = n, a) : c }, a.linkDistance = function (n) { return arguments.length ? (s = "function" == typeof n ? n : +n, a) : s }, a.distance = a.linkDistance, a.linkStrength = function (n) { return arguments.length ? ($ = "function" == typeof n ? n : +n, a) : $ }, a.friction = function (n) { return arguments.length ? (f = +n, a) : f }, a.charge = function (n) { return arguments.length ? (h = "function" == typeof n ? n : +n, a) : h }, a.chargeDistance = function (n) { return arguments.length ? (_ = n * n, a) : Math.sqrt(_) }, a.gravity = function (n) { return arguments.length ? (p = +n, a) : p }, a.theta = function (n) { return arguments.length ? (g = n * n, a) : Math.sqrt(g) }, a.alpha = function (n) { return arguments.length ? (n = +n, r ? n > 0 ? r = n : (t.c = null, t.t = NaN, t = null, l.end({ type: "end", alpha: r = 0 })) : n > 0 && (l.start({ type: "start", alpha: r = n }), t = tf(a.tick)), a) : r }, a.start = function () { var n, t, e, r = v.length, l = d.length, f = c[0], _ = c[1]; for (n = 0; n < r; ++n)(e = v[n]).index = n, e.weight = 0; for (n = 0; n < l; ++n)"number" == typeof (e = d[n]).source && (e.source = v[e.source]), "number" == typeof e.target && (e.target = v[e.target]), ++e.source.weight, ++e.target.weight; for (n = 0; n < r; ++n)isNaN((e = v[n]).x) && (e.x = p("x", f)), isNaN(e.y) && (e.y = p("y", _)), isNaN(e.px) && (e.px = e.x), isNaN(e.py) && (e.py = e.y); if (i = [], "function" == typeof s) for (n = 0; n < l; ++n)i[n] = +s.call(this, d[n], n); else for (n = 0; n < l; ++n)i[n] = s; if (u = [], "function" == typeof $) for (n = 0; n < l; ++n)u[n] = +$.call(this, d[n], n); else for (n = 0; n < l; ++n)u[n] = $; if (o = [], "function" == typeof h) for (n = 0; n < r; ++n)o[n] = +h.call(this, v[n], n); else for (n = 0; n < r; ++n)o[n] = h; function p(e, i) { if (!t) { for (c = 0, t = Array(r); c < r; ++c)t[c] = []; for (c = 0; c < l; ++c) { var u = d[c]; t[u.source.index].push(u.target), t[u.target.index].push(u.source) } } for (var o, a = t[n], c = -1, f = a.length; ++c < f;)if (!isNaN(o = a[c][e])) return o; return Math.random() * i } return a.resume() }, a.resume = function () { return a.alpha(.1) }, a.stop = function () { return a.alpha(0) }, a.drag = function () { if (e || (e = n.behavior.drag().origin(q).on("dragstart.force", ik).on("drag.force", m).on("dragend.force", iS)), !arguments.length) return e; this.on("mouseover.force", iE).on("mouseout.force", iC).call(e) }, n.rebind(a, l, "on") }; var iA = 20, iL = 1, iq = 1 / 0; function iz(t, e) { return n.rebind(t, e, "sort", "children", "value"), t.nodes = t, t.links = iU, t } function iM(n, t) { for (var e, r, i = [n]; null != (n = i.pop());)if (t(n), (r = n.children) && (e = r.length)) for (; --e >= 0;)i.push(r[e]) } function iT(n, t) { for (var e = [n], r = []; null != (n = e.pop());)if (r.push(n), (u = n.children) && (i = u.length)) for (var i, u, o = -1; ++o < i;)e.push(u[o]); for (; null != (n = r.pop());)t(n) } function iR(n) { return n.children } function iN(n) { return n.value } function iP(n, t) { return t.value - n.value } function iU(t) { return n.merge(t.map(function (n) { return (n.children || []).map(function (t) { return { source: n, target: t } }) })) } n.layout.hierarchy = function () { var n = iP, t = iR, e = iN; function r(i) { var u, o, a, l, c = [i], f = []; for (i.depth = 0; null != (l = c.pop());)if (f.push(l), (o = t.call(r, l, l.depth)) && (u = o.length)) { for (; --u >= 0;)c.push(a = o[u]), a.parent = l, a.depth = l.depth + 1; e && (l.value = 0), l.children = o } else e && (l.value = +e.call(r, l, l.depth) || 0), delete l.children; return iT(i, function (t) { var r, i; n && (r = t.children) && r.sort(n), e && (i = t.parent) && (i.value += t.value) }), f } return r.sort = function (t) { return arguments.length ? (n = t, r) : n }, r.children = function (n) { return arguments.length ? (t = n, r) : t }, r.value = function (n) { return arguments.length ? (e = n, r) : e }, r.revalue = function (n) { return e && (iM(n, function (n) { n.children && (n.value = 0) }), iT(n, function (n) { var t; n.children || (n.value = +e.call(r, n, n.depth) || 0), (t = n.parent) && (t.value += n.value) })), n }, r }, n.layout.partition = function () { var t = n.layout.hierarchy(), e = [1, 1]; function r(n, r) { var i = t.call(this, n, r); return function n(t, e, r, i) { var u = t.children; if (t.x = e, t.y = t.depth * i, t.dx = r, t.dy = i, u && (o = u.length)) { var o, a, l, c = -1; for (r = t.value ? r / t.value : 0; ++c < o;)n(a = u[c], e, l = a.value * r, i), e += l } }(i[0], 0, e[0], e[1] / function n(t) { var e = t.children, r = 0; if (e && (i = e.length)) for (var i, u = -1; ++u < i;)r = Math.max(r, n(e[u])); return 1 + r }(i[0])), i } return r.size = function (n) { return arguments.length ? (e = n, r) : e }, iz(r, t) }, n.layout.pie = function () { var t = Number, e = ij, r = 0, i = n1, u = 0; function o(a) { var l, c = a.length, f = a.map(function (n, e) { return +t.call(o, n, e) }), s = +("function" == typeof r ? r.apply(this, arguments) : r), $ = ("function" == typeof i ? i.apply(this, arguments) : i) - s, h = Math.min(Math.abs($) / c, +("function" == typeof u ? u.apply(this, arguments) : u)), _ = h * ($ < 0 ? -1 : 1), p = n.sum(f), g = p ? ($ - c * _) / p : 0, v = n.range(c), d = []; return null != e && v.sort(e === ij ? function (n, t) { return f[t] - f[n] } : function (n, t) { return e(a[n], a[t]) }), v.forEach(function (n) { d[n] = { data: a[n], value: l = f[n], startAngle: s, endAngle: s += l * g + _, padAngle: h } }), d } return o.value = function (n) { return arguments.length ? (t = n, o) : t }, o.sort = function (n) { return arguments.length ? (e = n, o) : e }, o.startAngle = function (n) { return arguments.length ? (r = n, o) : r }, o.endAngle = function (n) { return arguments.length ? (i = n, o) : i }, o.padAngle = function (n) { return arguments.length ? (u = n, o) : u }, o }; var ij = {}; function iD(n) { return n.x } function iH(n) { return n.y } function iF(n, t, e) { n.y0 = t, n.y = e } n.layout.stack = function () { var t = q, e = iY, r = iZ, i = iF, u = iD, o = iH; function a(l, c) { if (!(h = l.length)) return l; var f = l.map(function (n, e) { return t.call(a, n, e) }), s = f.map(function (n) { return n.map(function (n, t) { return [u.call(a, n, t), o.call(a, n, t)] }) }), $ = e.call(a, s, c); f = n.permute(f, $), s = n.permute(s, $); var h, _, p, g, v = r.call(a, s, c), d = f[0].length; for (p = 0; p < d; ++p)for (i.call(a, f[0][p], g = v[p], s[0][p][1]), _ = 1; _ < h; ++_)i.call(a, f[_][p], g += s[_ - 1][p][1], s[_][p][1]); return l } return a.values = function (n) { return arguments.length ? (t = n, a) : t }, a.order = function (n) { return arguments.length ? (e = "function" == typeof n ? n : iI.get(n) || iY, a) : e }, a.offset = function (n) { return arguments.length ? (r = "function" == typeof n ? n : iO.get(n) || iZ, a) : r }, a.x = function (n) { return arguments.length ? (u = n, a) : u }, a.y = function (n) { return arguments.length ? (o = n, a) : o }, a.out = function (n) { return arguments.length ? (i = n, a) : i }, a }; var iI = n.map({ "inside-out": function (t) { var e, r, i = t.length, u = t.map(iV), o = t.map(i9), a = n.range(i).sort(function (n, t) { return u[n] - u[t] }), l = 0, c = 0, f = [], s = []; for (e = 0; e < i; ++e)r = a[e], l < c ? (l += o[r], f.push(r)) : (c += o[r], s.push(r)); return s.reverse().concat(f) }, reverse: function (t) { return n.range(t.length).reverse() }, default: iY }), iO = n.map({ silhouette: function (n) { var t, e, r, i = n.length, u = n[0].length, o = [], a = 0, l = []; for (e = 0; e < u; ++e) { for (t = 0, r = 0; t < i; t++)r += n[t][e][1]; r > a && (a = r), o.push(r) } for (e = 0; e < u; ++e)l[e] = (a - o[e]) / 2; return l }, wiggle: function (n) { var t, e, r, i, u, o, a, l, c, f = n.length, s = n[0], $ = s.length, h = []; for (e = 1, h[0] = l = c = 0; e < $; ++e) { for (t = 0, i = 0; t < f; ++t)i += n[t][e][1]; for (t = 0, u = 0, a = s[e][0] - s[e - 1][0]; t < f; ++t) { for (r = 0, o = (n[t][e][1] - n[t][e - 1][1]) / (2 * a); r < t; ++r)o += (n[r][e][1] - n[r][e - 1][1]) / a; u += o * n[t][e][1] } h[e] = l -= i ? u / i * a : 0, l < c && (c = l) } for (e = 0; e < $; ++e)h[e] -= c; return h }, expand: function (n) { var t, e, r, i = n.length, u = n[0].length, o = 1 / i, a = []; for (e = 0; e < u; ++e) { for (t = 0, r = 0; t < i; t++)r += n[t][e][1]; if (r) for (t = 0; t < i; t++)n[t][e][1] /= r; else for (t = 0; t < i; t++)n[t][e][1] = o } for (e = 0; e < u; ++e)a[e] = 0; return a }, zero: iZ }); function iY(t) { return n.range(t.length) } function iZ(n) { for (var t = -1, e = n[0].length, r = []; ++t < e;)r[t] = 0; return r } function iV(n) { for (var t, e = 1, r = 0, i = n[0][1], u = n.length; e < u; ++e)(t = n[e][1]) > i && (r = e, i = t); return r } function i9(n) { return n.reduce(iX, 0) } function iX(n, t) { return n + t[1] } function iB(n, t) { return iW(n, Math.ceil(Math.log(t.length) / Math.LN2 + 1)) } function iW(n, t) { for (var e = -1, r = +n[0], i = (n[1] - r) / t, u = []; ++e <= t;)u[e] = i * e + r; return u } function iQ(t) { return [n.min(t), n.max(t)] } function iG(n, t) { return n.value - t.value } function iJ(n, t) { var e = n._pack_next; n._pack_next = t, t._pack_prev = n, t._pack_next = e, e._pack_prev = t } function iK(n, t) { n._pack_next = t, t._pack_prev = n } function un(n, t) { var e = t.x - n.x, r = t.y - n.y, i = n.r + t.r; return .999 * i * i > e * e + r * r } function ut(n) { if ((t = n.children) && (l = t.length)) { var t, e, r, i, u, o, a, l, c = 1 / 0, f = -1 / 0, s = 1 / 0, $ = -1 / 0; if (t.forEach(ue), (e = t[0]).x = -e.r, e.y = 0, y(e), l > 1 && ((r = t[1]).x = r.r, r.y = 0, y(r), l > 2)) for (ui(e, r, i = t[2]), y(i), iJ(e, i), e._pack_prev = i, iJ(i, r), r = e._pack_next, u = 3; u < l; u++) { ui(e, r, i = t[u]); var h = 0, _ = 1, p = 1; for (o = r._pack_next; o !== r; o = o._pack_next, _++)if (un(o, i)) { h = 1; break } if (1 == h) for (a = e._pack_prev; a !== o._pack_prev && !un(a, i); a = a._pack_prev, p++); h ? (_ < p || _ == p && r.r < e.r ? iK(e, r = o) : iK(e = a, r), u--) : (iJ(e, i), r = i, y(i)) } var g = (c + f) / 2, v = (s + $) / 2, d = 0; for (u = 0; u < l; u++)i = t[u], i.x -= g, i.y -= v, d = Math.max(d, i.r + Math.sqrt(i.x * i.x + i.y * i.y)); n.r = d, t.forEach(ur) } function y(n) { c = Math.min(n.x - n.r, c), f = Math.max(n.x + n.r, f), s = Math.min(n.y - n.r, s), $ = Math.max(n.y + n.r, $) } } function ue(n) { n._pack_next = n._pack_prev = n } function ur(n) { delete n._pack_next, delete n._pack_prev } function ui(n, t, e) { var r = n.r + e.r, i = t.x - n.x, u = t.y - n.y; if (r && (i || u)) { var o = t.r + e.r, a = i * i + u * u; o *= o, r *= r; var l = .5 + (r - o) / (2 * a), c = Math.sqrt(Math.max(0, 2 * o * (r + a) - (r -= a) * r - o * o)) / (2 * a); e.x = n.x + l * i + c * u, e.y = n.y + l * u - c * i } else e.x = n.x + r, e.y = n.y } function uu(n, t) { return n.parent == t.parent ? 1 : 2 } function uo(n) { var t = n.children; return t.length ? t[0] : n.t } function ua(n) { var t, e = n.children; return (t = e.length) ? e[t - 1] : n.t } function ul(n, t, e) { var r = e / (t.i - n.i); t.c -= r, t.s += e, n.c += r, t.z += e, t.m += e } function uc(n, t, e) { return n.a.parent === t.parent ? n.a : e } function uf(n) { return { x: n.x, y: n.y, dx: n.dx, dy: n.dy } } function us(n, t) { var e = n.x + t[3], r = n.y + t[0], i = n.dx - t[1] - t[3], u = n.dy - t[0] - t[2]; return i < 0 && (e += i / 2, i = 0), u < 0 && (r += u / 2, u = 0), { x: e, y: r, dx: i, dy: u } } function u$(n) { var t = n[0], e = n[n.length - 1]; return t < e ? [t, e] : [e, t] } function uh(n) { return n.rangeExtent ? n.rangeExtent() : u$(n.range()) } function u_(n, t, e, r) { var i = e(n[0], n[1]), u = r(t[0], t[1]); return function (n) { return u(i(n)) } } function up(n, t) { var e, r = 0, i = n.length - 1, u = n[r], o = n[i]; return o < u && (e = r, r = i, i = e, e = u, u = o, o = e), n[r] = t.floor(u), n[i] = t.ceil(o), n } function ug(n) { return n ? { floor: function (t) { return Math.floor(t / n) * n }, ceil: function (t) { return Math.ceil(t / n) * n } } : uv } n.layout.histogram = function () { var t = !0, e = Number, r = iQ, i = iB; function u(u, o) { for (var a, l, c = [], f = u.map(e, this), s = r.call(this, f, o), $ = i.call(this, s, f, o), o = -1, h = f.length, _ = $.length - 1, p = t ? 1 : 1 / h; ++o < _;)(a = c[o] = []).dx = $[o + 1] - (a.x = $[o]), a.y = 0; if (_ > 0) for (o = -1; ++o < h;)(l = f[o]) >= s[0] && l <= s[1] && (a = c[n.bisect($, l, 1, _) - 1], a.y += p, a.push(u[o])); return c } return u.value = function (n) { return arguments.length ? (e = n, u) : e }, u.range = function (n) { return arguments.length ? (r = te(n), u) : r }, u.bins = function (n) { return arguments.length ? (i = "number" == typeof n ? function (t) { return iW(t, n) } : te(n), u) : i }, u.frequency = function (n) { return arguments.length ? (t = !!n, u) : t }, u }, n.layout.pack = function () { var t, e = n.layout.hierarchy().sort(iG), r = 0, i = [1, 1]; function u(n, u) { var o = e.call(this, n, u), a = o[0], l = i[0], c = i[1], f = null == t ? Math.sqrt : "function" == typeof t ? t : function () { return t }; if (a.x = a.y = 0, iT(a, function (n) { n.r = +f(n.value) }), iT(a, ut), r) { var s = r * (t ? 1 : Math.max(2 * a.r / l, 2 * a.r / c)) / 2; iT(a, function (n) { n.r += s }), iT(a, ut), iT(a, function (n) { n.r -= s }) } return function n(t, e, r, i) { var u = t.children; if (t.x = e += i * t.x, t.y = r += i * t.y, t.r *= i, u) for (var o = -1, a = u.length; ++o < a;)n(u[o], e, r, i) }(a, l / 2, c / 2, t ? 1 : 1 / Math.max(2 * a.r / l, 2 * a.r / c)), o } return u.size = function (n) { return arguments.length ? (i = n, u) : i }, u.radius = function (n) { return arguments.length ? (t = null == n || "function" == typeof n ? n : +n, u) : t }, u.padding = function (n) { return arguments.length ? (r = +n, u) : r }, iz(u, e) }, n.layout.tree = function () { var t = n.layout.hierarchy().sort(null).value(null), e = uu, r = [1, 1], i = null; function u(n, u) { var c = t.call(this, n, u), f = c[0], s = function n(t) { for (var e, r = { A: null, children: [t] }, i = [r]; null != (e = i.pop());)for (var u, o = e.children, a = 0, l = o.length; a < l; ++a)i.push((o[a] = u = { _: o[a], parent: e, children: (u = o[a].children) && u.slice() || [], A: null, a: null, z: 0, m: 0, c: 0, s: 0, t: null, i: a }).a = u); return r.children[0] }(f); if (iT(s, o), s.parent.m = -s.z, iM(s, a), i) iM(f, l); else { var $ = f, h = f, _ = f; iM(f, function (n) { n.x < $.x && ($ = n), n.x > h.x && (h = n), n.depth > _.depth && (_ = n) }); var p = e($, h) / 2 - $.x, g = r[0] / (h.x + e(h, $) / 2 + p), v = r[1] / (_.depth || 1); iM(f, function (n) { n.x = (n.x + p) * g, n.y = n.depth * v }) } return c } function o(n) { var t = n.children, r = n.parent.children, i = n.i ? r[n.i - 1] : null; if (t.length) { !function n(t) { for (var e, r = 0, i = 0, u = t.children, o = u.length; --o >= 0;)e = u[o], e.z += r, e.m += r, r += e.s + (i += e.c) }(n); var u = (t[0].z + t[t.length - 1].z) / 2; i ? (n.z = i.z + e(n._, i._), n.m = n.z - u) : n.z = u } else i && (n.z = i.z + e(n._, i._)); n.parent.A = function n(t, r, i) { if (r) { for (var u, o = t, a = t, l = r, c = o.parent.children[0], f = o.m, s = a.m, $ = l.m, h = c.m; l = ua(l), o = uo(o), l && o;)c = uo(c), (a = ua(a)).a = t, (u = l.z + $ - o.z - f + e(l._, o._)) > 0 && (ul(uc(l, t, i), t, u), f += u, s += u), $ += l.m, f += o.m, h += c.m, s += a.m; l && !ua(a) && (a.t = l, a.m += $ - s), o && !uo(c) && (c.t = o, c.m += f - h, i = t) } return i }(n, i, n.parent.A || r[0]) } function a(n) { n._.x = n.z + n.parent.m, n.m += n.parent.m } function l(n) { n.x *= r[0], n.y = n.depth * r[1] } return u.separation = function (n) { return arguments.length ? (e = n, u) : e }, u.size = function (n) { return arguments.length ? (i = null == (r = n) ? l : null, u) : i ? null : r }, u.nodeSize = function (n) { return arguments.length ? (i = null == (r = n) ? null : l, u) : i ? r : null }, iz(u, t) }, n.layout.cluster = function () { var t = n.layout.hierarchy().sort(null).value(null), e = uu, r = [1, 1], i = !1; function u(u, o) { var a, l = t.call(this, u, o), c = l[0], f = 0; iT(c, function (t) { var r, i, u = t.children; u && u.length ? (t.x = (r = u, r.reduce(function (n, t) { return n + t.x }, 0) / r.length), t.y = (i = u, 1 + n.max(i, function (n) { return n.y }))) : (t.x = a ? f += e(t, a) : 0, t.y = 0, a = t) }); var s = function n(t) { var e = t.children; return e && e.length ? n(e[0]) : t }(c), $ = function n(t) { var e, r = t.children; return r && (e = r.length) ? n(r[e - 1]) : t }(c), h = s.x - e(s, $) / 2, _ = $.x + e($, s) / 2; return iT(c, i ? function (n) { n.x = (n.x - c.x) * r[0], n.y = (c.y - n.y) * r[1] } : function (n) { n.x = (n.x - h) / (_ - h) * r[0], n.y = (1 - (c.y ? n.y / c.y : 1)) * r[1] }), l } return u.separation = function (n) { return arguments.length ? (e = n, u) : e }, u.size = function (n) { return arguments.length ? (i = null == (r = n), u) : i ? null : r }, u.nodeSize = function (n) { return arguments.length ? (i = null != (r = n), u) : i ? r : null }, iz(u, t) }, n.layout.treemap = function () { var t, e = n.layout.hierarchy(), r = Math.round, i = [1, 1], u = null, o = uf, a = !1, l = "squarify", c = .5 * (1 + Math.sqrt(5)); function f(n, t) { for (var e, r, i = -1, u = n.length; ++i < u;)r = (e = n[i]).value * (t < 0 ? 0 : t), e.area = isNaN(r) || r <= 0 ? 0 : r } function s(n) { var t = n.children; if (t && t.length) { var e, r, i, u = o(n), a = [], c = t.slice(), $ = 1 / 0, p = "slice" === l ? u.dx : "dice" === l ? u.dy : "slice-dice" === l ? 1 & n.depth ? u.dy : u.dx : Math.min(u.dx, u.dy); for (f(c, u.dx * u.dy / n.value), a.area = 0; (i = c.length) > 0;)a.push(e = c[i - 1]), a.area += e.area, "squarify" !== l || (r = h(a, p)) <= $ ? (c.pop(), $ = r) : (a.area -= a.pop().area, _(a, p, u, !1), p = Math.min(u.dx, u.dy), a.length = a.area = 0, $ = 1 / 0); a.length && (_(a, p, u, !0), a.length = a.area = 0), t.forEach(s) } } function $(n) { var t = n.children; if (t && t.length) { var e, r = o(n), i = t.slice(), u = []; for (f(i, r.dx * r.dy / n.value), u.area = 0; e = i.pop();)u.push(e), u.area += e.area, null != e.z && (_(u, e.z ? r.dx : r.dy, r, !i.length), u.length = u.area = 0); t.forEach($) } } function h(n, t) { for (var e, r = n.area, i = 0, u = 1 / 0, o = -1, a = n.length; ++o < a;)(e = n[o].area) && (e < u && (u = e), e > i && (i = e)); return r *= r, t *= t, r ? Math.max(t * i * c / r, r / (t * u * c)) : 1 / 0 } function _(n, t, e, i) { var u, o = -1, a = n.length, l = e.x, c = e.y, f = t ? r(n.area / t) : 0; if (t == e.dx) { for ((i || f > e.dy) && (f = e.dy); ++o < a;)(u = n[o]).x = l, u.y = c, u.dy = f, l += u.dx = Math.min(e.x + e.dx - l, f ? r(u.area / f) : 0); u.z = !0, u.dx += e.x + e.dx - l, e.y += f, e.dy -= f } else { for ((i || f > e.dx) && (f = e.dx); ++o < a;)(u = n[o]).x = l, u.y = c, u.dx = f, c += u.dy = Math.min(e.y + e.dy - c, f ? r(u.area / f) : 0); u.z = !1, u.dy += e.y + e.dy - c, e.x += f, e.dx -= f } } function p(n) { var r = t || e(n), u = r[0]; return u.x = u.y = 0, u.value ? (u.dx = i[0], u.dy = i[1]) : u.dx = u.dy = 0, t && e.revalue(u), f([u], u.dx * u.dy / u.value), (t ? $ : s)(u), a && (t = r), r } return p.size = function (n) { return arguments.length ? (i = n, p) : i }, p.padding = function (n) { var t; return arguments.length ? (o = null == (u = n) ? uf : "function" == (t = typeof n) ? function t(e) { var r = n.call(p, e, e.depth); return null == r ? uf(e) : us(e, "number" == typeof r ? [r, r, r, r] : r) } : ("number" === t && (n = [n, n, n, n]), function t(e) { return us(e, n) }), p) : u }, p.round = function (n) { return arguments.length ? (r = n ? Math.round : Number, p) : r != Number }, p.sticky = function (n) { return arguments.length ? (a = n, t = null, p) : a }, p.ratio = function (n) { return arguments.length ? (c = n, p) : c }, p.mode = function (n) { return arguments.length ? (l = n + "", p) : l }, iz(p, e) }, n.random = { normal: function (n, t) { var e = arguments.length; return e < 2 && (t = 1), e < 1 && (n = 0), function () { var e, r, i; do i = (e = 2 * Math.random() - 1) * e + (r = 2 * Math.random() - 1) * r; while (!i || i > 1); return n + t * e * Math.sqrt(-2 * Math.log(i) / i) } }, logNormal: function () { var t = n.random.normal.apply(n, arguments); return function () { return Math.exp(t()) } }, bates: function (t) { var e = n.random.irwinHall(t); return function () { return e() / t } }, irwinHall: function (n) { return function () { for (var t = 0, e = 0; e < n; e++)t += Math.random(); return t } } }, n.scale = {}; var uv = { floor: q, ceil: q }; function ud(t, e, r, i) { var u = [], o = [], a = 0, l = Math.min(t.length, e.length) - 1; for (t[l] < t[0] && (t = t.slice().reverse(), e = e.slice().reverse()); ++a <= l;)u.push(r(t[a - 1], t[a])), o.push(i(e[a - 1], e[a])); return function (e) { var r = n.bisect(t, e, 1, l) - 1; return o[r](u[r](e)) } } function uy(t, e) { return n.rebind(t, e, "range", "rangeRound", "interpolate", "clamp") } function um(n, t) { return up(n, ug(u0(n, t)[2])), up(n, ug(u0(n, t)[2])), n } function u0(n, t) { null == t && (t = 10); var e = u$(n), r = e[1] - e[0], i = Math.pow(10, Math.floor(Math.log(r / t) / Math.LN10)), u = t / r * i; return u <= .15 ? i *= 10 : u <= .35 ? i *= 5 : u <= .75 && (i *= 2), e[0] = Math.ceil(e[0] / i) * i, e[1] = Math.floor(e[1] / i) * i + .5 * i, e[2] = i, e } function ux(t, e) { return n.range.apply(n, u0(t, e)) } function u4(t, e, r) { var i = u0(t, e); if (r) { var u, o, a, l = tg.exec(r); if (l.shift(), "s" === l[8]) { var c = n.formatPrefix(Math.max(y(i[0]), y(i[1]))); return l[7] || (l[7] = "." + u1(c.scale(i[2]))), l[8] = "f", r = n.format(l.join("")), function (n) { return r(c.scale(n)) + c.symbol } } l[7] || (l[7] = "." + (u = l[8], o = i, a = u1(o[2]), u in u3 ? Math.abs(a - u1(Math.max(y(o[0]), y(o[1])))) + +("e" !== u) : a - ("%" === u) * 2)), r = l.join("") } else r = ",." + u1(i[2]) + "f"; return n.format(r) } n.scale.linear = function () { return function n(t, e, r, i) { var u, o; function a() { var n = Math.min(t.length, e.length) > 2 ? ud : u_, a = i ? i5 : i2; return u = n(t, e, a, r), o = n(e, t, a, ia), l } function l(n) { return u(n) } return l.invert = function (n) { return o(n) }, l.domain = function (n) { return arguments.length ? (t = n.map(Number), a()) : t }, l.range = function (n) { return arguments.length ? (e = n, a()) : e }, l.rangeRound = function (n) { return l.range(n).interpolate(ix) }, l.clamp = function (n) { return arguments.length ? (i = n, a()) : i }, l.interpolate = function (n) { return arguments.length ? (r = n, a()) : r }, l.ticks = function (n) { return ux(t, n) }, l.tickFormat = function (n, e) { return u4(t, n, e) }, l.nice = function (n) { return um(t, n), a() }, l.copy = function () { return n(t, e, r, i) }, a() }([0, 1], [0, 1], ia, !1) }; var u3 = { s: 1, g: 1, p: 1, r: 1, e: 1 }; function u1(n) { return -Math.floor(Math.log(n) / Math.LN10 + .01) } n.scale.log = function () { return function t(e, r, i, u) { function o(n) { return (i ? Math.log(n < 0 ? 0 : n) : -Math.log(n > 0 ? 0 : -n)) / Math.log(r) } function a(n) { return i ? Math.pow(r, n) : -Math.pow(r, -n) } function l(n) { return e(o(n)) } return l.invert = function (n) { return a(e.invert(n)) }, l.domain = function (n) { return arguments.length ? (i = n[0] >= 0, e.domain((u = n.map(Number)).map(o)), l) : u }, l.base = function (n) { return arguments.length ? (r = +n, e.domain(u.map(o)), l) : r }, l.nice = function () { var n = up(u.map(o), i ? Math : ub); return e.domain(n), u = n.map(a), l }, l.ticks = function () { var n = u$(u), t = [], e = n[0], l = n[1], c = Math.floor(o(e)), f = Math.ceil(o(l)), s = r % 1 ? 2 : r; if (isFinite(f - c)) { if (i) { for (; c < f; c++)for (var $ = 1; $ < s; $++)t.push(a(c) * $); t.push(a(c)) } else for (t.push(a(c)); c++ < f;)for (var $ = s - 1; $ > 0; $--)t.push(a(c) * $); for (c = 0; t[c] < e; c++); for (f = t.length; t[f - 1] > l; f--); t = t.slice(c, f) } return t }, l.tickFormat = function (t, e) { if (!arguments.length) return u8; arguments.length < 2 ? e = u8 : "function" != typeof e && (e = n.format(e)); var i = Math.max(1, r * t / l.ticks().length); return function (n) { var t = n / a(Math.round(o(n))); return t * r < r - .5 && (t *= r), t <= i ? e(n) : "" } }, l.copy = function () { return t(e.copy(), r, i, u) }, uy(l, e) }(n.scale.linear().domain([0, 1]), 10, !0, [1, 10]) }; var u8 = n.format(".0e"), ub = { floor: function (n) { return -Math.ceil(-n) }, ceil: function (n) { return -Math.floor(-n) } }; function uw(n) { return function (t) { return t < 0 ? -Math.pow(-t, n) : Math.pow(t, n) } } n.scale.pow = function () { return function n(t, e, r) { var i = uw(e), u = uw(1 / e); function o(n) { return t(i(n)) } return o.invert = function (n) { return u(t.invert(n)) }, o.domain = function (n) { return arguments.length ? (t.domain((r = n.map(Number)).map(i)), o) : r }, o.ticks = function (n) { return ux(r, n) }, o.tickFormat = function (n, t) { return u4(r, n, t) }, o.nice = function (n) { return o.domain(um(r, n)) }, o.exponent = function (n) { return arguments.length ? (i = uw(e = n), u = uw(1 / e), t.domain(r.map(i)), o) : e }, o.copy = function () { return n(t.copy(), e, r) }, uy(o, t) }(n.scale.linear(), 1, [0, 1]) }, n.scale.sqrt = function () { return n.scale.pow().exponent(.5) }, n.scale.ordinal = function () { return function t(e, r) { var i, u, o; function a(n) { return u[((i.get(n) || ("range" === r.t ? i.set(n, e.push(n)) : NaN)) - 1) % u.length] } function l(t, r) { return n.range(e.length).map(function (n) { return t + r * n }) } return a.domain = function (n) { if (!arguments.length) return e; e = [], i = new x; for (var t, u = -1, o = n.length; ++u < o;)i.has(t = n[u]) || i.set(t, e.push(t)); return a[r.t].apply(a, r.a) }, a.range = function (n) { return arguments.length ? (u = n, o = 0, r = { t: "range", a: arguments }, a) : u }, a.rangePoints = function (n, t) { arguments.length < 2 && (t = 0); var i = n[0], c = n[1], f = e.length < 2 ? (i = (i + c) / 2, 0) : (c - i) / (e.length - 1 + t); return u = l(i + f * t / 2, f), o = 0, r = { t: "rangePoints", a: arguments }, a }, a.rangeRoundPoints = function (n, t) { arguments.length < 2 && (t = 0); var i = n[0], c = n[1], f = e.length < 2 ? (i = c = Math.round((i + c) / 2), 0) : (c - i) / (e.length - 1 + t) | 0; return u = l(i + Math.round(f * t / 2 + (c - i - (e.length - 1 + t) * f) / 2), f), o = 0, r = { t: "rangeRoundPoints", a: arguments }, a }, a.rangeBands = function (n, t, i) { arguments.length < 2 && (t = 0), arguments.length < 3 && (i = t); var c = n[1] < n[0], f = n[c - 0], s = (n[1 - c] - f) / (e.length - t + 2 * i); return u = l(f + s * i, s), c && u.reverse(), o = s * (1 - t), r = { t: "rangeBands", a: arguments }, a }, a.rangeRoundBands = function (n, t, i) { arguments.length < 2 && (t = 0), arguments.length < 3 && (i = t); var c = n[1] < n[0], f = n[c - 0], s = n[1 - c], $ = Math.floor((s - f) / (e.length - t + 2 * i)); return u = l(f + Math.round((s - f - (e.length - t) * $) / 2), $), c && u.reverse(), o = Math.round($ * (1 - t)), r = { t: "rangeRoundBands", a: arguments }, a }, a.rangeBand = function () { return o }, a.rangeExtent = function () { return u$(r.a[0]) }, a.copy = function () { return t(e, r) }, a.domain(e) }([], { t: "range", a: [[]] }) }, n.scale.category10 = function () { return n.scale.ordinal().range(u2) }, n.scale.category20 = function () { return n.scale.ordinal().range(u5) }, n.scale.category20b = function () { return n.scale.ordinal().range(u7) }, n.scale.category20c = function () { return n.scale.ordinal().range(u6) }; var u2 = [2062260, 16744206, 2924588, 14034728, 9725885, 9197131, 14907330, 8355711, 12369186, 1556175].map(nX), u5 = [2062260, 11454440, 16744206, 16759672, 2924588, 10018698, 14034728, 16750742, 9725885, 12955861, 9197131, 12885140, 14907330, 16234194, 8355711, 13092807, 12369186, 14408589, 1556175, 10410725].map(nX), u7 = [3750777, 5395619, 7040719, 10264286, 6519097, 9216594, 11915115, 13556636, 9202993, 12426809, 15186514, 15190932, 8666169, 11356490, 14049643, 15177372, 8077683, 10834324, 13528509, 14589654].map(nX), u6 = [3244733, 7057110, 10406625, 13032431, 15095053, 16616764, 16625259, 16634018, 3253076, 7652470, 10607003, 13101504, 7695281, 10394312, 12369372, 14342891, 6513507, 9868950, 12434877, 14277081].map(nX); function uk() { return 0 } n.scale.quantile = function () { return function t(e, r) { var i; function u() { var t = 0, u = r.length; for (i = []; ++t < u;)i[t - 1] = n.quantile(e, t / u); return o } function o(t) { if (!isNaN(t = +t)) return r[n.bisect(i, t)] } return o.domain = function (n) { return arguments.length ? (e = n.map(_).filter(p).sort(h), u()) : e }, o.range = function (n) { return arguments.length ? (r = n, u()) : r }, o.quantiles = function () { return i }, o.invertExtent = function (n) { return (n = r.indexOf(n)) < 0 ? [NaN, NaN] : [n > 0 ? i[n - 1] : e[0], n < i.length ? i[n] : e[e.length - 1]] }, o.copy = function () { return t(e, r) }, u() }([], []) }, n.scale.quantize = function () { return function n(t, e, r) { var i, u; function o(n) { return r[Math.max(0, Math.min(u, Math.floor(i * (n - t))))] } function a() { return i = r.length / (e - t), u = r.length - 1, o } return o.domain = function (n) { return arguments.length ? (t = +n[0], e = +n[n.length - 1], a()) : [t, e] }, o.range = function (n) { return arguments.length ? (r = n, a()) : r }, o.invertExtent = function (n) { return [n = (n = r.indexOf(n)) < 0 ? NaN : n / i + t, n + 1 / i] }, o.copy = function () { return n(t, e, r) }, a() }(0, 1, [0, 1]) }, n.scale.threshold = function () { return function t(e, r) { function i(t) { if (t <= t) return r[n.bisect(e, t)] } return i.domain = function (n) { return arguments.length ? (e = n, i) : e }, i.range = function (n) { return arguments.length ? (r = n, i) : r }, i.invertExtent = function (n) { return [e[(n = r.indexOf(n)) - 1], e[n]] }, i.copy = function () { return t(e, r) }, i }([.5], [0, 1]) }, n.scale.identity = function () { return function n(t) { function e(n) { return +n } return e.invert = e, e.domain = e.range = function (n) { return arguments.length ? (t = n.map(e), e) : t }, e.ticks = function (n) { return ux(t, n) }, e.tickFormat = function (n, e) { return u4(t, n, e) }, e.copy = function () { return n(t) }, e }([0, 1]) }, n.svg = {}, n.svg.arc = function () { var n = uE, t = uC, e = uk, r = uS, i = uA, u = uL, o = uq; function a() { var a = Math.max(0, +n.apply(this, arguments)), c = Math.max(0, +t.apply(this, arguments)), f = i.apply(this, arguments) - nb, s = u.apply(this, arguments) - nb, $ = Math.abs(s - f), h = f > s ? 0 : 1; if (c < a && (_ = c, c = a, a = _), $ >= n8) return l(c, h) + (a ? l(a, 1 - h) : "") + "Z"; var _, p, g, v, d, y, m, x, b, w, k, S, E = 0, C = 0, A = []; if ((v = (+o.apply(this, arguments) || 0) / 2) && (g = r === uS ? Math.sqrt(a * a + c * c) : +r.apply(this, arguments), h || (C *= -1), c && (C = nk(g / c * Math.sin(v))), a && (E = nk(g / a * Math.sin(v)))), c) { d = c * Math.cos(f + C), y = c * Math.sin(f + C), m = c * Math.cos(s - C), x = c * Math.sin(s - C); var L = Math.abs(s - f - 2 * C) <= n3 ? 0 : 1; if (C && uz(d, y, m, x) === h ^ L) { var q = (f + s) / 2; d = c * Math.cos(q), y = c * Math.sin(q), m = x = null } } else d = y = 0; if (a) { b = a * Math.cos(s - E), w = a * Math.sin(s - E), k = a * Math.cos(f + E), S = a * Math.sin(f + E); var z = Math.abs(f - s + 2 * E) <= n3 ? 0 : 1; if (E && uz(b, w, k, S) === 1 - h ^ z) { var M = (f + s) / 2; b = a * Math.cos(M), w = a * Math.sin(M), k = S = null } } else b = w = 0; if ($ > 1e-6 && (_ = Math.min(Math.abs(c - a) / 2, +e.apply(this, arguments))) > .001) { p = a < c ^ h ? 0 : 1; var T = _, R = _; if ($ < n3) { var N = null == k ? [b, w] : null == m ? [d, y] : rm([d, y], [k, S], [m, x], [b, w]), P = d - N[0], U = y - N[1], j = m - N[0], D = x - N[1], H = 1 / Math.sin(Math.acos((P * j + U * D) / (Math.sqrt(P * P + U * U) * Math.sqrt(j * j + D * D))) / 2), F = Math.sqrt(N[0] * N[0] + N[1] * N[1]); R = Math.min(_, (a - F) / (H - 1)), T = Math.min(_, (c - F) / (H + 1)) } if (null != m) { var I = uM(null == k ? [b, w] : [k, S], [d, y], c, T, h), O = uM([m, x], [b, w], c, T, h); _ === T ? A.push("M", I[0], "A", T, ",", T, " 0 0,", p, " ", I[1], "A", c, ",", c, " 0 ", 1 - h ^ uz(I[1][0], I[1][1], O[1][0], O[1][1]), ",", h, " ", O[1], "A", T, ",", T, " 0 0,", p, " ", O[0]) : A.push("M", I[0], "A", T, ",", T, " 0 1,", p, " ", O[0]) } else A.push("M", d, ",", y); if (null != k) { var Y = uM([d, y], [k, S], a, -R, h), Z = uM([b, w], null == m ? [d, y] : [m, x], a, -R, h); _ === R ? A.push("L", Z[0], "A", R, ",", R, " 0 0,", p, " ", Z[1], "A", a, ",", a, " 0 ", h ^ uz(Z[1][0], Z[1][1], Y[1][0], Y[1][1]), ",", 1 - h, " ", Y[1], "A", R, ",", R, " 0 0,", p, " ", Y[0]) : A.push("L", Z[0], "A", R, ",", R, " 0 0,", p, " ", Y[0]) } else A.push("L", b, ",", w) } else A.push("M", d, ",", y), null != m && A.push("A", c, ",", c, " 0 ", L, ",", h, " ", m, ",", x), A.push("L", b, ",", w), null != k && A.push("A", a, ",", a, " 0 ", z, ",", 1 - h, " ", k, ",", S); return A.push("Z"), A.join("") } function l(n, t) { return "M0," + n + "A" + n + "," + n + " 0 1," + t + " 0," + -n + "A" + n + "," + n + " 0 1," + t + " 0," + n } return a.innerRadius = function (t) { return arguments.length ? (n = te(t), a) : n }, a.outerRadius = function (n) { return arguments.length ? (t = te(n), a) : t }, a.cornerRadius = function (n) { return arguments.length ? (e = te(n), a) : e }, a.padRadius = function (n) { return arguments.length ? (r = n == uS ? uS : te(n), a) : r }, a.startAngle = function (n) { return arguments.length ? (i = te(n), a) : i }, a.endAngle = function (n) { return arguments.length ? (u = te(n), a) : u }, a.padAngle = function (n) { return arguments.length ? (o = te(n), a) : o }, a.centroid = function () { var e = (+n.apply(this, arguments) + +t.apply(this, arguments)) / 2, r = (+i.apply(this, arguments) + +u.apply(this, arguments)) / 2 - nb; return [Math.cos(r) * e, Math.sin(r) * e] }, a }; var uS = "auto"; function uE(n) { return n.innerRadius } function uC(n) { return n.outerRadius } function uA(n) { return n.startAngle } function uL(n) { return n.endAngle } function uq(n) { return n && n.padAngle } function uz(n, t, e, r) { return (n - e) * t - (t - r) * n > 0 ? 0 : 1 } function uM(n, t, e, r, i) { var u = n[0] - t[0], o = n[1] - t[1], a = (i ? r : -r) / Math.sqrt(u * u + o * o), l = a * o, c = -a * u, f = n[0] + l, s = n[1] + c, $ = t[0] + l, h = t[1] + c, _ = (f + $) / 2, p = (s + h) / 2, g = $ - f, v = h - s, d = g * g + v * v, y = e - r, m = f * h - $ * s, x = (v < 0 ? -1 : 1) * Math.sqrt(Math.max(0, y * y * d - m * m)), b = (m * v - g * x) / d, w = (-m * g - v * x) / d, k = (m * v + g * x) / d, S = (-m * g + v * x) / d, E = b - _, C = w - p, A = k - _, L = S - p; return E * E + C * C > A * A + L * L && (b = k, w = S), [[b - l, w - c], [b * e / y, w * e / y]] } function uT(n) { var t = r_, e = rp, r = es, i = uN, u = i.key, o = .7; function a(u) { var a, l = [], c = [], f = -1, s = u.length, $ = te(t), h = te(e); function _() { l.push("M", i(n(c), o)) } for (; ++f < s;)r.call(this, a = u[f], f) ? c.push([+$.call(this, a, f), +h.call(this, a, f)]) : c.length && (_(), c = []); return c.length && _(), l.length ? l.join("") : null } return a.x = function (n) { return arguments.length ? (t = n, a) : t }, a.y = function (n) { return arguments.length ? (e = n, a) : e }, a.defined = function (n) { return arguments.length ? (r = n, a) : r }, a.interpolate = function (n) { return arguments.length ? (u = "function" == typeof n ? i = n : (i = uR.get(n) || uN).key, a) : u }, a.tension = function (n) { return arguments.length ? (o = n, a) : o }, a } n.svg.line = function () { return uT(q) }; var uR = n.map({ linear: uN, "linear-closed": uP, step: function n(t) { for (var e = 0, r = t.length, i = t[0], u = [i[0], ",", i[1]]; ++e < r;)u.push("H", (i[0] + (i = t[e])[0]) / 2, "V", i[1]); return r > 1 && u.push("H", i[0]), u.join("") }, "step-before": uU, "step-after": uj, basis: uF, "basis-open": function n(t) { if (t.length < 4) return uN(t); for (var e, r = [], i = -1, u = t.length, o = [0], a = [0]; ++i < 3;)e = t[i], o.push(e[0]), a.push(e[1]); for (r.push(uI(uZ, o) + "," + uI(uZ, a)), --i; ++i < u;)e = t[i], o.shift(), o.push(e[0]), a.shift(), a.push(e[1]), uV(r, o, a); return r.join("") }, "basis-closed": function n(t) { for (var e, r, i = -1, u = t.length, o = u + 4, a = [], l = []; ++i < 4;)r = t[i % u], a.push(r[0]), l.push(r[1]); for (e = [uI(uZ, a), ",", uI(uZ, l)], --i; ++i < o;)r = t[i % u], a.shift(), a.push(r[0]), l.shift(), l.push(r[1]), uV(e, a, l); return e.join("") }, bundle: function n(t, e) { var r = t.length - 1; if (r) for (var i, u, o = t[0][0], a = t[0][1], l = t[r][0] - o, c = t[r][1] - a, f = -1; ++f <= r;)i = t[f], u = f / r, i[0] = e * i[0] + (1 - e) * (o + u * l), i[1] = e * i[1] + (1 - e) * (a + u * c); return uF(t) }, cardinal: function n(t, e) { return t.length < 3 ? uN(t) : t[0] + uD(t, uH(t, e)) }, "cardinal-open": function n(t, e) { return t.length < 4 ? uN(t) : t[1] + uD(t.slice(1, -1), uH(t, e)) }, "cardinal-closed": function n(t, e) { return t.length < 3 ? uP(t) : t[0] + uD((t.push(t[0]), t), uH([t[t.length - 2]].concat(t, [t[1]]), e)) }, monotone: function n(t) { return t.length < 3 ? uN(t) : t[0] + uD(t, function n(t) { for (var e, r, i, u, o = [], a = function n(t) { for (var e = 0, r = t.length - 1, i = [], u = t[0], o = t[1], a = i[0] = u9(u, o); ++e < r;)i[e] = (a + (a = u9(u = o, o = t[e + 1]))) / 2; return i[e] = a, i }(t), l = -1, c = t.length - 1; ++l < c;)1e-6 > y(e = u9(t[l], t[l + 1])) ? a[l] = a[l + 1] = 0 : (u = (r = a[l] / e) * r + (i = a[l + 1] / e) * i) > 9 && (u = 3 * e / Math.sqrt(u), a[l] = u * r, a[l + 1] = u * i); for (l = -1; ++l <= c;)u = (t[Math.min(c, l + 1)][0] - t[Math.max(0, l - 1)][0]) / (6 * (1 + a[l] * a[l])), o.push([u || 0, a[l] * u || 0]); return o }(t)) } }); function uN(n) { return n.length > 1 ? n.join("L") : n + "Z" } function uP(n) { return n.join("L") + "Z" } function uU(n) { for (var t = 0, e = n.length, r = n[0], i = [r[0], ",", r[1]]; ++t < e;)i.push("V", (r = n[t])[1], "H", r[0]); return i.join("") } function uj(n) { for (var t = 0, e = n.length, r = n[0], i = [r[0], ",", r[1]]; ++t < e;)i.push("H", (r = n[t])[0], "V", r[1]); return i.join("") } function uD(n, t) { if (t.length < 1 || n.length != t.length && n.length != t.length + 2) return uN(n); var e = n.length != t.length, r = "", i = n[0], u = n[1], o = t[0], a = o, l = 1; if (e && (r += "Q" + (u[0] - 2 * o[0] / 3) + "," + (u[1] - 2 * o[1] / 3) + "," + u[0] + "," + u[1], i = n[1], l = 2), t.length > 1) { a = t[1], u = n[l], l++, r += "C" + (i[0] + o[0]) + "," + (i[1] + o[1]) + "," + (u[0] - a[0]) + "," + (u[1] - a[1]) + "," + u[0] + "," + u[1]; for (var c = 2; c < t.length; c++, l++)u = n[l], a = t[c], r += "S" + (u[0] - a[0]) + "," + (u[1] - a[1]) + "," + u[0] + "," + u[1] } if (e) { var f = n[l]; r += "Q" + (u[0] + 2 * a[0] / 3) + "," + (u[1] + 2 * a[1] / 3) + "," + f[0] + "," + f[1] } return r } function uH(n, t) { for (var e, r = [], i = (1 - t) / 2, u = n[0], o = n[1], a = 1, l = n.length; ++a < l;)e = u, u = o, r.push([i * ((o = n[a])[0] - e[0]), i * (o[1] - e[1])]); return r } function uF(n) { if (n.length < 3) return uN(n); var t = 1, e = n.length, r = n[0], i = r[0], u = r[1], o = [i, i, i, (r = n[1])[0]], a = [u, u, u, r[1]], l = [i, ",", u, "L", uI(uZ, o), ",", uI(uZ, a)]; for (n.push(n[e - 1]); ++t <= e;)r = n[t], o.shift(), o.push(r[0]), a.shift(), a.push(r[1]), uV(l, o, a); return n.pop(), l.push("L", r), l.join("") } function uI(n, t) { return n[0] * t[0] + n[1] * t[1] + n[2] * t[2] + n[3] * t[3] } uR.forEach(function (n, t) { t.key = n, t.closed = /-closed$/.test(n) }); var uO = [0, 2 / 3, 1 / 3, 0], uY = [0, 1 / 3, 2 / 3, 0], uZ = [0, 1 / 6, 2 / 3, 1 / 6]; function uV(n, t, e) { n.push("C", uI(uO, t), ",", uI(uO, e), ",", uI(uY, t), ",", uI(uY, e), ",", uI(uZ, t), ",", uI(uZ, e)) } function u9(n, t) { return (t[1] - n[1]) / (t[0] - n[0]) } function uX(n) { for (var t, e, r, i = -1, u = n.length; ++i < u;)e = (t = n[i])[0], r = t[1] - nb, t[0] = e * Math.cos(r), t[1] = e * Math.sin(r); return n } function uB(n) { var t = r_, e = r_, r = 0, i = rp, u = es, o = uN, a = o.key, l = o, c = "L", f = .7; function s(a) { var s, $, h, _ = [], p = [], g = [], v = -1, d = a.length, y = te(t), m = te(r), x = t === e ? function () { return $ } : te(e), b = r === i ? function () { return h } : te(i); function w() { _.push("M", o(n(g), f), c, l(n(p.reverse()), f), "Z") } for (; ++v < d;)u.call(this, s = a[v], v) ? (p.push([$ = +y.call(this, s, v), h = +m.call(this, s, v)]), g.push([+x.call(this, s, v), +b.call(this, s, v)])) : p.length && (w(), p = [], g = []); return p.length && w(), _.length ? _.join("") : null } return s.x = function (n) { return arguments.length ? (t = e = n, s) : e }, s.x0 = function (n) { return arguments.length ? (t = n, s) : t }, s.x1 = function (n) { return arguments.length ? (e = n, s) : e }, s.y = function (n) { return arguments.length ? (r = i = n, s) : i }, s.y0 = function (n) { return arguments.length ? (r = n, s) : r }, s.y1 = function (n) { return arguments.length ? (i = n, s) : i }, s.defined = function (n) { return arguments.length ? (u = n, s) : u }, s.interpolate = function (n) { return arguments.length ? (a = "function" == typeof n ? o = n : (o = uR.get(n) || uN).key, l = o.reverse || o, c = o.closed ? "M" : "L", s) : a }, s.tension = function (n) { return arguments.length ? (f = n, s) : f }, s } function uW(n) { return n.radius } function uQ(n) { return [n.x, n.y] } function uG() { return 64 } function uJ() { return "circle" } function uK(n) { var t = Math.sqrt(n / n3); return "M0," + t + "A" + t + "," + t + " 0 1,1 0," + -t + "A" + t + "," + t + " 0 1,1 0," + t + "Z" } n.svg.line.radial = function () { var n = uT(uX); return n.radius = n.x, delete n.x, n.angle = n.y, delete n.y, n }, uU.reverse = uj, uj.reverse = uU, n.svg.area = function () { return uB(q) }, n.svg.area.radial = function () { var n = uB(uX); return n.radius = n.x, delete n.x, n.innerRadius = n.x0, delete n.x0, n.outerRadius = n.x1, delete n.x1, n.angle = n.y, delete n.y, n.startAngle = n.y0, delete n.y0, n.endAngle = n.y1, delete n.y1, n }, n.svg.chord = function () { var n = rn, t = rt, e = uW, r = uA, i = uL; function u(e, r) { var i, u, l, c, f, s, $, h, _, p, g, v, d, y, m = o(this, n, e, r), x = o(this, t, e, r); return "M" + m.p0 + a(m.r, m.p1, m.a1 - m.a0) + ((i = m, u = x, i.a0 == u.a0 && i.a1 == u.a1) ? (l = m.r, c = m.p1, f = m.r, s = m.p0, "Q 0,0 " + s) : ($ = m.r, h = m.p1, _ = x.r, p = x.p0, "Q 0,0 " + p + a(x.r, x.p1, x.a1 - x.a0) + (g = x.r, v = x.p1, d = m.r, y = m.p0, "Q 0,0 " + y))) + "Z" } function o(n, t, u, o) { var a = t.call(n, u, o), l = e.call(n, a, o), c = r.call(n, a, o) - nb, f = i.call(n, a, o) - nb; return { r: l, a0: c, a1: f, p0: [l * Math.cos(c), l * Math.sin(c)], p1: [l * Math.cos(f), l * Math.sin(f)] } } function a(n, t, e) { return "A" + n + "," + n + " 0 " + +(e > n3) + ",1 " + t } function l(n, t, e, r) { return "Q 0,0 " + r } return u.radius = function (n) { return arguments.length ? (e = te(n), u) : e }, u.source = function (t) { return arguments.length ? (n = te(t), u) : n }, u.target = function (n) { return arguments.length ? (t = te(n), u) : t }, u.startAngle = function (n) { return arguments.length ? (r = te(n), u) : r }, u.endAngle = function (n) { return arguments.length ? (i = te(n), u) : i }, u }, n.svg.diagonal = function () { var n = rn, t = rt, e = uQ; function r(r, i) { var u = n.call(this, r, i), o = t.call(this, r, i), a = (u.y + o.y) / 2, l = [u, { x: u.x, y: a }, { x: o.x, y: a }, o]; return "M" + (l = l.map(e))[0] + "C" + l[1] + " " + l[2] + " " + l[3] } return r.source = function (t) { return arguments.length ? (n = te(t), r) : n }, r.target = function (n) { return arguments.length ? (t = te(n), r) : t }, r.projection = function (n) { return arguments.length ? (e = n, r) : e }, r }, n.svg.diagonal.radial = function () { var t = n.svg.diagonal(), e = uQ, r = t.projection; return t.projection = function (n) { var t; return arguments.length ? r((t = e = n, function () { var n = t.apply(this, arguments), e = n[0], r = n[1] - nb; return [e * Math.cos(r), e * Math.sin(r)] })) : e }, t }, n.svg.symbol = function () { var n = uJ, t = uG; function e(e, r) { return (on.get(n.call(this, e, r)) || uK)(t.call(this, e, r)) } return e.type = function (t) { return arguments.length ? (n = te(t), e) : n }, e.size = function (n) { return arguments.length ? (t = te(n), e) : t }, e }; var on = n.map({ circle: uK, cross: function (n) { var t = Math.sqrt(n / 5) / 2; return "M" + -3 * t + "," + -t + "H" + -t + "V" + -3 * t + "H" + t + "V" + -t + "H" + 3 * t + "V" + t + "H" + t + "V" + 3 * t + "H" + -t + "V" + t + "H" + -3 * t + "Z" }, diamond: function (n) { var t = Math.sqrt(n / (2 * oe)), e = t * oe; return "M0," + -t + "L" + e + ",0 0," + t + " " + -e + ",0Z" }, square: function (n) { var t = Math.sqrt(n) / 2; return "M" + -t + "," + -t + "L" + t + "," + -t + " " + t + "," + t + " " + -t + "," + t + "Z" }, "triangle-down": function (n) { var t = Math.sqrt(n / ot), e = t * ot / 2; return "M0," + e + "L" + t + "," + -e + " " + -t + "," + -e + "Z" }, "triangle-up": function (n) { var t = Math.sqrt(n / ot), e = t * ot / 2; return "M0," + -e + "L" + t + "," + e + " " + -t + "," + e + "Z" } }); n.svg.symbolTypes = on.keys(); var ot = Math.sqrt(3), oe = Math.tan(30 * nw); V.transition = function (n) { for (var t, e, r = oo || ++oc, i = o$(n), u = [], o = oa || { time: Date.now(), ease: iv, delay: 0, duration: 250 }, a = -1, l = this.length; ++a < l;) { u.push(t = []); for (var c = this[a], f = -1, s = c.length; ++f < s;)(e = c[f]) && oh(e, f, i, r, o), t.push(e) } return ou(u, i, r) }, V.interrupt = function (n) { return this.each(null == n ? or : oi(o$(n))) }; var or = oi(o$()); function oi(n) { return function () { var t, e, r; (t = this[n]) && (r = t[e = t.active]) && (r.timer.c = null, r.timer.t = NaN, --t.count ? delete t[e] : delete this[n], t.active += .5, r.event && r.event.interrupt.call(this, this.__data__, r.index)) } } function ou(n, t, e) { return F(n, ol), n.namespace = t, n.id = e, n } var oo, oa, ol = [], oc = 0; function of(n, t, e, r) { var i = n.id, u = n.namespace; return nf(n, "function" == typeof e ? function (n, o, a) { n[u][i].tween.set(t, r(e.call(n, n.__data__, o, a))) } : (e = r(e), function (n) { n[u][i].tween.set(t, e) })) } function os(n) { return null == n && (n = ""), function () { this.textContent = n } } function o$(n) { return null == n ? "__transition__" : "__transition_" + n + "__" } function oh(n, t, e, r, i) { var u, o, a, l, c, f = n[e] || (n[e] = { active: 0, count: 0 }), s = f[r]; function $(e) { var i = f.active, $ = f[i]; for (var _ in $ && ($.timer.c = null, $.timer.t = NaN, --f.count, delete f[i], $.event && $.event.interrupt.call(n, n.__data__, $.index)), f) if (+_ < r) { var p = f[_]; p.timer.c = null, p.timer.t = NaN, --f.count, delete f[_] } o.c = h, tf(function () { return o.c && h(e || 1) && (o.c = null, o.t = NaN), 1 }, 0, u), f.active = r, s.event && s.event.start.call(n, n.__data__, t), c = [], s.tween.forEach(function (e, r) { (r = r.call(n, n.__data__, t)) && c.push(r) }), l = s.ease, a = s.duration } function h(i) { for (var u = i / a, o = l(u), $ = c.length; $ > 0;)c[--$].call(n, o); if (u >= 1) return s.event && s.event.end.call(n, n.__data__, t), --f.count ? delete f[r] : delete n[e], 1 } !s && (o = tf(function n(t) { var e = s.delay; if (o.t = e + u, e <= t) return $(t - e); o.c = $ }, 0, u = i.time), s = f[r] = { tween: new x, time: u, timer: o, delay: i.delay, duration: i.duration, ease: i.ease, index: t }, i = null, ++f.count) } ol.call = V.call, ol.empty = V.empty, ol.node = V.node, ol.size = V.size, n.transition = function (t, e) { return t && t.transition ? oo ? t.transition(e) : t : n.selection().transition(t) }, n.transition.prototype = ol, ol.select = function (n) { var t, e, r, i = this.id, u = this.namespace, o = []; n = X(n); for (var a = -1, l = this.length; ++a < l;) { o.push(t = []); for (var c = this[a], f = -1, s = c.length; ++f < s;)(r = c[f]) && (e = n.call(r, r.__data__, f, a)) ? ("__data__" in r && (e.__data__ = r.__data__), oh(e, f, u, i, r[u][i]), t.push(e)) : t.push(null) } return ou(o, u, i) }, ol.selectAll = function (n) { var t, e, r, i, u, o = this.id, a = this.namespace, l = []; n = B(n); for (var c = -1, f = this.length; ++c < f;)for (var s = this[c], $ = -1, h = s.length; ++$ < h;)if (r = s[$]) { u = r[a][o], e = n.call(r, r.__data__, $, c), l.push(t = []); for (var _ = -1, p = e.length; ++_ < p;)(i = e[_]) && oh(i, _, a, o, u), t.push(i) } return ou(l, a, o) }, ol.filter = function (n) { var t, e, r, i = []; "function" != typeof n && (n = nl(n)); for (var u = 0, o = this.length; u < o; u++) { i.push(t = []); for (var e = this[u], a = 0, l = e.length; a < l; a++)(r = e[a]) && n.call(r, r.__data__, a, u) && t.push(r) } return ou(i, this.namespace, this.id) }, ol.tween = function (n, t) { var e = this.id, r = this.namespace; return arguments.length < 2 ? this.node()[r][e].tween.get(n) : nf(this, null == t ? function (t) { t[r][e].tween.remove(n) } : function (i) { i[r][e].tween.set(n, t) }) }, ol.attr = function (t, e) { if (arguments.length < 2) { for (e in t) this.attr(e, t[e]); return this } var r = "transform" == t ? iw : ia, i = n.ns.qualify(t); function u() { this.removeAttribute(i) } function o() { this.removeAttributeNS(i.space, i.local) } return of(this, "attr." + t, e, i.local ? function n(t) { return null == t ? o : (t += "", function () { var n, e = this.getAttributeNS(i.space, i.local); return e !== t && (n = r(e, t), function (t) { this.setAttributeNS(i.space, i.local, n(t)) }) }) } : function n(t) { return null == t ? u : (t += "", function () { var n, e = this.getAttribute(i); return e !== t && (n = r(e, t), function (t) { this.setAttribute(i, n(t)) }) }) }) }, ol.attrTween = function (t, e) { var r = n.ns.qualify(t); return this.tween("attr." + t, r.local ? function n(t, i) { var u = e.call(this, t, i, this.getAttributeNS(r.space, r.local)); return u && function (n) { this.setAttributeNS(r.space, r.local, u(n)) } } : function n(t, i) { var u = e.call(this, t, i, this.getAttribute(r)); return u && function (n) { this.setAttribute(r, u(n)) } }) }, ol.style = function (n, t, e) { var r = arguments.length; if (r < 3) { if ("string" != typeof n) { for (e in r < 2 && (t = ""), n) this.style(e, n[e], t); return this } e = "" } function i() { this.style.removeProperty(n) } return of(this, "style." + n, t, function t(r) { return null == r ? i : (r += "", function () { var t, i = u(this).getComputedStyle(this, null).getPropertyValue(n); return i !== r && (t = ia(i, r), function (r) { this.style.setProperty(n, t(r), e) }) }) }) }, ol.styleTween = function (n, t, e) { return arguments.length < 3 && (e = ""), this.tween("style." + n, function r(i, o) { var a = t.call(this, i, o, u(this).getComputedStyle(this, null).getPropertyValue(n)); return a && function (t) { this.style.setProperty(n, a(t), e) } }) }, ol.text = function (n) { return of(this, "text", n, os) }, ol.remove = function () { var n = this.namespace; return this.each("end.transition", function () { var t; this[n].count < 2 && (t = this.parentNode) && t.removeChild(this) }) }, ol.ease = function (t) { var e = this.id, r = this.namespace; return arguments.length < 1 ? this.node()[r][e].ease : ("function" != typeof t && (t = n.ease.apply(n, arguments)), nf(this, function (n) { n[r][e].ease = t })) }, ol.delay = function (n) { var t = this.id, e = this.namespace; return arguments.length < 1 ? this.node()[e][t].delay : nf(this, "function" == typeof n ? function (r, i, u) { r[e][t].delay = +n.call(r, r.__data__, i, u) } : (n = +n, function (r) { r[e][t].delay = n })) }, ol.duration = function (n) { var t = this.id, e = this.namespace; return arguments.length < 1 ? this.node()[e][t].duration : nf(this, "function" == typeof n ? function (r, i, u) { r[e][t].duration = Math.max(1, n.call(r, r.__data__, i, u)) } : (n = Math.max(1, n), function (r) { r[e][t].duration = n })) }, ol.each = function (t, e) { var r = this.id, i = this.namespace; if (arguments.length < 2) { var u = oa, o = oo; try { oo = r, nf(this, function (n, e, u) { oa = n[i][r], t.call(n, n.__data__, e, u) }) } finally { oa = u, oo = o } } else nf(this, function (u) { var o = u[i][r]; (o.event || (o.event = n.dispatch("start", "end", "interrupt"))).on(t, e) }); return this }, ol.transition = function () { for (var n, t, e, r, i = this.id, u = ++oc, o = this.namespace, a = [], l = 0, c = this.length; l < c; l++) { a.push(n = []); for (var t = this[l], f = 0, s = t.length; f < s; f++)(e = t[f]) && (r = e[o][i], oh(e, f, o, u, { time: r.time, ease: r.ease, delay: r.delay + r.duration, duration: r.duration })), n.push(e) } return ou(a, o, u) }, n.svg.axis = function () { var t, r = n.scale.linear(), i = o_, u = 6, o = 6, a = 3, l = [10], c = null; function f(e) { e.each(function () { var e, f = n.select(this), s = this.__chart__ || r, $ = this.__chart__ = r.copy(), h = null == c ? $.ticks ? $.ticks.apply($, l) : $.domain() : c, _ = null == t ? $.tickFormat ? $.tickFormat.apply($, l) : q : t, p = f.selectAll(".tick").data(h, $), g = p.enter().insert("g", ".domain").attr("class", "tick").style("opacity", 1e-6), v = n.transition(p.exit()).style("opacity", 1e-6).remove(), d = n.transition(p.order()).style("opacity", 1), y = Math.max(u, 0) + a, m = uh($), x = f.selectAll(".domain").data([0]), b = (x.enter().append("path").attr("class", "domain"), n.transition(x)); g.append("line"), g.append("text"); var w, k, S, E, C = g.select("line"), A = d.select("line"), L = p.select("text").text(_), z = g.select("text"), M = d.select("text"), T = "top" === i || "left" === i ? -1 : 1; if ("bottom" === i || "top" === i ? (e = og, w = "x", S = "y", k = "x2", E = "y2", L.attr("dy", T < 0 ? "0em" : ".71em").style("text-anchor", "middle"), b.attr("d", "M" + m[0] + "," + T * o + "V0H" + m[1] + "V" + T * o)) : (e = ov, w = "y", S = "x", k = "y2", E = "x2", L.attr("dy", ".32em").style("text-anchor", T < 0 ? "end" : "start"), b.attr("d", "M" + T * o + "," + m[0] + "H0V" + m[1] + "H" + T * o)), C.attr(E, T * u), z.attr(S, T * y), A.attr(k, 0).attr(E, T * u), M.attr(w, 0).attr(S, T * y), $.rangeBand) { var R = $, N = R.rangeBand() / 2; s = $ = function (n) { return R(n) + N } } else s.rangeBand ? s = $ : v.call(e, $, s); g.call(e, s, $), d.call(e, $, $) }) } return f.scale = function (n) { return arguments.length ? (r = n, f) : r }, f.orient = function (n) { return arguments.length ? (i = n in op ? n + "" : o_, f) : i }, f.ticks = function () { return arguments.length ? (l = e(arguments), f) : l }, f.tickValues = function (n) { return arguments.length ? (c = n, f) : c }, f.tickFormat = function (n) { return arguments.length ? (t = n, f) : t }, f.tickSize = function (n) { var t = arguments.length; return t ? (u = +n, o = +arguments[t - 1], f) : u }, f.innerTickSize = function (n) { return arguments.length ? (u = +n, f) : u }, f.outerTickSize = function (n) { return arguments.length ? (o = +n, f) : o }, f.tickPadding = function (n) { return arguments.length ? (a = +n, f) : a }, f.tickSubdivide = function () { return arguments.length && f }, f }; var o_ = "bottom", op = { top: 1, right: 1, bottom: 1, left: 1 }; function og(n, t, e) { n.attr("transform", function (n) { var r = t(n); return "translate(" + (isFinite(r) ? r : e(n)) + ",0)" }) } function ov(n, t, e) { n.attr("transform", function (n) { var r = t(n); return "translate(0," + (isFinite(r) ? r : e(n)) + ")" }) } n.svg.brush = function () { var t, e, r = D($, "brushstart", "brush", "brushend"), i = null, o = null, a = [0, 0], l = [0, 0], c = !0, f = !0, s = oy[0]; function $(t) { t.each(function () { var t = n.select(this).style("pointer-events", "all").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)").on("mousedown.brush", g).on("touchstart.brush", g), e = t.selectAll(".background").data([0]); e.enter().append("rect").attr("class", "background").style("visibility", "hidden").style("cursor", "crosshair"), t.selectAll(".extent").data([0]).enter().append("rect").attr("class", "extent").style("cursor", "move"); var r = t.selectAll(".resize").data(s, q); r.exit().remove(), r.enter().append("g").attr("class", function (n) { return "resize " + n }).style("cursor", function (n) { return od[n] }).append("rect").attr("x", function (n) { return /[ew]$/.test(n) ? -3 : null }).attr("y", function (n) { return /^[ns]/.test(n) ? -3 : null }).attr("width", 6).attr("height", 6).style("visibility", "hidden"), r.style("display", $.empty() ? "none" : null); var u, a = n.transition(t), l = n.transition(e); i && (u = uh(i), l.attr("x", u[0]).attr("width", u[1] - u[0]), _(a)), o && (u = uh(o), l.attr("y", u[0]).attr("height", u[1] - u[0]), p(a)), h(a) }) } function h(n) { n.selectAll(".resize").attr("transform", function (n) { return "translate(" + a[+/e$/.test(n)] + "," + l[+/^s/.test(n)] + ")" }) } function _(n) { n.select(".extent").attr("x", a[0]), n.selectAll(".extent,.n>rect,.s>rect").attr("width", a[1] - a[0]) } function p(n) { n.select(".extent").attr("y", l[0]), n.selectAll(".extent,.e>rect,.w>rect").attr("height", l[1] - l[0]) } function g() { var s, g, v = this, d = n.select(n.event.target), y = r.of(v, arguments), m = n.select(v), x = d.datum(), b = !/^(n|s)$/.test(x) && i, w = !/^(e|w)$/.test(x) && o, k = d.classed("extent"), S = ny(v), E = n.mouse(v), C = n.select(u(v)).on("keydown.brush", function t() { 32 == n.event.keyCode && (k || (s = null, E[0] -= a[1], E[1] -= l[1], k = 2), U()) }).on("keyup.brush", function t() { 32 == n.event.keyCode && 2 == k && (E[0] += a[1], E[1] += l[1], k = 0, U()) }); if (n.event.changedTouches ? C.on("touchmove.brush", q).on("touchend.brush", M) : C.on("mousemove.brush", q).on("mouseup.brush", M), m.interrupt().selectAll("*").interrupt(), k) E[0] = a[0] - E[0], E[1] = l[0] - E[1]; else if (x) { var A = +/w$/.test(x), L = +/^n/.test(x); g = [a[1 - A] - E[0], l[1 - L] - E[1]], E[0] = a[A], E[1] = l[L] } else n.event.altKey && (s = E.slice()); function q() { var t = n.mouse(v), e = !1; g && (t[0] += g[0], t[1] += g[1]), k || (n.event.altKey ? (s || (s = [(a[0] + a[1]) / 2, (l[0] + l[1]) / 2]), E[0] = a[+(t[0] < s[0])], E[1] = l[+(t[1] < s[1])]) : s = null), b && z(t, i, 0) && (_(m), e = !0), w && z(t, o, 1) && (p(m), e = !0), e && (h(m), y({ type: "brush", mode: k ? "move" : "resize" })) } function z(n, r, i) { var u, o, $ = uh(r), h = $[0], _ = $[1], p = E[i], g = i ? l : a, v = g[1] - g[0]; if (k && (h -= p, _ -= v + p), u = (i ? f : c) ? Math.max(h, Math.min(_, n[i])) : n[i], k ? o = (u += p) + v : (s && (p = Math.max(h, Math.min(_, 2 * s[i] - u))), p < u ? (o = u, u = p) : o = p), g[0] != u || g[1] != o) return i ? e = null : t = null, g[0] = u, g[1] = o, !0 } function M() { q(), m.style("pointer-events", "all").selectAll(".resize").style("display", $.empty() ? "none" : null), n.select("body").style("cursor", null), C.on("mousemove.brush", null).on("mouseup.brush", null).on("touchmove.brush", null).on("touchend.brush", null).on("keydown.brush", null).on("keyup.brush", null), S(), y({ type: "brushend" }) } m.style("pointer-events", "none").selectAll(".resize").style("display", null), n.select("body").style("cursor", d.style("cursor")), y({ type: "brushstart" }), q() } return $.event = function (i) { i.each(function () { var i = r.of(this, arguments), u = { x: a, y: l, i: t, j: e }, o = this.__chart__ || u; this.__chart__ = u, oo ? n.select(this).transition().each("start.brush", function () { t = o.i, e = o.j, a = o.x, l = o.y, i({ type: "brushstart" }) }).tween("brush:brush", function () { var n = il(a, u.x), r = il(l, u.y); return t = e = null, function (t) { a = u.x = n(t), l = u.y = r(t), i({ type: "brush", mode: "resize" }) } }).each("end.brush", function () { t = u.i, e = u.j, i({ type: "brush", mode: "resize" }), i({ type: "brushend" }) }) : (i({ type: "brushstart" }), i({ type: "brush", mode: "resize" }), i({ type: "brushend" })) }) }, $.x = function (n) { return arguments.length ? (s = oy[!(i = n) << 1 | !o], $) : i }, $.y = function (n) { return arguments.length ? (s = oy[!i << 1 | !(o = n)], $) : o }, $.clamp = function (n) { return arguments.length ? (i && o ? (c = !!n[0], f = !!n[1]) : i ? c = !!n : o && (f = !!n), $) : i && o ? [c, f] : i ? c : o ? f : null }, $.extent = function (n) { var r, u, c, f, s; return arguments.length ? (i && (r = n[0], u = n[1], o && (r = r[0], u = u[0]), t = [r, u], i.invert && (r = i(r), u = i(u)), u < r && (s = r, r = u, u = s), (r != a[0] || u != a[1]) && (a = [r, u])), o && (c = n[0], f = n[1], i && (c = c[1], f = f[1]), e = [c, f], o.invert && (c = o(c), f = o(f)), f < c && (s = c, c = f, f = s), (c != l[0] || f != l[1]) && (l = [c, f])), $) : (i && (t ? (r = t[0], u = t[1]) : (r = a[0], u = a[1], i.invert && (r = i.invert(r), u = i.invert(u)), u < r && (s = r, r = u, u = s))), o && (e ? (c = e[0], f = e[1]) : (c = l[0], f = l[1], o.invert && (c = o.invert(c), f = o.invert(f)), f < c && (s = c, c = f, f = s))), i && o ? [[r, c], [u, f]] : i ? [r, u] : o && [c, f]) }, $.clear = function () { return $.empty() || (a = [0, 0], l = [0, 0], t = e = null), $ }, $.empty = function () { return !!i && a[0] == a[1] || !!o && l[0] == l[1] }, n.rebind($, r, "on") }; var od = { n: "ns-resize", e: "ew-resize", s: "ns-resize", w: "ew-resize", nw: "nwse-resize", ne: "nesw-resize", se: "nwse-resize", sw: "nesw-resize" }, oy = [["n", "e", "s", "w", "nw", "ne", "se", "sw"], ["e", "w"], ["n", "s"], []], om = ty.format = tj.timeFormat, o0 = om.utc, ox = o0("%Y-%m-%dT%H:%M:%S.%LZ"); function o4(n) { return n.toISOString() } function o3(t, e, r) { function i(n) { return t(n) } function u(t, r) { var i = (t[1] - t[0]) / r, u = n.bisect(o8, i); return u == o8.length ? [e.year, u0(t.map(function (n) { return n / 31536e6 }), r)[2]] : u ? e[i / o8[u - 1] < o8[u] / i ? u - 1 : u] : [o2, u0(t, r)[2]] } return i.invert = function (n) { return o1(t.invert(n)) }, i.domain = function (n) { return arguments.length ? (t.domain(n), i) : t.domain().map(o1) }, i.nice = function (n, t) { var e = i.domain(), r = u$(e), o = null == n ? u(r, 10) : "number" == typeof n && u(r, n); function a(e) { return !isNaN(e) && !n.range(e, o1(+e + 1), t).length } return o && (n = o[0], t = o[1]), i.domain(up(e, t > 1 ? { floor: function (t) { for (; a(t = n.floor(t));)t = o1(t - 1); return t }, ceil: function (t) { for (; a(t = n.ceil(t));)t = o1(+t + 1); return t } } : n)) }, i.ticks = function (n, t) { var e = u$(i.domain()), r = null == n ? u(e, 10) : "number" == typeof n ? u(e, n) : !n.range && [{ range: n }, t]; return r && (n = r[0], t = r[1]), n.range(e[0], o1(+e[1] + 1), t < 1 ? 1 : t) }, i.tickFormat = function () { return r }, i.copy = function () { return o3(t.copy(), e, r) }, uy(i, t) } function o1(n) { return new Date(n) } om.iso = Date.prototype.toISOString && +new Date("2000-01-01T00:00:00.000Z") ? o4 : ox, o4.parse = function (n) { var t = new Date(n); return isNaN(t) ? null : t }, o4.toString = ox.toString, ty.second = t4(function (n) { return new tm(1e3 * Math.floor(n / 1e3)) }, function (n, t) { n.setTime(n.getTime() + 1e3 * Math.floor(t)) }, function (n) { return n.getSeconds() }), ty.seconds = ty.second.range, ty.seconds.utc = ty.second.utc.range, ty.minute = t4(function (n) { return new tm(6e4 * Math.floor(n / 6e4)) }, function (n, t) { n.setTime(n.getTime() + 6e4 * Math.floor(t)) }, function (n) { return n.getMinutes() }), ty.minutes = ty.minute.range, ty.minutes.utc = ty.minute.utc.range, ty.hour = t4(function (n) { var t = n.getTimezoneOffset() / 60; return new tm((Math.floor(n / 36e5 - t) + t) * 36e5) }, function (n, t) { n.setTime(n.getTime() + 36e5 * Math.floor(t)) }, function (n) { return n.getHours() }), ty.hours = ty.hour.range, ty.hours.utc = ty.hour.utc.range, ty.month = t4(function (n) { return (n = ty.day(n)).setDate(1), n }, function (n, t) { n.setMonth(n.getMonth() + t) }, function (n) { return n.getMonth() }), ty.months = ty.month.range, ty.months.utc = ty.month.utc.range; var o8 = [1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6], ob = [[ty.second, 1], [ty.second, 5], [ty.second, 15], [ty.second, 30], [ty.minute, 1], [ty.minute, 5], [ty.minute, 15], [ty.minute, 30], [ty.hour, 1], [ty.hour, 3], [ty.hour, 6], [ty.hour, 12], [ty.day, 1], [ty.day, 2], [ty.week, 1], [ty.month, 1], [ty.month, 3], [ty.year, 1]], ow = om.multi([[".%L", function (n) { return n.getMilliseconds() }], [":%S", function (n) { return n.getSeconds() }], ["%I:%M", function (n) { return n.getMinutes() }], ["%I %p", function (n) { return n.getHours() }], ["%a %d", function (n) { return n.getDay() && 1 != n.getDate() }], ["%b %d", function (n) { return 1 != n.getDate() }], ["%B", function (n) { return n.getMonth() }], ["%Y", es]]), o2 = { range: function (t, e, r) { return n.range(Math.ceil(t / r) * r, +e, r).map(o1) }, floor: q, ceil: q }; ob.year = ty.year, ty.scale = function () { return o3(n.scale.linear(), ob, ow) }; var o5 = ob.map(function (n) { return [n[0].utc, n[1]] }), o7 = o0.multi([[".%L", function (n) { return n.getUTCMilliseconds() }], [":%S", function (n) { return n.getUTCSeconds() }], ["%I:%M", function (n) { return n.getUTCMinutes() }], ["%I %p", function (n) { return n.getUTCHours() }], ["%a %d", function (n) { return n.getUTCDay() && 1 != n.getUTCDate() }], ["%b %d", function (n) { return 1 != n.getUTCDate() }], ["%B", function (n) { return n.getUTCMonth() }], ["%Y", es]]); function o6(n) { return JSON.parse(n.responseText) } function ok(n) { var t = r.createRange(); return t.selectNode(r.body), t.createContextualFragment(n.responseText) } o5.year = ty.year.utc, ty.scale.utc = function () { return o3(n.scale.linear(), o5, o7) }, n.text = tr(function (n) { return n.responseText }), n.json = function (n, t) { return ti(n, "application/json", o6, t) }, n.html = function (n, t) { return ti(n, "text/html", ok, t) }, n.xml = tr(function (n) { return n.responseXML }), "function" == typeof define && define.amd ? (this.d3 = n, define(n)) : "object" == typeof module && module.exports ? module.exports = n : this.d3 = n }();